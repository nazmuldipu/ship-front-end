(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{HF3I:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var o=r("fXoL");let i=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Db({type:e,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"loader"],[1,"text-center"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.yc(1,"Loading..."),o.Nb(),o.Ob(2,"div",1),o.yc(3,"Please wait ..."),o.Nb())},styles:[".loader[_ngcontent-%COMP%]{color:#137b85;font-size:30px;text-indent:-9999em;overflow:hidden;width:1em;height:1em;border-radius:50%;margin:20px auto;position:relative;transform:translateZ(0);-webkit-animation:load6 1.7s ease infinite,round 1.7s ease infinite;animation:load6 1.7s ease infinite,round 1.7s ease infinite}@-webkit-keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@-webkit-keyframes round{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes round{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),e})()},HymT:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var o=r("uWAI"),i=r("tk/3"),n=r("fXoL"),a=r("tyNb");let c=(()=>{class e{constructor(e,t){this.dataSource=e,this.router=t,this.serviceUrl="api/v1/ships",this.serviceAdminUrl="api/v1/admin/ships",this.serviceAdminAgentUrl="api/v1/adminAgent/ships",this.serviceServiceAdminUrl="api/v1/serviceAdmin/ships",this.serviceServiceAgentUrl="api/v1/serviceAgent/ships"}getAllShip(e=0){const t=(new i.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceUrl,null,!1,t)}getAdminShipPage(e=0){const t=(new i.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceAdminUrl,null,!0,t)}getAdminShip(e){return this.dataSource.sendRequest("GET",this.serviceAdminUrl+"/"+e,null,!0,null)}saveAdminShip(e){return this.dataSource.sendRequest("POST",this.serviceAdminUrl,e,!0,null)}updateAdminShip(e,t){return this.dataSource.sendRequest("PUT",this.serviceAdminUrl+"/"+e,t,!0,null)}getAdminShipMap(e,t,r){const o=(new i.c).set("startDate",t).set("endDate",r);return this.dataSource.sendRequest("GET",this.serviceAdminUrl+"/shipMap/"+e,null,!0,o)}updateAdminShipMap(e,t,r){const o=(new i.c).set("date",t).set("value",r?"true":"false");return this.dataSource.sendRequest("PUT",this.serviceAdminUrl+"/updateMap/"+e,null,!0,o)}getAdminAgentShips(e=0){const t=(new i.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceAdminAgentUrl,null,!0,t)}getServiceAdminShips(){return this.dataSource.sendRequest("GET",this.serviceServiceAdminUrl+"/myShips",null,!0,null)}getServiceAgentShips(){return this.dataSource.sendRequest("GET",this.serviceServiceAgentUrl+"/myShips",null,!0,null)}}return e.\u0275fac=function(t){return new(t||e)(n.Vb(o.a),n.Vb(a.b))},e.\u0275prov=n.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ZbIR:function(e,t,r){"use strict";r.r(t),r.d(t,"ROUTES",function(){return ee}),r.d(t,"CategoryModule",function(){return te});var o=r("tyNb"),i=r("3whx"),n=r("mrSG"),a=r("BcLk"),c=r("fXoL"),s=r("Fif/"),b=r("ofXK"),l=r("3Pt+");function d(e,t){1&e&&(c.Ob(0,"small",37),c.yc(1," Category name required "),c.Nb())}function u(e,t){1&e&&(c.Ob(0,"small",37),c.yc(1," Fare required "),c.Nb())}function m(e,t){1&e&&(c.Ob(0,"small",37),c.yc(1," Discount required "),c.Nb())}function g(e,t){1&e&&(c.Ob(0,"small",37),c.yc(1," Agent Discount required "),c.Nb())}function h(e,t){1&e&&(c.Ob(0,"small",37),c.yc(1," Seat Quality required "),c.Nb())}function f(e,t){1&e&&(c.Ob(0,"small",37),c.yc(1," Floor Number required "),c.Nb())}function p(e,t){1&e&&(c.Ob(0,"small",37),c.yc(1," Priority Number required "),c.Nb())}function y(e,t){1&e&&(c.Ob(0,"small",37),c.yc(1," Description required "),c.Nb())}const N=function(e,t,r){return{disabled:e,"btn-warning":t,"btn-success":r}};let O=(()=>{class e{constructor(e){this.builder=e,this.create=new c.n,this.update=new c.n,this.exists=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(){if(this.ship&&this.form.patchValue({ship:{id:this.ship.id}}),this.category&&this.category.id){this.exists=!0;const e=Object.assign({},this.category);this.form.patchValue(e)}}createForm(){this.form=this.builder.group({name:["",l.t.required],seatQuality:["",l.t.required],floorNumber:["",l.t.required],description:["",l.t.required],fare:["",l.t.required],discount:["",l.t.required],agentDiscount:["",l.t.required],priority:["",l.t.required],categoryFacilities:this.builder.group({topFloor:!1,ac:!1,freeBreakfast:!1}),ship:this.builder.group({id:["",l.t.required]})})}submit(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.exists=!1,this.form.reset(),this.ship)&&this.form.patchValue({ship:{id:this.ship.id}})}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(l.c))},e.\u0275cmp=c.Db({type:e,selectors:[["category-form"]],inputs:{ship:"ship",category:"category"},outputs:{create:"create",update:"update"},features:[c.vb],decls:72,vars:16,consts:[[3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","exampleInputEmail1"],[1,"form-control"],["formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"form-row"],[1,"form-group","col-md-6"],["for","fare"],["id","fare","type","number","formControlName","fare",1,"form-control"],["for","discount"],["id","discount","formControlName","discount",1,"form-control"],["for","agentDiscount"],["id","agentDiscount","type","number","formControlName","agentDiscount",1,"form-control"],[1,"form-group","col-md-4"],["for","seatQuality"],["id","seatQuality","formControlName","seatQuality",1,"form-control"],["for","floorNumber"],["id","floorNumber","maxlength","2","type","number","formControlName","floorNumber",1,"form-control"],["for","priority"],["id","priority","maxlength","2","type","number","formControlName","priority",1,"form-control"],["for","description"],["formControlName","description",1,"form-control"],["formGroupName","categoryFacilities",1,"border","p-2","my-3"],[1,"text-center"],[1,"form-row","align-items-center"],[1,"col-6","col-md-4"],[1,"form-check","mb-2"],["type","checkbox","id","topFloor","formControlName","topFloor",1,"form-check-input"],["for","topFloor",1,"form-check-label"],["type","checkbox","id","ac","formControlName","ac",1,"form-check-input"],["for","ac",1,"form-check-label"],["type","checkbox","id","freeBreakfast","formControlName","freeBreakfast",1,"form-check-input"],["for","freeBreakfast",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[1,"text-danger"]],template:function(e,t){1&e&&(c.Ob(0,"form",0),c.Yb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),c.Ob(1,"div",1),c.Ob(2,"label",2),c.yc(3,"Ship *"),c.Nb(),c.Ob(4,"label",3),c.yc(5),c.Nb(),c.Nb(),c.Ob(6,"div",1),c.Ob(7,"label",2),c.yc(8,"Category Name *"),c.Nb(),c.Kb(9,"input",4),c.wc(10,d,2,0,"small",5),c.Nb(),c.Ob(11,"div",6),c.Ob(12,"div",7),c.Ob(13,"label",8),c.yc(14,"Fare *"),c.Nb(),c.Kb(15,"input",9),c.wc(16,u,2,0,"small",5),c.Nb(),c.Nb(),c.Ob(17,"div",6),c.Ob(18,"div",7),c.Ob(19,"label",10),c.yc(20,"Discount *"),c.Nb(),c.Kb(21,"input",11),c.wc(22,m,2,0,"small",5),c.Nb(),c.Ob(23,"div",7),c.Ob(24,"label",12),c.yc(25,"Agent Discount *"),c.Nb(),c.Kb(26,"input",13),c.wc(27,g,2,0,"small",5),c.Nb(),c.Nb(),c.Ob(28,"div",6),c.Ob(29,"div",14),c.Ob(30,"label",15),c.yc(31,"Seat Quality *"),c.Nb(),c.Kb(32,"input",16),c.wc(33,h,2,0,"small",5),c.Nb(),c.Ob(34,"div",14),c.Ob(35,"label",17),c.yc(36,"Floor Number"),c.Nb(),c.Kb(37,"input",18),c.wc(38,f,2,0,"small",5),c.Nb(),c.Ob(39,"div",14),c.Ob(40,"label",19),c.yc(41,"Priority"),c.Nb(),c.Kb(42,"input",20),c.wc(43,p,2,0,"small",5),c.Nb(),c.Nb(),c.Ob(44,"div",1),c.Ob(45,"label",21),c.yc(46,"Description *"),c.Nb(),c.Kb(47,"input",22),c.wc(48,y,2,0,"small",5),c.Nb(),c.Ob(49,"div",23),c.Ob(50,"h3",24),c.yc(51,"Facilities"),c.Nb(),c.Ob(52,"div",25),c.Ob(53,"div",26),c.Ob(54,"div",27),c.Kb(55,"input",28),c.Ob(56,"label",29),c.yc(57," Top Floor "),c.Nb(),c.Nb(),c.Nb(),c.Ob(58,"div",26),c.Ob(59,"div",27),c.Kb(60,"input",30),c.Ob(61,"label",31),c.yc(62," AC "),c.Nb(),c.Nb(),c.Nb(),c.Ob(63,"div",26),c.Ob(64,"div",27),c.Kb(65,"input",32),c.Ob(66,"label",33),c.yc(67," Free Breakfast "),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(68,"div",34),c.Ob(69,"span",35),c.Yb("mouseenter",function(){return t.mouseoverShifting=!0}),c.Ob(70,"button",36),c.yc(71),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.hc("formGroup",t.form),c.xb(5),c.Ac(" ",t.ship.name," "),c.xb(5),c.hc("ngIf",(null==t.form.controls.name.errors?null:t.form.controls.name.errors.required)&&(t.form.controls.name.dirty||t.mouseoverShifting)),c.xb(6),c.hc("ngIf",(null==t.form.controls.fare.errors?null:t.form.controls.fare.errors.required)&&(t.form.controls.fare.dirty||t.mouseoverShifting)),c.xb(6),c.hc("ngIf",(null==t.form.controls.discount.errors?null:t.form.controls.discount.errors.required)&&(t.form.controls.discount.dirty||t.mouseoverShifting)),c.xb(5),c.hc("ngIf",(null==t.form.controls.agentDiscount.errors?null:t.form.controls.agentDiscount.errors.required)&&(t.form.controls.agentDiscount.dirty||t.mouseoverShifting)),c.xb(6),c.hc("ngIf",(null==t.form.controls.seatQuality.errors?null:t.form.controls.seatQuality.errors.required)&&(t.form.controls.seatQuality.dirty||t.mouseoverShifting)),c.xb(5),c.hc("ngIf",(null==t.form.controls.floorNumber.errors?null:t.form.controls.floorNumber.errors.required)&&(t.form.controls.floorNumber.dirty||t.mouseoverShifting)),c.xb(5),c.hc("ngIf",(null==t.form.controls.priority.errors?null:t.form.controls.priority.errors.required)&&(t.form.controls.priority.dirty||t.mouseoverShifting)),c.xb(5),c.hc("ngIf",(null==t.form.controls.description.errors?null:t.form.controls.description.errors.required)&&(t.form.controls.description.dirty||t.mouseoverShifting)),c.xb(22),c.hc("ngClass",c.nc(12,N,t.form.invalid,t.exists,!t.exists)),c.xb(1),c.Ac(" ",t.exists?"Update":"Create"," "))},directives:[l.v,l.l,l.e,l.b,l.k,l.d,b.n,l.p,l.h,l.f,l.a,b.l],styles:[""],changeDetection:0}),e})();function v(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",6),c.Ob(1,"category-form",7),c.Yb("create",function(t){return c.qc(e),c.ac().onCreate(t)})("update",function(t){return c.qc(e),c.ac().onUpdate(t)}),c.Nb(),c.Nb()}if(2&e){const e=c.ac();c.xb(1),c.hc("ship",e.ship)("category",e.category)}}let D=(()=>{class e{constructor(e,t,r){this.categoryService=e,this.activeRoute=t,this.router=r,this.id=t.snapshot.params.id}ngOnInit(){this.id&&this.getAdminCategory(this.id)}onSelectShip(e){this.ship=e}getAdminCategory(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.category=yield this.categoryService.getAdminCategory(e).toPromise(),this.ship=this.category.ship}catch(t){console.log(t)}})}onCreate(e){return Object(n.a)(this,void 0,void 0,function*(){try{const t=yield this.categoryService.saveAdminCategory(e,this.ship.id).toPromise();console.log(t),this.router.navigate(["/dashboard/admin/category",t.id])}catch(t){console.log(t)}})}onUpdate(e){return Object(n.a)(this,void 0,void 0,function*(){try{yield this.categoryService.updateAdminCategory(this.ship.id,this.category.id,e).toPromise(),this.router.navigate(["/dashboard/admin/category",this.category.id])}catch(t){}})}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(a.a),c.Jb(o.a),c.Jb(o.b))},e.\u0275cmp=c.Db({type:e,selectors:[["app-add"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-3"],[3,"mode","ship"],["class","col-md-9",4,"ngIf"],[1,"col-md-9"],[3,"ship","category","create","update"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"span",1),c.yc(2,"Add Category"),c.Nb(),c.Nb(),c.Ob(3,"div",0),c.Ob(4,"div",2),c.Ob(5,"div",3),c.Ob(6,"admin-ship-list",4),c.Yb("ship",function(e){return t.onSelectShip(e)}),c.Nb(),c.Nb(),c.wc(7,v,2,2,"div",5),c.Nb(),c.Nb()),2&e&&(c.xb(6),c.hc("mode",2),c.xb(1),c.hc("ngIf",t.ship))},directives:[s.a,b.n,O],styles:[""]}),e})();function x(e,t){if(1&e&&(c.Ob(0,"div",5),c.Ob(1,"div",6),c.Ob(2,"label",7),c.yc(3,"Ship "),c.Nb(),c.Ob(4,"label",8),c.yc(5),c.Nb(),c.Nb(),c.Ob(6,"div",6),c.Ob(7,"label",7),c.yc(8,"Category Name "),c.Nb(),c.Ob(9,"label",8),c.yc(10),c.Nb(),c.Nb(),c.Ob(11,"div",9),c.Ob(12,"div",10),c.Ob(13,"label",11),c.yc(14,"Fare"),c.Nb(),c.Ob(15,"label",8),c.yc(16),c.Nb(),c.Nb(),c.Nb(),c.Ob(17,"div",9),c.Ob(18,"div",10),c.Ob(19,"label",12),c.yc(20,"Discount "),c.Nb(),c.Ob(21,"label",8),c.yc(22),c.Nb(),c.Nb(),c.Ob(23,"div",10),c.Ob(24,"label",13),c.yc(25,"Agent Discount"),c.Nb(),c.Ob(26,"label",8),c.yc(27),c.Nb(),c.Nb(),c.Nb(),c.Ob(28,"div",9),c.Ob(29,"div",14),c.Ob(30,"label",15),c.yc(31,"Seat Quality "),c.Nb(),c.Ob(32,"label",8),c.yc(33),c.Nb(),c.Nb(),c.Ob(34,"div",14),c.Ob(35,"label",16),c.yc(36,"Floor Number"),c.Nb(),c.Ob(37,"label",8),c.yc(38),c.Nb(),c.Nb(),c.Ob(39,"div",14),c.Ob(40,"label",16),c.yc(41,"Priority"),c.Nb(),c.Ob(42,"label",8),c.yc(43),c.Nb(),c.Nb(),c.Nb(),c.Ob(44,"div",6),c.Ob(45,"label",17),c.yc(46,"Description "),c.Nb(),c.Ob(47,"label",8),c.yc(48),c.Nb(),c.Nb(),c.Ob(49,"div",18),c.Ob(50,"h3",19),c.yc(51,"Facilities"),c.Nb(),c.Ob(52,"div",20),c.Ob(53,"div",21),c.Ob(54,"label",22),c.Kb(55,"i",23),c.yc(56," Top Floor "),c.Nb(),c.Nb(),c.Ob(57,"div",21),c.Ob(58,"label",22),c.Kb(59,"i",23),c.yc(60," AC "),c.Nb(),c.Nb(),c.Ob(61,"div",21),c.Ob(62,"label",22),c.Kb(63,"i",23),c.yc(64," Free Breakfast "),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(65,"div",24),c.Ob(66,"div",25),c.Ob(67,"a",26),c.Kb(68,"i",27),c.yc(69," Add Category"),c.Nb(),c.Ob(70,"a",28),c.Kb(71,"i",29),c.yc(72," Edit"),c.Nb(),c.Ob(73,"a",30),c.Kb(74,"i",31),c.yc(75," Category list"),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e){const e=c.ac();c.xb(5),c.Ac(" ",null==e.category||null==e.category.ship?null:e.category.ship.name," "),c.xb(5),c.zc(null==e.category?null:e.category.name),c.xb(6),c.zc(null==e.category?null:e.category.fare),c.xb(6),c.zc(null==e.category?null:e.category.discount),c.xb(5),c.zc(null==e.category?null:e.category.agentDiscount),c.xb(6),c.zc(null==e.category?null:e.category.seatQuality),c.xb(5),c.zc(null==e.category?null:e.category.floorNumber),c.xb(5),c.zc(null==e.category?null:e.category.priority),c.xb(5),c.zc(null==e.category?null:e.category.description),c.xb(7),c.hc("ngClass",null!=e.category&&null!=e.category.categoryFacilities&&e.category.categoryFacilities.topFloor?"fa-check-square-o":"fa-square-o"),c.xb(4),c.hc("ngClass",null!=e.category&&null!=e.category.categoryFacilities&&e.category.categoryFacilities.ac?"fa-check-square-o":"fa-square-o"),c.xb(4),c.hc("ngClass",null!=e.category&&null!=e.category.categoryFacilities&&e.category.categoryFacilities.freeBreakfast?"fa-check-square-o":"fa-square-o"),c.xb(7),c.jc("routerLink","/dashboard/admin/category/add/",e.category.id,"")}}let S=(()=>{class e{constructor(e,t){this.categoryService=e,this.activeRoute=t,this.id=t.snapshot.params.id}ngOnInit(){this.id&&this.getAdminCategory(this.id)}getAdminCategory(e){return Object(n.a)(this,void 0,void 0,function*(){this.categoryService.getAdminCategory(e).subscribe(e=>{this.category=e})})}onEdit(e){console.log("ON edit : ",e)}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(a.a),c.Jb(o.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-details"]],decls:7,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","mb-4"],[1,"col-md-3"],["class","col-md-9",4,"ngIf"],[1,"col-md-9"],[1,"form-group"],["for","exampleInputEmail1"],[1,"form-control"],[1,"form-row"],[1,"form-group","col-md-6"],["for","fare"],["for","discount"],["for","agentDiscount"],[1,"form-group","col-md-4"],["for","seatQuality"],["for","floorNumber"],["for","description"],[1,"border","p-2","my-3"],[1,"text-center"],[1,"form-row","align-items-center"],[1,"col-6","col-md-4"],[1,"form-check-label"],[1,"fa",3,"ngClass"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2"],["role","group","aria-label","First group",1,"btn-group","mr-2"],["routerLink","/dashboard/admin/category/add",1,"btn","btn-light"],[1,"fa","fa-plus"],[1,"btn","btn-light",3,"routerLink"],[1,"fa","fa-pencil-square-o"],["routerLink","/dashboard/admin/category",1,"btn","btn-light"],[1,"fa","fa-list"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"span",1),c.yc(2,"Category Details"),c.Nb(),c.Nb(),c.Ob(3,"div",0),c.Ob(4,"div",2),c.Kb(5,"div",3),c.wc(6,x,76,13,"div",4),c.Nb(),c.Nb()),2&e&&(c.xb(6),c.hc("ngIf",t.category))},directives:[b.n,b.l,o.d],styles:[""]}),e})();var w=r("B01t");function k(e,t){if(1&e&&(c.Ob(0,"tr"),c.Ob(1,"td"),c.yc(2),c.bc(3,"date"),c.Nb(),c.Ob(4,"td",12),c.yc(5),c.Nb(),c.Ob(6,"td",12),c.yc(7),c.Nb(),c.Ob(8,"td",12),c.yc(9),c.Nb(),c.Nb()),2&e){const e=t.$implicit,r=c.ac(3);c.xb(2),c.zc(c.dc(3,4,e.key,"d MMM,yy : EEE")),c.xb(3),c.zc(null==r.category?null:r.category.fare),c.xb(2),c.zc(e.value),c.xb(2),c.zc(r.category.fare-e.value)}}function C(e,t){if(1&e&&(c.Ob(0,"tbody"),c.wc(1,k,10,7,"tr",14),c.bc(2,"keyvalue"),c.Nb()),2&e){const e=c.ac(2);c.xb(1),c.hc("ngForOf",c.cc(2,1,e.discountMap))}}function F(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",1),c.Ob(1,"div",2),c.Ob(2,"div",3),c.Ob(3,"div",4),c.Ob(4,"div",5),c.Kb(5,"i",6),c.Nb(),c.Nb(),c.Ob(6,"input",7),c.Yb("selected",function(t){return c.qc(e),c.ac().selectedDiscountDate(t)}),c.Nb(),c.Nb(),c.Nb(),c.Ob(7,"div",8),c.Ob(8,"h5"),c.Ob(9,"span",9),c.yc(10,"Discount Map for "),c.Nb(),c.Ob(11,"strong"),c.yc(12),c.Nb(),c.Ob(13,"button",10),c.Yb("click",function(){c.qc(e);const t=c.ac();return t.onEditDiscount(null==t.category?null:t.category.id)}),c.yc(14," Edit "),c.Nb(),c.Nb(),c.Nb(),c.Ob(15,"table",11),c.Ob(16,"thead"),c.Ob(17,"tr"),c.Ob(18,"th"),c.yc(19,"Date"),c.Nb(),c.Ob(20,"th",12),c.yc(21,"Price"),c.Nb(),c.Ob(22,"th",12),c.yc(23,"Discount"),c.Nb(),c.Ob(24,"th",12),c.yc(25,"Payable"),c.Nb(),c.Nb(),c.Nb(),c.wc(26,C,3,3,"tbody",13),c.Nb(),c.Nb()}if(2&e){const e=c.ac();c.xb(6),c.hc("options",e.options),c.xb(6),c.Ac(" ",null==e.category?null:e.category.name," "),c.xb(14),c.hc("ngIf",e.discountMap)}}let A=(()=>{class e{constructor(e){this.categoryService=e,this.onEdit=new c.n,this.daterange={},this.setDateRanges()}ngOnChanges(e){e.category&&this.category&&this.category.id&&this.getAdminDiscountMap(this.category.id,this.daterange.startDate,this.daterange.endDate),e.reload&&this.category&&this.getAdminDiscountMap(this.category.id,this.daterange.startDate,this.daterange.endDate)}setDateRanges(){this.daterange.startDate=new Date,this.daterange.endDate=new Date,this.daterange.endDate.setDate(this.daterange.endDate.getDate()+10);const e=new Date;e.setDate(this.daterange.startDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.daterange.startDate,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedDiscountDate(e){this.daterange.startDate=e.start._d,this.daterange.endDate=e.end._d,this.daterange.label=e.label,this.getAdminDiscountMap(this.category.id,this.daterange.startDate,this.daterange.endDate)}getAdminDiscountMap(e,t,r){return Object(n.a)(this,void 0,void 0,function*(){const o=this.makeDateString(t),i=this.makeDateString(r);yield this.categoryService.getAdminDiscountMap(e,o,i).subscribe(e=>{this.discountMap=e})})}makeDateString(e){const t=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+r}onEditDiscount(e){this.onEdit.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(a.a))},e.\u0275cmp=c.Db({type:e,selectors:[["admin-discount-map"]],inputs:{reload:"reload",category:"category"},outputs:{onEdit:"onEdit"},features:[c.vb],decls:1,vars:1,consts:[["class","row m-0 ",4,"ngIf"],[1,"row","m-0"],[1,"col-md-3","pl-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-md-9"],[1,"font-weight-light"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"table","border","table-hover","mt-2"],[1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&c.wc(0,F,27,3,"div",0),2&e&&c.hc("ngIf",!!t.discountMap)},directives:[b.n,w.b,b.m],pipes:[b.h,b.e],styles:[""]}),e})();var P=r("ar73"),q=r("1kSV");const M=function(e){return{disabled:e}};let I=(()=>{class e{constructor(e){this.builder=e,this.close=new c.n,this.create=new c.n,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){e.category&&this.form.patchValue({categoryId:this.category.id})}createForm(){this.form=this.builder.group({categoryId:["",l.t.required],startDate:["",l.t.required],endDate:["",l.t.required],amount:["",l.t.required]})}submit(){this.form.valid&&(this.create.emit(this.form.value),this.form.reset(),this.form.patchValue({categoryId:this.category.id}))}onCloseFrom(){this.close.emit(!1)}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(l.c))},e.\u0275cmp=c.Db({type:e,selectors:[["admin-discount-map-form"]],inputs:{category:"category"},outputs:{close:"close",create:"create"},features:[c.vb],decls:28,vars:5,consts:[[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[1,"d-flex","justify-content-between"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"mouseenter"],["type","submit",1,"btn","btn-primary","btn-success","mx-1",3,"ngClass"]],template:function(e,t){if(1&e){const e=c.Pb();c.Ob(0,"h3",0),c.yc(1,"Adjust category discount map"),c.Nb(),c.Ob(2,"form",1),c.Yb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),c.Ob(3,"div",2),c.Ob(4,"label",3),c.yc(5,"Category"),c.Nb(),c.Ob(6,"label",4),c.yc(7),c.Nb(),c.Nb(),c.Ob(8,"div",2),c.Ob(9,"label",5),c.yc(10,"Start date"),c.Nb(),c.Ob(11,"input",6,7),c.Yb("click",function(){return c.qc(e),c.pc(12).toggle()}),c.Nb(),c.Nb(),c.Ob(13,"div",2),c.Ob(14,"label",8),c.yc(15,"End date"),c.Nb(),c.Ob(16,"input",9,10),c.Yb("click",function(){return c.qc(e),c.pc(17).toggle()}),c.Nb(),c.Nb(),c.Ob(18,"div",2),c.Ob(19,"label",11),c.yc(20,"Discount "),c.Nb(),c.Kb(21,"input",12),c.Nb(),c.Ob(22,"div",13),c.Ob(23,"button",14),c.Yb("click",function(){return t.onCloseFrom()}),c.yc(24," Close "),c.Nb(),c.Ob(25,"span",15),c.Yb("mouseenter",function(){return t.mouseoverShifting=!0}),c.Ob(26,"button",16),c.yc(27," Submit "),c.Nb(),c.Nb(),c.Nb(),c.Nb()}2&e&&(c.xb(2),c.hc("formGroup",t.form),c.xb(5),c.Ac(" ",null==t.category?null:t.category.name," "),c.xb(19),c.hc("ngClass",c.lc(3,M,t.form.invalid)))},directives:[l.v,l.l,l.e,l.b,q.d,l.k,l.d,l.p,b.l],styles:[""]}),e})();function E(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",10),c.Ob(1,"admin-category-list",11),c.Yb("back",function(t){return c.qc(e),c.ac().onCategoryBack(t)})("category",function(t){return c.qc(e),c.ac().onSelectCategory(t)}),c.Nb(),c.Nb()}if(2&e){const e=c.ac();c.xb(1),c.hc("shipId",e.ship.id)}}function Y(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",6),c.Ob(1,"div",12),c.Ob(2,"admin-discount-map-form",13),c.Yb("close",function(t){return c.qc(e),c.ac().onCloseEditForm(t)})("create",function(t){return c.qc(e),c.ac().onDiscountMapUpdate(t)}),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=c.ac();c.xb(2),c.hc("category",e.category)}}let K=(()=>{class e{constructor(e){this.categoryService=e,this.editFrom=!1,this.reloadDiscountMap=!1}onSelectShip(e){this.ship=e}onSelectCategory(e){this.category=e}onEditCategoryDiscount(e){this.editFrom=!0}onCloseEditForm(e){this.editFrom=!1}onDiscountMapUpdate(e){return Object(n.a)(this,void 0,void 0,function*(){console.log(e);const t=this.makeDateString(e.startDate),r=this.makeDateString(e.endDate);try{yield this.categoryService.updateAdminDiscountMap(e.categoryId,t,r,e.amount).toPromise(),this.reloadDiscountMap=!this.reloadDiscountMap,this.onCloseEditForm(!0)}catch(o){console.log(o)}})}makeDateString(e){return e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(a.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-discount-map"]],decls:12,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-3"],[3,"mode","ship"],[1,"col-md-9"],[1,"row","m-0","pt-0","pb-2"],["class","border p-2",4,"ngIf"],["class","row m-0 pt-0 pb-2",4,"ngIf"],[3,"reload","category","onEdit"],[1,"border","p-2"],[3,"shipId","back","category"],[1,"col-md-6","border","p-2"],[3,"category","close","create"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"span",1),c.yc(2,"Discount Map"),c.Nb(),c.Nb(),c.Ob(3,"div",0),c.Ob(4,"div",2),c.Ob(5,"div",3),c.Ob(6,"admin-ship-list",4),c.Yb("ship",function(e){return t.onSelectShip(e)}),c.Nb(),c.Nb(),c.Ob(7,"div",5),c.Ob(8,"div",6),c.wc(9,E,2,1,"div",7),c.Nb(),c.wc(10,Y,3,1,"div",8),c.Ob(11,"admin-discount-map",9),c.Yb("onEdit",function(e){return t.onEditCategoryDiscount(e)}),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.xb(6),c.hc("mode",2),c.xb(3),c.hc("ngIf",t.ship),c.xb(1),c.hc("ngIf",t.editFrom),c.xb(1),c.hc("reload",t.reloadDiscountMap)("category",t.category))},directives:[s.a,b.n,A,P.a,I],styles:[""]}),e})();var U=r("z3bE"),z=r("uEz7");function j(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",13),c.yc(1),c.Ob(2,"button",14),c.Yb("click",function(){return c.qc(e),c.ac(2).clear()}),c.yc(3,"Clear"),c.Nb(),c.Nb()}if(2&e){const e=c.ac(2);c.xb(1),c.Ac(" ",e.message," ")}}function R(e,t){if(1&e){const e=c.Pb();c.Ob(0,"tr"),c.Ob(1,"td"),c.Ob(2,"a",15),c.yc(3),c.Nb(),c.Nb(),c.Ob(4,"td"),c.yc(5),c.Nb(),c.Ob(6,"td"),c.yc(7),c.Nb(),c.Ob(8,"td"),c.yc(9),c.Nb(),c.Ob(10,"td"),c.yc(11),c.Nb(),c.Ob(12,"td"),c.Ob(13,"div",16),c.Ob(14,"a",17),c.Kb(15,"i",18),c.Nb(),c.Ob(16,"button",19),c.Yb("click",function(){c.qc(e);const r=t.$implicit;return c.ac(2).onDelete(r.id)}),c.Kb(17,"i",20),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=t.$implicit;c.xb(2),c.jc("routerLink","/dashboard/admin/category/",e.id,""),c.xb(1),c.Ac(" ",e.name," "),c.xb(2),c.zc(e.fare),c.xb(2),c.zc(e.floorNumber),c.xb(2),c.zc(e.seatQuality),c.xb(2),c.zc(e.priority),c.xb(3),c.jc("routerLink","/dashboard/admin/category/add/",e.id,"")}}function T(e,t){if(1&e){const e=c.Pb();c.Ob(0,"pagination",21),c.Yb("getPage",function(t){c.qc(e);const r=c.ac(2);return r.getCategoryPage(r.shipId,t)}),c.Nb()}if(2&e){const e=c.ac(2);c.hc("page",e.categoryPage)}}function G(e,t){if(1&e&&(c.Ob(0,"div",6),c.Ob(1,"h3",7),c.yc(2),c.Nb(),c.wc(3,j,4,1,"div",8),c.Ob(4,"table",9),c.Ob(5,"thead"),c.Ob(6,"tr"),c.Ob(7,"th"),c.yc(8,"Category Name"),c.Nb(),c.Ob(9,"th"),c.yc(10,"Fair"),c.Nb(),c.Ob(11,"th"),c.yc(12,"Floor"),c.Nb(),c.Ob(13,"th"),c.yc(14,"Seat Quality"),c.Nb(),c.Ob(15,"th"),c.yc(16,"Priority"),c.Nb(),c.Kb(17,"th"),c.Nb(),c.Nb(),c.Ob(18,"tbody"),c.wc(19,R,18,7,"tr",10),c.Ob(20,"tr"),c.Ob(21,"td",11),c.wc(22,T,1,1,"pagination",12),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e){const e=c.ac();c.xb(2),c.Bc("",null==e.ship?null:e.ship.shipNumber,"-",null==e.ship?null:e.ship.name," Category List"),c.xb(1),c.hc("ngIf",e.message.length>0),c.xb(16),c.hc("ngForOf",null==e.categoryPage?null:e.categoryPage.content),c.xb(3),c.hc("ngIf",null!=e.categoryPage)}}let J=(()=>{class e{constructor(e,t){this.categoryService=e,this.utilService=t,this.message=""}onSelectShip(e){this.ship=e,this.getCategoryPage(e.id)}getCategoryPage(e,t=0){return Object(n.a)(this,void 0,void 0,function*(){try{this.categoryPage=yield this.categoryService.getAdminCategoryByShiplId(e,t).toPromise(),this.categoryPage.content.sort(this.utilService.dynamicSortObject("priority"))}catch(r){console.log(r)}})}onDelete(e){return Object(n.a)(this,void 0,void 0,function*(){if(confirm("Are you sure to Delete the category"))try{yield this.categoryService.deleteAdminCategory(e).toPromise(),this.message="Category deleted successfully",this.getCategoryPage(this.ship.id)}catch(t){console.log(t),this.message="Category deleted Failed"}})}clear(){this.message=""}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(a.a),c.Jb(U.a))},e.\u0275cmp=c.Db({type:e,selectors:[["category-list"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-3"],[3,"mode","ship"],["class","col-md-9",4,"ngIf"],[1,"col-md-9"],[1,"text-center"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"table","table-responsive-sm"],[4,"ngFor","ngForOf"],["colspan","7"],[3,"page","getPage",4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-warning","btn-sm",3,"click"],[2,"text-decoration","none",3,"routerLink"],["role","group","aria-label","First group",1,"btn-group","mr-2"],[1,"btn","btn-light",3,"routerLink"],[1,"fa","fa-pencil-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"fa","fa-trash-o"],[3,"page","getPage"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"span",1),c.yc(2,"Category List"),c.Nb(),c.Nb(),c.Ob(3,"div",0),c.Ob(4,"div",2),c.Ob(5,"div",3),c.Ob(6,"admin-ship-list",4),c.Yb("ship",function(e){return t.onSelectShip(e)}),c.Nb(),c.Nb(),c.wc(7,G,23,5,"div",5),c.Nb(),c.Nb()),2&e&&(c.xb(6),c.hc("mode",1),c.xb(1),c.hc("ngIf",null==t.categoryPage?null:t.categoryPage.content.length))},directives:[s.a,b.n,b.m,o.d,z.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem;margin-bottom:-1px;background-color:#fff;border:1px solid rgba(0,0,0,.125)}"]}),e})();var L=r("HF3I");function B(e,t){1&e&&c.Kb(0,"loading")}function Q(e,t){if(1&e&&(c.Ob(0,"tr"),c.Ob(1,"td"),c.yc(2),c.bc(3,"date"),c.Nb(),c.Ob(4,"td",13),c.yc(5),c.Nb(),c.Ob(6,"td",13),c.yc(7),c.Nb(),c.Nb()),2&e){const e=t.$implicit,r=c.ac(3);c.xb(2),c.zc(c.dc(3,3,e.key,"d MMM,yy : EEE")),c.xb(3),c.zc(null==r.category?null:r.category.fare),c.xb(2),c.zc(e.value)}}function V(e,t){if(1&e&&(c.Ob(0,"tbody"),c.wc(1,Q,8,6,"tr",14),c.bc(2,"keyvalue"),c.Nb()),2&e){const e=c.ac(2);c.xb(1),c.hc("ngForOf",c.cc(2,1,e.priceMap))}}function _(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",2),c.Ob(1,"div",3),c.Ob(2,"div",4),c.Ob(3,"div",5),c.Ob(4,"div",6),c.Kb(5,"i",7),c.Nb(),c.Nb(),c.Ob(6,"input",8),c.Yb("selected",function(t){return c.qc(e),c.ac().selectedPricetDate(t)}),c.Nb(),c.Nb(),c.Nb(),c.Ob(7,"div",9),c.Ob(8,"h5"),c.Ob(9,"span",10),c.yc(10,"Price Map for "),c.Nb(),c.Ob(11,"strong"),c.yc(12),c.Nb(),c.Ob(13,"button",11),c.Yb("click",function(){c.qc(e);const t=c.ac();return t.onEditPrice(null==t.category?null:t.category.id)}),c.yc(14," Edit "),c.Nb(),c.Nb(),c.Nb(),c.Ob(15,"table",12),c.Ob(16,"thead"),c.Ob(17,"tr"),c.Ob(18,"th"),c.yc(19,"Date"),c.Nb(),c.Ob(20,"th",13),c.yc(21,"Usual Price"),c.Nb(),c.Ob(22,"th",13),c.yc(23,"New Price"),c.Nb(),c.Nb(),c.Nb(),c.wc(24,V,3,3,"tbody",0),c.Nb(),c.Nb()}if(2&e){const e=c.ac();c.xb(6),c.hc("options",e.options),c.xb(6),c.Ac(" ",null==e.category?null:e.category.name," "),c.xb(12),c.hc("ngIf",e.priceMap)}}let X=(()=>{class e{constructor(e){this.categoryService=e,this.onEdit=new c.n,this.daterange={},this.loading=!1,this.setDateRanges()}ngOnChanges(e){e.category&&this.category&&this.category.id&&this.getAdminPriceMap(this.category.id,this.daterange.startDate,this.daterange.endDate),e.reload&&this.category&&this.getAdminPriceMap(this.category.id,this.daterange.startDate,this.daterange.endDate)}setDateRanges(){this.daterange.startDate=new Date,this.daterange.endDate=new Date,this.daterange.endDate.setDate(this.daterange.endDate.getDate()+10);const e=new Date;e.setDate(this.daterange.startDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.daterange.startDate,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedPricetDate(e){this.daterange.startDate=e.start._d,this.daterange.endDate=e.end._d,this.daterange.label=e.label,this.getAdminPriceMap(this.category.id,this.daterange.startDate,this.daterange.endDate)}getAdminPriceMap(e,t,r){return Object(n.a)(this,void 0,void 0,function*(){this.loading=!0;const o=this.makeDateString(t),i=this.makeDateString(r);yield this.categoryService.getAdminPriceMap(e,o,i).subscribe(e=>{this.priceMap=e,this.loading=!1})})}makeDateString(e){const t=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+r}onEditPrice(e){this.onEdit.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(a.a))},e.\u0275cmp=c.Db({type:e,selectors:[["admin-price-map"]],inputs:{reload:"reload",category:"category"},outputs:{onEdit:"onEdit"},features:[c.vb],decls:2,vars:2,consts:[[4,"ngIf"],["class","row m-0 ",4,"ngIf"],[1,"row","m-0"],[1,"col-md-3","pl-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-md-9"],[1,"font-weight-light"],[1,"btn-sm","btn-warning",3,"click"],[1,"table","border","table-hover","mt-2"],[1,"text-right"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(c.wc(0,B,1,0,"loading",0),c.wc(1,_,25,3,"div",1)),2&e&&(c.hc("ngIf",t.loading),c.xb(1),c.hc("ngIf",!!t.priceMap&&!t.loading))},directives:[b.n,L.a,w.b,b.m],pipes:[b.h,b.e],styles:[""]}),e})();const H=function(e){return{disabled:e}};let $=(()=>{class e{constructor(e){this.builder=e,this.close=new c.n,this.create=new c.n,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){e.category&&this.form.patchValue({categoryId:this.category.id})}createForm(){this.form=this.builder.group({categoryId:["",l.t.required],startDate:["",l.t.required],endDate:["",l.t.required],amount:["",l.t.required]})}submit(){this.form.valid&&(this.create.emit(this.form.value),this.form.reset(),this.form.patchValue({categoryId:this.category.id}))}onCloseFrom(){this.close.emit(!1)}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(l.c))},e.\u0275cmp=c.Db({type:e,selectors:[["admin-price-map-form"]],inputs:{category:"category"},outputs:{close:"close",create:"create"},features:[c.vb],decls:28,vars:5,consts:[[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[1,"d-flex","justify-content-between"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"mouseenter"],["type","submit",1,"btn","btn-primary","btn-success","mx-1",3,"ngClass"]],template:function(e,t){if(1&e){const e=c.Pb();c.Ob(0,"h3",0),c.yc(1,"Adjust category discount map"),c.Nb(),c.Ob(2,"form",1),c.Yb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),c.Ob(3,"div",2),c.Ob(4,"label",3),c.yc(5,"Category"),c.Nb(),c.Ob(6,"label",4),c.yc(7),c.Nb(),c.Nb(),c.Ob(8,"div",2),c.Ob(9,"label",5),c.yc(10,"Start date"),c.Nb(),c.Ob(11,"input",6,7),c.Yb("click",function(){return c.qc(e),c.pc(12).toggle()}),c.Nb(),c.Nb(),c.Ob(13,"div",2),c.Ob(14,"label",8),c.yc(15,"End date"),c.Nb(),c.Ob(16,"input",9,10),c.Yb("click",function(){return c.qc(e),c.pc(17).toggle()}),c.Nb(),c.Nb(),c.Ob(18,"div",2),c.Ob(19,"label",11),c.yc(20,"New Price"),c.Nb(),c.Kb(21,"input",12),c.Nb(),c.Ob(22,"div",13),c.Ob(23,"button",14),c.Yb("click",function(){return t.onCloseFrom()}),c.yc(24," Close "),c.Nb(),c.Ob(25,"span",15),c.Yb("mouseenter",function(){return t.mouseoverShifting=!0}),c.Ob(26,"button",16),c.yc(27," Submit "),c.Nb(),c.Nb(),c.Nb(),c.Nb()}2&e&&(c.xb(2),c.hc("formGroup",t.form),c.xb(5),c.Ac(" ",null==t.category?null:t.category.name," "),c.xb(19),c.hc("ngClass",c.lc(3,H,t.form.invalid)))},directives:[l.v,l.l,l.e,l.b,q.d,l.k,l.d,l.p,b.l],styles:[""]}),e})();function Z(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",10),c.Ob(1,"admin-category-list",11),c.Yb("back",function(t){return c.qc(e),c.ac().onCategoryBack(t)})("category",function(t){return c.qc(e),c.ac().onSelectCategory(t)}),c.Nb(),c.Nb()}if(2&e){const e=c.ac();c.xb(1),c.hc("shipId",e.ship.id)}}function W(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div",6),c.Ob(1,"div",12),c.Ob(2,"admin-price-map-form",13),c.Yb("close",function(t){return c.qc(e),c.ac().onCloseEditForm(t)})("create",function(t){return c.qc(e),c.ac().onPriceMapUpdate(t)}),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=c.ac();c.xb(2),c.hc("category",e.category)}}const ee=[{path:"add",component:D},{path:"add/:id",component:D},{path:"discount-map",component:K},{path:"price-map",component:(()=>{class e{constructor(e){this.categoryService=e,this.editFrom=!1,this.reloadPriceMap=!1}ngOnInit(){}onSelectShip(e){this.ship=e}onSelectCategory(e){this.category=e}onEditCategoryPrice(e){this.editFrom=!0}onCloseEditForm(e){this.editFrom=!1}onPriceMapUpdate(e){const t=this.makeDateString(e.startDate),r=this.makeDateString(e.endDate);this.categoryService.updateAdminPriceMap(e.categoryId,t,r,e.amount).subscribe(e=>{this.reloadPriceMap=!this.reloadPriceMap,this.onCloseEditForm(!0)})}makeDateString(e){return e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(a.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-price-map"]],decls:12,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-3"],[3,"mode","ship"],[1,"col-md-9"],[1,"row","m-0","pt-0","pb-2"],["class","border p-2",4,"ngIf"],["class","row m-0 pt-0 pb-2",4,"ngIf"],[3,"reload","category","onEdit"],[1,"border","p-2"],[3,"shipId","back","category"],[1,"col-md-6","border","p-2"],[3,"category","close","create"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"span",1),c.yc(2,"Price Map"),c.Nb(),c.Nb(),c.Ob(3,"div",0),c.Ob(4,"div",2),c.Ob(5,"div",3),c.Ob(6,"admin-ship-list",4),c.Yb("ship",function(e){return t.onSelectShip(e)}),c.Nb(),c.Nb(),c.Ob(7,"div",5),c.Ob(8,"div",6),c.wc(9,Z,2,1,"div",7),c.Nb(),c.wc(10,W,3,1,"div",8),c.Ob(11,"admin-price-map",9),c.Yb("onEdit",function(e){return t.onEditCategoryPrice(e)}),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.xb(6),c.hc("mode",2),c.xb(3),c.hc("ngIf",t.ship),c.xb(1),c.hc("ngIf",t.editFrom),c.xb(1),c.hc("reload",t.reloadPriceMap)("category",t.category))},directives:[s.a,b.n,X,P.a,$],styles:[""]}),e})()},{path:":id",component:S},{path:"",component:J}];let te=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[i.a,o.e.forChild(ee)]]}),e})()},z3bE:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var o=r("fXoL");let i=(()=>{class e{constructor(){}getDatesBetween(e,t){const r=new Date(e),o=new Date(t);o.setDate(o.getDate()-1);let i=[];for(;r.getTime()<=o.getTime();){const e=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();i.push(e),r.setDate(r.getDate()+1)}return i}getDateString(e){const t=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+r}getDateStringFromDateObj(e){return e.year+"-"+e.month+"-"+e.day}getTimeStringFromTimeObj(e){return e.hour+":"+e.minute}dynamicSortObject(e){let t=e.split("."),r=t.length;if(r<2){var o=1;return"-"===e[0]&&(o=-1,e=e.substr(1)),function(t,r){return(t[e]<r[e]?-1:t[e]>r[e]?1:0)*o}}if(r>=2)return function(e,o){for(var i=0;i<r;)e=e[t[i]],o=o[t[i]],i++;return e<o?-1:e>o?1:0}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);