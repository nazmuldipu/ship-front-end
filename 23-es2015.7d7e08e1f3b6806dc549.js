(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"5ya6":function(t,e,i){"use strict";i.r(e),i.d(e,"ROUTES",function(){return ft}),i.d(e,"ServiceAgentModule",function(){return pt});var n=i("tyNb"),c=i("mrSG"),o=i("dgus"),s=i("l7+V"),a=i("HymT"),r=i("zdEN"),l=i("brC8"),b=i("z3bE"),d=i("u6mN"),g=i("fXoL"),h=i("ofXK"),u=i("i1jY"),f=i("FDGS"),p=i("1kSV"),m=i("3Pt+"),y=i("HF3I"),S=i("8Hrs"),k=i("L00E"),O=i("xOgB"),v=i("aTqc"),N=i("rfY/");function x(t,e){if(1&t){const t=g.Pb();g.Ob(0,"ticket-sukantababu-print",2),g.Yb("close",function(){return g.qc(t),g.ac().onTicketClose()}),g.Nb()}if(2&t){const t=g.ac();g.hc("ticket",t.ticket)}}function w(t,e){if(1&t){const t=g.Pb();g.Ob(0,"tiket-baycruise-print",2),g.Yb("close",function(){return g.qc(t),g.ac().onTicketClose()}),g.Nb()}if(2&t){const t=g.ac();g.hc("ticket",t.ticket)}}function C(t,e){1&t&&g.Kb(0,"loading")}function L(t,e){if(1&t){const t=g.Pb();g.Ob(0,"label",46),g.Yb("click",function(){g.qc(t);const i=e.$implicit;return g.ac(5).onSelectCategory(i.id)}),g.yc(1),g.Nb()}if(2&t){const t=e.$implicit,i=g.ac(5);g.hc("ngClass",t.id==i.category.id?"btn-primary":"btn-light"),g.xb(1),g.zc(t.name)}}function A(t,e){if(1&t){const t=g.Pb();g.Ob(0,"seat-plan-other",47),g.Yb("select",function(e){return g.qc(t),g.ac(5).onSeatClick(e)}),g.Nb()}if(2&t){const t=g.ac(5);g.hc("filteredSeatList",t.filteredSeatList)("selectedSeat",t.selectedSeat)("categoryName",null==t.category?null:t.category.name)}}function D(t,e){if(1&t){const t=g.Pb();g.Ob(0,"seat-plan-bay-cruiser",47),g.Yb("select",function(e){return g.qc(t),g.ac(5).onSeatClick(e)}),g.Nb()}if(2&t){const t=g.ac(5);g.hc("filteredSeatList",t.filteredSeatList)("selectedSeat",t.selectedSeat)("categoryName",null==t.category?null:t.category.name)}}function P(t,e){if(1&t){const t=g.Pb();g.Ob(0,"seat-plan-sukanto",47),g.Yb("select",function(e){return g.qc(t),g.ac(5).onSeatClick(e)}),g.Nb()}if(2&t){const t=g.ac(5);g.hc("filteredSeatList",t.filteredSeatList)("selectedSeat",t.selectedSeat)("categoryName",null==t.category?null:t.category.name)}}function I(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div",48),g.Ob(1,"label",49),g.Yb("click",function(){return g.qc(t),g.ac(5).mode="SEAT_SOLD"}),g.yc(2,"Sell"),g.Nb(),g.Ob(3,"label",49),g.Yb("click",function(){return g.qc(t),g.ac(5).mode="SEAT_RESERVED"}),g.yc(4,"Reserve"),g.Nb(),g.Nb()}if(2&t){const t=g.ac(5);g.xb(1),g.hc("ngClass","SEAT_SOLD"==t.mode?"btn-primary":"btn-light"),g.xb(2),g.hc("ngClass","SEAT_RESERVED"==t.mode?"btn-primary":"btn-light")}}function M(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div"),g.Kb(1,"ticket-details",50),g.Ob(2,"user-form",51),g.Yb("create",function(e){return g.qc(t),g.ac(5).onCreateUser(e)}),g.Nb(),g.Nb()}if(2&t){const t=g.ac(5);g.xb(1),g.hc("seatList",t.selectedSeat)}}function E(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div",52),g.yc(1),g.Ob(2,"button",53),g.Yb("click",function(){return g.qc(t),g.ac(5).onClear()}),g.yc(3," Clear "),g.Nb(),g.Nb()}if(2&t){const t=g.ac(5);g.xb(1),g.Ac(" ",t.message," \xa0 ")}}function Y(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div",54),g.yc(1),g.Ob(2,"button",53),g.Yb("click",function(){return g.qc(t),g.ac(5).onClear()}),g.yc(3," Clear "),g.Nb(),g.Nb()}if(2&t){const t=g.ac(5);g.xb(1),g.Ac(" ",t.errorMessage," \xa0 ")}}function B(t,e){1&t&&g.Kb(0,"loading")}function _(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div"),g.Ob(1,"div",33),g.Ob(2,"div",34),g.Ob(3,"div",35),g.Ob(4,"div",36),g.wc(5,L,2,2,"label",37),g.Nb(),g.Nb(),g.wc(6,A,1,3,"seat-plan-other",38),g.wc(7,D,1,3,"seat-plan-bay-cruiser",38),g.wc(8,P,1,3,"seat-plan-sukanto",38),g.Nb(),g.Ob(9,"div",39),g.Ob(10,"div",33),g.Ob(11,"div",40),g.wc(12,I,5,2,"div",41),g.Nb(),g.Ob(13,"div",7),g.Ob(14,"button",42),g.Yb("click",function(){return g.qc(t),g.ac(4).closeDetails()}),g.Kb(15,"i",43),g.Nb(),g.Nb(),g.Nb(),g.wc(16,M,3,1,"div",32),g.wc(17,E,4,1,"div",44),g.wc(18,Y,4,1,"div",45),g.wc(19,B,1,0,"loading",32),g.Nb(),g.Nb(),g.Nb()}if(2&t){const t=g.ac(2).$implicit,e=g.ac(2);g.xb(5),g.hc("ngForOf",e.categoryList),g.xb(1),g.hc("ngIf","OTHER"==t.shipName),g.xb(1),g.hc("ngIf","BAY_CRUISE"==t.shipName),g.xb(1),g.hc("ngIf","SUKANTO_BABU"==t.shipName),g.xb(4),g.hc("ngIf",e.canReserve),g.xb(4),g.hc("ngIf",!e.dataSending&&e.selectedSeat.length),g.xb(1),g.hc("ngIf",e.message.length),g.xb(1),g.hc("ngIf",e.errorMessage.length),g.xb(1),g.hc("ngIf",e.dataSending)}}function T(t,e){if(1&t&&(g.Ob(0,"div",30),g.Ob(1,"div",31),g.wc(2,C,1,0,"loading",32),g.wc(3,_,20,9,"div",32),g.Nb(),g.Nb()),2&t){const t=g.ac(3);g.xb(2),g.hc("ngIf",t.seatLoading),g.xb(1),g.hc("ngIf",t.seatList)}}function q(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div",18),g.Ob(1,"div",19),g.yc(2),g.Kb(3,"br"),g.Ob(4,"span",20),g.yc(5),g.Nb(),g.Nb(),g.Ob(6,"div",21),g.yc(7),g.Kb(8,"br"),g.Ob(9,"span",22),g.Kb(10,"i",23),g.yc(11),g.Nb(),g.Nb(),g.Ob(12,"div",24),g.Ob(13,"div",25),g.yc(14),g.Nb(),g.Nb(),g.Ob(15,"div",26),g.Ob(16,"button",27),g.Yb("click",function(){g.qc(t);const i=e.$implicit;return g.ac(2).onDetails(i.id)}),g.Kb(17,"i",28),g.yc(18," Details "),g.Nb(),g.Nb(),g.wc(19,T,4,2,"div",29),g.Nb()}if(2&t){const t=e.$implicit,i=g.ac(2);g.xb(2),g.Ac(" Ship Name ",t.shipNumber," "),g.xb(3),g.Ac(" ",t.name," "),g.xb(2),g.Cc(" ",i.dd.day,"-",i.dd.month,"-",i.dd.year," "),g.xb(4),g.Ac(" ",t.startTime," "),g.xb(3),g.Bc("",t.startingPoint," - ",t.droppingPoint,""),g.xb(5),g.hc("ngIf",i.detailsId==t.id)}}function R(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div",3),g.Ob(1,"div",4),g.Ob(2,"div",5),g.Yb("click",function(){return g.qc(t),g.ac().adjustDay(-1)}),g.Kb(3,"i",6),g.yc(4," \xa0 "),g.Nb(),g.Ob(5,"div",7),g.Ob(6,"div",8),g.Ob(7,"div",9),g.Ob(8,"div",10),g.Ob(9,"div",11),g.yc(10," Date : "),g.Nb(),g.Nb(),g.Ob(11,"input",12,13),g.Yb("ngModelChange",function(e){return g.qc(t),g.ac().dd=e})("dateSelect",function(){return g.qc(t),g.ac().closeDetails()})("click",function(){return g.qc(t),g.pc(12).toggle()}),g.Nb(),g.Ob(13,"div",14),g.Yb("click",function(){return g.qc(t),g.pc(12).toggle()}),g.Ob(14,"div",11),g.Kb(15,"i",15),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Ob(16,"div",5),g.Yb("click",function(){return g.qc(t),g.ac().adjustDay(1)}),g.yc(17," \xa0 "),g.Kb(18,"i",16),g.Nb(),g.Nb(),g.wc(19,q,20,9,"div",17),g.Nb()}if(2&t){const t=g.ac();g.xb(11),g.hc("ngModel",t.dd)("minDate",t.minDate)("maxDate",t.maxDate),g.xb(8),g.hc("ngForOf",t.ships)}}let F=(()=>{class t{constructor(t,e,i,n,c){this.auth=t,this.shipService=e,this.seatService=i,this.bookinService=n,this.utilService=c,this.mode="SEAT_SOLD",this.seatLoading=!1,this.dataSending=!1,this.canReserve=!1,this.message="",this.errorMessage="",this.selectedSeat=[],this.categoryList=[],this.canReserve=this.auth.user.canReserve}ngOnInit(){let t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.minDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()-1},this.maxDate={year:t.getFullYear(),month:t.getMonth()+2,day:t.getDate()},this.maxDate.month>12&&(this.maxDate.year+=1,this.maxDate.month-=12),this.getServiceAgentShips()}adjustDay(t){let e=new Date(this.dd.year,this.dd.month-1,this.dd.day+t);const i={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()};let n=new Date(this.minDate.year,this.minDate.month-1,this.minDate.day),c=new Date(this.maxDate.year,this.maxDate.month-1,this.maxDate.day);e.getTime()-n.getTime()>=0&&c.getTime()-e.getTime()>=0&&(this.dd=i,this.closeDetails())}getServiceAgentShips(){return Object(c.a)(this,void 0,void 0,function*(){try{this.ships=yield this.shipService.getServiceAgentShips().toPromise(),this.ships.sort(this.utilService.dynamicSortObject("priority"))}catch(t){console.log(t)}})}onDetails(t){this.closeDetails(),this.detailsId!=t&&(this.detailsId=t,this.getShipAgentSeatList(t))}closeDetails(){this.detailsId=null,this.seatList=[],this.selectedSeat=[],this.filteredSeatList=[]}getShipAgentSeatList(t){return Object(c.a)(this,void 0,void 0,function*(){this.seatLoading=!0;try{this.seatList=yield this.seatService.getServiceAgentAvailableSeatListByShiplId(t,this.makeDateString(this.dd)).toPromise(),this.seatLoading=!1,this.categoryList=[],this.seatList.length>0&&(this.seatList.forEach(t=>{const e=t.category;this.categoryList.find(t=>t.id==e.id)||0==e.priority||"Standing"==e.name||this.categoryList.push(e)}),this.categoryList.sort(this.utilService.dynamicSortObject("priority")),this.onSelectCategory(this.categoryList[this.categoryList.length-1].id))}catch(e){console.log(e)}})}makeDateString(t){return t.year+"-"+(t.month<10?"0"+t.month:t.month)+"-"+(t.day<10?"0"+t.day:t.day)}onSelectCategory(t){this.category=this.categoryList.find(e=>e.id==t),this.selectedSeat=[],this.filterSeatList(t)}filterSeatList(t){this.filteredSeatList=[],this.seatList.forEach(e=>{e.category.id==t&&this.filteredSeatList.push(e)})}onSeatClick(t){if(this.selectedSeat.some(e=>e.id===t)){const e=this.selectedSeat.findIndex(e=>e.id==t);this.selectedSeat.splice(e,1)}else{const e=this.filteredSeatList.find(e=>e.id==t);e.available&&this.selectedSeat.length<10&&this.selectedSeat.push(e)}}onCreateUser(t){return Object(c.a)(this,void 0,void 0,function*(){let e=new r.a(t.name,t.phone),i=this.getSubbookingList(this.selectedSeat),n=new l.a(e,i);const c=this.ships.find(t=>t.id==this.detailsId);n.ship=c,n.eStatus=this.mode,this.dataSending=!0,this.message="Sending data to server";try{this.ticket=yield this.bookinService.createServiceAgentBooking(n).toPromise(),this.dataSending=!1,this.message="Booking done",this.selectedSeat=[],this.getShipAgentSeatList(this.detailsId)}catch(o){console.log(o.error),this.message="",this.errorMessage=o.error}})}getSubbookingList(t){let e=[];return t.forEach(t=>{let i=new l.c(this.makeDateString(this.dd),t);e.push(i)}),e}onTicketClose(){this.ticket=null}onClear(){this.message="",this.errorMessage=""}}return t.\u0275fac=function(e){return new(e||t)(g.Jb(d.a),g.Jb(a.a),g.Jb(s.a),g.Jb(o.a),g.Jb(b.a))},t.\u0275cmp=g.Db({type:t,selectors:[["app-sell"]],decls:3,vars:3,consts:[[3,"ticket","close",4,"ngIf"],["class","container d-print-none",4,"ngIf"],[3,"ticket","close"],[1,"container","d-print-none"],[1,"row","border","my-2","p-2"],[1,"input-group-text","btn","btn-secondary",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","readonly","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],["class","row border py-2 ship-row",4,"ngFor","ngForOf"],[1,"row","border","py-2","ship-row"],[1,"col-md-3","col-6"],[1,"ship-row-name"],[1,"col-md-2","col-6"],[1,"ship-row-startTime"],[1,"fa","fa-clock-o"],[1,"col-md-3","col-6","d-flex","align-items-center","ship-row-route"],[1,""],[1,"col-md-4","col-6","d-flex","flex-row-reverse","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-hand-o-up"],["class","col-12 px-1",4,"ngIf"],[1,"col-12","px-1"],[1,"ship-details"],[4,"ngIf"],[1,"row"],[1,"col-md-6"],[1,"row","m-0"],["role","group",1,"btn-group","border","ml-1"],["type","button","class","btn btn-sm m-0",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"filteredSeatList","selectedSeat","categoryName","select",4,"ngIf"],[1,"col-md-6","mb-3"],[1,"col"],["class","btn-group","role","group",4,"ngIf"],["type","button",1,"ml-auto","btn","btn-sm","btn-danger",2,"border-radius","0",3,"click"],[1,"fa","fa-times"],["class","alert alert-primary",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","button",1,"btn","btn-sm","m-0",3,"ngClass","click"],[3,"filteredSeatList","selectedSeat","categoryName","select"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[3,"seatList"],[3,"create"],[1,"alert","alert-primary"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(g.wc(0,x,1,1,"ticket-sukantababu-print",0),g.wc(1,w,1,1,"tiket-baycruise-print",0),g.wc(2,R,20,4,"div",1)),2&t&&(g.hc("ngIf",e.ticket&&"SUKANTO_BABU"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),g.xb(1),g.hc("ngIf",e.ticket&&"BAY_CRUISE"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),g.xb(1),g.hc("ngIf",!e.ticket))},directives:[h.n,u.a,f.a,p.e,m.b,m.k,m.n,h.m,y.a,h.l,S.a,k.a,O.a,v.a,N.a],styles:[".ship-row[_ngcontent-%COMP%]{border:1px solid #d3d3d3;box-shadow:0 .125rem .25rem rgba(0,0,0,.16)!important;margin-bottom:10px}.ship-row-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#000}.ship-row-startTime[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#000}.ship-row-route[_ngcontent-%COMP%]{color:#000}.ship-details[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #0c0266}.seat-box[_ngcontent-%COMP%]{border:1px solid #000;border-radius:4px;cursor:pointer;padding:2px;font-size:12px;text-align:center}.seat-box[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.seat-box.disabled[_ngcontent-%COMP%]{background-color:grey!important;color:#fff;cursor:not-allowed}.selected[_ngcontent-%COMP%]{background-color:#add8e6;color:#fff}"]}),t})();var K=i("uEz7");function j(t,e){if(1&t){const t=g.Pb();g.Ob(0,"a",11),g.Yb("click",function(){g.qc(t);const i=e.$implicit;return g.ac(2).onBookingDetails(i.id)}),g.Kb(1,"i",12),g.yc(2),g.Nb()}if(2&t){const t=e.$implicit;g.xb(2),g.Cc(" ",t.id," ",t.user.name," [",t.user.phoneNumber,"] ")}}function U(t,e){if(1&t&&(g.Ob(0,"ul",8),g.Ob(1,"li",9),g.Ob(2,"h5"),g.yc(3,"Sells List"),g.Nb(),g.Ob(4,"small"),g.yc(5,"Choose a sell from below list"),g.Nb(),g.Nb(),g.wc(6,j,3,3,"a",10),g.Nb()),2&t){const t=g.ac();g.xb(6),g.hc("ngForOf",null==t.bookingPage?null:t.bookingPage.content)}}function J(t,e){1&t&&g.Kb(0,"loading")}function z(t,e){if(1&t){const t=g.Pb();g.Ob(0,"pagination",13),g.Yb("getPage",function(e){return g.qc(t),g.ac().getServiceAgentBooking(e)}),g.Nb()}if(2&t){const t=g.ac();g.hc("page",t.bookingPage)("short",t.short)}}function $(t,e){if(1&t){const t=g.Pb();g.Ob(0,"ticket-sukantababu-print",14),g.Yb("close",function(){return g.qc(t),g.ac().onTicketClose()}),g.Nb()}if(2&t){const t=g.ac();g.hc("ticket",t.ticket)}}function H(t,e){if(1&t){const t=g.Pb();g.Ob(0,"tiket-baycruise-print",14),g.Yb("close",function(){return g.qc(t),g.ac().onTicketClose()}),g.Nb()}if(2&t){const t=g.ac();g.hc("ticket",t.ticket)}}let V=(()=>{class t{constructor(t,e){this.bookingService=t,this.auth=e,this.short=!0,this.loading=!1}ngOnInit(){this.getServiceAgentBooking()}getServiceAgentBooking(t=0){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.bookingPage=yield this.bookingService.getServiceAgentMySells(t).toPromise(),this.bookingPage.content.forEach(t=>{t.createdBy=this.auth.user}),this.loading=!1}catch(e){console.log(e)}})}onBookingDetails(t){this.ticket=this.bookingPage.content.find(e=>e.id==t)}onTicketClose(){this.ticket=null}}return t.\u0275fac=function(e){return new(e||t)(g.Jb(o.a),g.Jb(d.a))},t.\u0275cmp=g.Db({type:t,selectors:[["app-my-sells"]],decls:10,vars:5,consts:[[1,"container-fluid"],[1,"row","my-2"],[1,"col-md-2","d-print-none"],["class","list-group",4,"ngIf","ngIfElse"],["showLoading",""],[3,"page","short","getPage",4,"ngIf"],[1,"col","p-0"],[3,"ticket","close",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-ticket"],[3,"page","short","getPage"],[3,"ticket","close"]],template:function(t,e){if(1&t&&(g.Ob(0,"div",0),g.Ob(1,"div",1),g.Ob(2,"div",2),g.wc(3,U,7,1,"ul",3),g.wc(4,J,1,0,"ng-template",null,4,g.xc),g.wc(6,z,1,2,"pagination",5),g.Nb(),g.Ob(7,"div",6),g.wc(8,$,1,1,"ticket-sukantababu-print",7),g.wc(9,H,1,1,"tiket-baycruise-print",7),g.Nb(),g.Nb(),g.Nb()),2&t){const t=g.pc(5);g.xb(3),g.hc("ngIf",!e.loading)("ngIfElse",t),g.xb(3),g.hc("ngIf",null!=e.bookingPage),g.xb(2),g.hc("ngIf",e.ticket&&"SUKANTO_BABU"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),g.xb(1),g.hc("ngIf",e.ticket&&"BAY_CRUISE"==(null==e.ticket.ship?null:e.ticket.ship.shipName))}},directives:[h.n,h.m,y.a,K.a,u.a,f.a],styles:[""]}),t})();var G=i("5Pr4");function X(t,e){if(1&t&&(g.Ob(0,"tr"),g.Ob(1,"td"),g.yc(2),g.Nb(),g.Ob(3,"td"),g.yc(4),g.Nb(),g.Ob(5,"td"),g.yc(6),g.Nb(),g.Ob(7,"td"),g.yc(8),g.Nb(),g.Ob(9,"td",8),g.yc(10),g.bc(11,"currency"),g.Nb(),g.Nb()),2&t){const t=e.$implicit;g.xb(2),g.zc(t.date),g.xb(2),g.zc(t.explanation),g.xb(2),g.zc(t.debit),g.xb(2),g.zc(t.credit),g.xb(2),g.Ac(" ",g.ec(11,5,t.balance,"BDT ","symbol","4.2-2")," ")}}function Z(t,e){if(1&t){const t=g.Pb();g.Ob(0,"pagination",12),g.Yb("getPage",function(e){return g.qc(t),g.ac(2).getShipAdminAgentLedger(e)}),g.Nb()}if(2&t){const t=g.ac(2);g.hc("page",t.shipAgentLedger)}}function Q(t,e){if(1&t&&(g.Ob(0,"table",7),g.Ob(1,"thead"),g.Ob(2,"tr"),g.Ob(3,"th"),g.yc(4,"Date"),g.Nb(),g.Ob(5,"th"),g.yc(6,"Explanation"),g.Nb(),g.Ob(7,"th"),g.yc(8,"Debit"),g.Nb(),g.Ob(9,"th"),g.yc(10,"Credit"),g.Nb(),g.Ob(11,"th",8),g.yc(12,"Balance"),g.Nb(),g.Nb(),g.Nb(),g.Ob(13,"tbody"),g.wc(14,X,12,10,"tr",9),g.Nb(),g.Ob(15,"tfoot"),g.Ob(16,"tr"),g.Ob(17,"td",10),g.wc(18,Z,1,1,"pagination",11),g.Nb(),g.Nb(),g.Nb(),g.Nb()),2&t){const t=g.ac();g.xb(14),g.hc("ngForOf",t.shipAgentLedger.content),g.xb(4),g.hc("ngIf",null!=t.shipAgentLedger)}}let W=(()=>{class t{constructor(t){this.accountingSrvice=t}ngOnInit(){this.getShipAdminAgentLedger()}getShipAdminAgentLedger(t=0){return Object(c.a)(this,void 0,void 0,function*(){try{this.shipAgentLedger=yield this.accountingSrvice.getShipAdminAgentLedger(t).toPromise()}catch(e){console.log(e)}})}}return t.\u0275fac=function(e){return new(e||t)(g.Jb(G.a))},t.\u0275cmp=g.Db({type:t,selectors:[["app-my-ledger"]],decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],[1,"col-md-2","d-print-none"],[1,"col-md-10"],["class","table border table-responsive-sm",4,"ngIf"],[1,"table","border","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5"],[3,"page","getPage",4,"ngIf"],[3,"page","getPage"]],template:function(t,e){1&t&&(g.Ob(0,"div",0),g.Ob(1,"span",1),g.yc(2,"SHIP AGENT BALANCE"),g.Nb(),g.Nb(),g.Ob(3,"div",2),g.Ob(4,"div",3),g.Kb(5,"div",4),g.Ob(6,"div",5),g.wc(7,Q,19,2,"table",6),g.Nb(),g.Nb(),g.Nb()),2&t&&(g.xb(7),g.hc("ngIf",e.shipAgentLedger))},directives:[h.n,h.m,K.a],pipes:[h.c],styles:[""]}),t})(),tt=(()=>{class t{constructor(t){this.accountingSrvice=t}ngOnInit(){this.getServiceAdminAgentBalance()}getServiceAdminAgentBalance(){return Object(c.a)(this,void 0,void 0,function*(){try{const t=yield this.accountingSrvice.getServiceAdminAgentBalance().toPromise();this.balance=t.response}catch(t){console.log(t)}})}}return t.\u0275fac=function(e){return new(e||t)(g.Jb(G.a))},t.\u0275cmp=g.Db({type:t,selectors:[["app-my-balance"]],decls:6,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"text-center"]],template:function(t,e){1&t&&(g.Ob(0,"div",0),g.Ob(1,"span",1),g.yc(2,"SHIP AGENT BALANCE"),g.Nb(),g.Nb(),g.Ob(3,"div",2),g.Ob(4,"h3",3),g.yc(5),g.Nb(),g.Nb()),2&t&&(g.xb(5),g.Ac("My balance is : ",e.balance,"BDT"))},styles:[""]}),t})();var et=i("KZX/"),it=i("dR/p"),nt=i("dmtF");function ct(t,e){if(1&t){const t=g.Pb();g.Ob(0,"a",18),g.Yb("click",function(){g.qc(t);const i=e.$implicit;return g.ac().onSelectShip(i)}),g.Kb(1,"i",19),g.yc(2),g.Nb()}if(2&t){const t=e.$implicit;g.xb(2),g.Bc(" ",t.shipNumber,"-",t.name," ")}}function ot(t,e){if(1&t){const t=g.Pb();g.Ob(0,"label",28),g.Yb("click",function(){g.qc(t);const i=e.$implicit;return g.ac(2).onSelectCategory(i)}),g.yc(1),g.Nb()}if(2&t){const t=e.$implicit,i=g.ac(2);g.hc("ngClass",t.name==i.category.name?"btn-primary":"btn-light"),g.xb(1),g.zc(t.name)}}function st(t,e){if(1&t){const t=g.Pb();g.Ob(0,"seat-status-bay-cruiser",29),g.Yb("select",function(e){return g.qc(t),g.ac(2).onSeatClick(e)}),g.Nb()}if(2&t){const t=g.ac(2);g.hc("filteredSeatList",t.filteredSeatList)("categoryName",t.category.name)}}function at(t,e){if(1&t){const t=g.Pb();g.Ob(0,"seat-status-sukanto",29),g.Yb("select",function(e){return g.qc(t),g.ac(2).onSeatClick(e)}),g.Nb()}if(2&t){const t=g.ac(2);g.hc("filteredSeatList",t.filteredSeatList)("categoryName",t.category.name)}}function rt(t,e){1&t&&(g.Ob(0,"div",30),g.Ob(1,"div",31),g.Kb(2,"div",32),g.yc(3," Blocked "),g.Nb(),g.Ob(4,"div",31),g.Kb(5,"div",33),g.yc(6," Reserved "),g.Nb(),g.Ob(7,"div",31),g.Kb(8,"div",34),g.yc(9," Sold "),g.Nb(),g.Ob(10,"div",31),g.Kb(11,"div",35),g.yc(12," Free "),g.Nb(),g.Nb())}function lt(t,e){if(1&t&&(g.Ob(0,"div",20),g.Ob(1,"h4"),g.yc(2),g.Nb(),g.Ob(3,"div",21),g.Ob(4,"div",22),g.wc(5,ot,2,2,"label",23),g.Nb(),g.Nb(),g.Ob(6,"div",3),g.Ob(7,"div",24),g.wc(8,st,1,2,"seat-status-bay-cruiser",25),g.wc(9,at,1,2,"seat-status-sukanto",25),g.Nb(),g.Ob(10,"div",26),g.wc(11,rt,13,0,"div",27),g.Nb(),g.Nb(),g.Nb()),2&t){const t=g.ac();g.xb(2),g.Bc("",null==t.ship?null:t.ship.shipNumber,"-",null==t.ship?null:t.ship.name," Seat status"),g.xb(3),g.hc("ngForOf",t.categoryList),g.xb(3),g.hc("ngIf","BAY_CRUISE"==t.ship.shipName),g.xb(1),g.hc("ngIf","SUKANTO_BABU"==t.ship.shipName),g.xb(2),g.hc("ngIf",null==t.filteredSeatList?null:t.filteredSeatList.length)}}function bt(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div",42),g.Ob(1,"strong"),g.yc(2,"Error!"),g.Nb(),g.yc(3),g.Ob(4,"button",43),g.Yb("click",function(){return g.qc(t),g.ac(2).onClear()}),g.Ob(5,"span",44),g.yc(6,"\xd7"),g.Nb(),g.Nb(),g.Nb()}if(2&t){const t=g.ac(2);g.xb(3),g.Ac(" ",t.errorMessage," ")}}function dt(t,e){if(1&t){const t=g.Pb();g.Ob(0,"ticket-sukantababu-print",45),g.Yb("close",function(){return g.qc(t),g.ac(2).onClear()}),g.Nb()}if(2&t){const t=g.ac(2);g.hc("ticket",t.ticket)("short",t.shortTicket)}}function gt(t,e){if(1&t){const t=g.Pb();g.Ob(0,"tiket-baycruise-print",45),g.Yb("close",function(){return g.qc(t),g.ac(2).onClear()}),g.Nb()}if(2&t){const t=g.ac(2);g.hc("ticket",t.ticket)("short",t.shortTicket)}}function ht(t,e){if(1&t){const t=g.Pb();g.Ob(0,"button",46),g.Yb("click",function(){g.qc(t);const e=g.ac(2);return e.onConfirmReservation(e.ticket.id)}),g.yc(1," Confirm Reservation "),g.Nb()}}function ut(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div",36),g.wc(1,bt,7,1,"div",37),g.wc(2,dt,1,2,"ticket-sukantababu-print",38),g.wc(3,gt,1,2,"tiket-baycruise-print",38),g.Ob(4,"div",39),g.Ob(5,"button",40),g.Yb("click",function(){g.qc(t);const e=g.ac();return e.onCancelBooking(e.ticket.id,e.ticket.eStatus)}),g.yc(6),g.Nb(),g.wc(7,ht,2,0,"button",41),g.Nb(),g.Nb()}if(2&t){const t=g.ac();g.xb(1),g.hc("ngIf",t.errorMessage.length>0),g.xb(1),g.hc("ngIf",t.ticket&&"SUKANTO_BABU"==(null==t.ticket.ship?null:t.ticket.ship.shipName)),g.xb(1),g.hc("ngIf",t.ticket&&"BAY_CRUISE"==(null==t.ticket.ship?null:t.ticket.ship.shipName)),g.xb(3),g.Ac(" Cancel ","SEAT_RESERVED"==t.ticket.eStatus?"Reservation":"Booking"," "),g.xb(1),g.hc("ngIf","SEAT_RESERVED"==t.ticket.eStatus)}}const ft=[{path:"sell",component:F},{path:"status",component:(()=>{class t{constructor(t,e,i,n){this.seatsService=t,this.bookingService=e,this.shipService=i,this.utilService=n,this.categoryList=[],this.seatList=[],this.filteredSeatList=[],this.shortTicket=!0,this.errorMessage="",this.loading=!1}ngOnInit(){this.setDateRanges(),this.getServiceAgentShips()}setDateRanges(){let t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.minDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()-1},this.maxDate={year:t.getFullYear(),month:t.getMonth()+3,day:t.getDate()}}onDateChange(){this.ship&&this.getShipSeatStatus(this.ship.id,this.dd)}onSelectShip(t){console.log(t),this.ship=t,this.getShipSeatStatus(t.id,this.dd)}getServiceAgentShips(){return Object(c.a)(this,void 0,void 0,function*(){try{this.errorMessage="",this.loading=!0,this.ships=yield this.shipService.getServiceAgentShips().toPromise(),this.ships.sort(this.utilService.dynamicSortObject("priority")),this.loading=!1}catch(t){console.log(t),this.errorMessage=t.error}})}getShipSeatStatus(t,e){return Object(c.a)(this,void 0,void 0,function*(){try{this.errorMessage="",this.seatList=yield this.seatsService.getServiceAgentSeatStatusListByShiplId(t,this.utilService.getDateStringFromDateObj(e)).toPromise(),this.categoryList=[],this.seatList.forEach(t=>{const e=t.category;this.categoryList.find(t=>t.name==e.name)||this.categoryList.push(e)}),this.categoryList.sort(this.utilService.dynamicSortObject("priority")),this.onSelectCategory(this.categoryList[0])}catch(i){console.log(i),this.errorMessage=i.error}})}onSelectCategory(t){this.category=this.categoryList.find(e=>e.name==t.name),this.filterSeatList(t)}filterSeatList(t){this.filteredSeatList=[],this.seatList.forEach(e=>{e.category.name==t.name&&this.filteredSeatList.push(e)})}onSeatClick(t){const e=this.filteredSeatList.find(e=>e.id==t);e.bookingId?null!=this.ticket&&this.ticket.id==e.bookingId||this.getServiceAgentBooking(e.bookingId):this.ticket=null}getServiceAgentBooking(t){return Object(c.a)(this,void 0,void 0,function*(){this.errorMessage="";try{this.ticket=yield this.bookingService.getServiceAgentBooking(t).toPromise()}catch(e){console.log(e),this.errorMessage=e.error}})}onTicketClose(t){this.ticket=null}onClear(){this.errorMessage="",this.ticket=null}onCancelBooking(t,e){return Object(c.a)(this,void 0,void 0,function*(){if(confirm("Are you sure to cancel booking with id : "+t))if(this.errorMessage="",e==l.b.SEAT_SOLD)try{yield this.bookingService.cancelServiceAgentBooking(t).toPromise(),this.getShipSeatStatus(this.ship.id,this.dd),this.ticket=null}catch(i){console.log(i),this.errorMessage=i.error}else if(e==l.b.SEAT_RESERVED)try{yield this.bookingService.cancelServiceAgentReservation(t).toPromise(),this.ticket=null,this.getShipSeatStatus(this.ship.id,this.dd)}catch(i){console.log(i),this.errorMessage=i.error}})}onConfirmReservation(t){return Object(c.a)(this,void 0,void 0,function*(){if(confirm("Are you sure to confirm your reservation with id : "+t)){this.errorMessage="";try{yield this.bookingService.confirmServiceAgentReservation(t).toPromise(),this.ticket=null,this.getShipSeatStatus(this.ship.id,this.dd)}catch(e){console.log(e.error),this.errorMessage=e.error}}})}}return t.\u0275fac=function(e){return new(e||t)(g.Jb(s.a),g.Jb(o.a),g.Jb(a.a),g.Jb(b.a))},t.\u0275cmp=g.Db({type:t,selectors:[["app-status"]],decls:25,vars:6,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-print-none"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],["class","col-md-5 d-print-none",4,"ngIf"],["class","col-md-5",4,"ngIf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-ship"],[1,"col-md-5","d-print-none"],[1,"row","m-0"],["role","group",1,"btn-group","border","ml-1"],["type","button","class","btn btn-sm m-0",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-12","p-0"],[3,"filteredSeatList","categoryName","select",4,"ngIf"],[1,"col-12"],["class","row border py-3 mt-3",4,"ngIf"],["type","button",1,"btn","btn-sm","m-0",3,"ngClass","click"],[3,"filteredSeatList","categoryName","select"],[1,"row","border","py-3","mt-3"],[1,"col-3"],[1,"foo","blocked"],[1,"foo","reserved"],[1,"foo","sold"],[1,"foo"],[1,"col-md-5"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[3,"ticket","short","close",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","d-print-none"],[1,"btn","btn-danger","btn-sm","mx-1",3,"click"],["class","btn btn-sm btn-primary mx-1",3,"click",4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ticket","short","close"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"]],template:function(t,e){if(1&t){const t=g.Pb();g.Ob(0,"div",0),g.Ob(1,"span",1),g.yc(2,"Seat status"),g.Nb(),g.Nb(),g.Ob(3,"div",2),g.Ob(4,"div",3),g.Ob(5,"div",4),g.Ob(6,"div",5),g.Ob(7,"div",6),g.Ob(8,"div",7),g.Ob(9,"div",8),g.yc(10," Date : "),g.Nb(),g.Nb(),g.Ob(11,"input",9,10),g.Yb("ngModelChange",function(t){return e.dd=t})("dateSelect",function(){return e.onDateChange()})("click",function(){return g.qc(t),g.pc(12).toggle()}),g.Nb(),g.Ob(13,"div",11),g.Yb("click",function(){return g.qc(t),g.pc(12).toggle()}),g.Ob(14,"div",8),g.Kb(15,"i",12),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Ob(16,"ul",13),g.Ob(17,"li",14),g.Ob(18,"h5"),g.yc(19,"Ship List"),g.Nb(),g.Ob(20,"small"),g.yc(21,"Choose a ship from below list"),g.Nb(),g.Nb(),g.wc(22,ct,3,2,"a",15),g.Nb(),g.Nb(),g.wc(23,lt,12,6,"div",16),g.wc(24,ut,8,5,"div",17),g.Nb(),g.Nb()}2&t&&(g.xb(11),g.hc("ngModel",e.dd)("minDate",e.minDate)("maxDate",e.maxDate),g.xb(11),g.hc("ngForOf",e.ships),g.xb(1),g.hc("ngIf",e.filteredSeatList.length),g.xb(1),g.hc("ngIf",e.ticket))},directives:[p.e,m.b,m.k,m.n,h.m,h.n,h.l,it.a,nt.a,u.a,f.a],styles:[".list-group-item[_ngcontent-%COMP%], .seat-box[_ngcontent-%COMP%]{cursor:pointer}.seat-box[_ngcontent-%COMP%]{border:1px solid #000;border-radius:4px;padding:2px;font-size:12px;text-align:center}.seat-box[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.seat-box.sold[_ngcontent-%COMP%]{border:1px solid red;background-color:red;color:#fff}.seat-box.reserved[_ngcontent-%COMP%]{border:1px solid #ffc107;background-color:#ffc107}.seat-box.blocked[_ngcontent-%COMP%]{border:1px solid #d3d3d3;background-color:#d3d3d3;color:#fff}.ticket[_ngcontent-%COMP%]{font-family:Bitter,serif;font-size:12px;padding:15px 0}.ticket-head[_ngcontent-%COMP%]{background-color:grey;color:#fff;padding:5px}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}.foo.sold[_ngcontent-%COMP%]{border:1px solid red;background-color:red}.foo.reserved[_ngcontent-%COMP%]{border:1px solid #ffc107;background-color:#ffc107}.foo.blocked[_ngcontent-%COMP%]{border:1px solid #d3d3d3;background-color:#d3d3d3}"]}),t})()},{path:"my-sells",component:V},{path:"my-ledger",component:W},{path:"my-balance",component:tt}];let pt=(()=>{class t{}return t.\u0275mod=g.Hb({type:t}),t.\u0275inj=g.Gb({factory:function(e){return new(e||t)},imports:[[et.a,n.e.forChild(ft)]]}),t})()}}]);