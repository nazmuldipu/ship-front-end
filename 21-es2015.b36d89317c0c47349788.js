(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{qGDO:function(e,n,t){"use strict";t.r(n),t.d(n,"ROUTES",function(){return g}),t.d(n,"SUsersModule",function(){return p});var r=t("tyNb"),o=t("MKLO"),i=t("mrSG"),s=t("/7iW"),c=t("fXoL"),a=t("FCUJ"),m=(t("zdEN"),t("3Pt+")),b=t("ofXK");function l(e,n){1&e&&(c.Ob(0,"small",24),c.yc(1," Name required "),c.Nb())}function u(e,n){if(1&e&&(c.Ob(0,"small",24),c.Ob(1,"div",25),c.yc(2," Phone number required "),c.Nb(),c.Ob(3,"div",25),c.yc(4," Phone number format 01934953023 "),c.Nb(),c.Nb()),2&e){const e=c.ac();c.xb(1),c.hc("hidden",!e.form.controls.phoneNumber.errors.required),c.xb(2),c.hc("hidden",!e.form.controls.phoneNumber.errors.pattern)}}function d(e,n){1&e&&(c.Ob(0,"small",24),c.yc(1," Commission required "),c.Nb())}function h(e,n){if(1&e){const e=c.Pb();c.Ob(0,"button",26),c.Yb("click",function(){c.qc(e);const n=c.ac();return n.onRemoveAgent(n.user.id)}),c.yc(1," Remove this agent "),c.Nb()}}const f=function(e,n,t){return{disabled:e,"btn-warning":n,"btn-success":t}};let v=(()=>{class e{constructor(e){this.builder=e,this.create=new c.n,this.removeAgent=new c.n,this.exists=!1,this.createForm()}ngOnChanges(e){if(e.user&&this.user&&this.user.id){const e={name:this.user.name,phoneNumber:this.user.phoneNumber,email:this.user.email,commission:this.user.commission,canReserve:null!=this.user.canReserve&&this.user.canReserve,canCancelReservation:null!=this.user.canCancelReservation&&this.user.canCancelReservation,canCancelBooking:null!=this.user.canCancelBooking&&this.user.canCancelBooking};this.onClear(),this.exists=!0,this.form.patchValue(Object.assign({},e))}}createForm(){this.form=this.builder.group({name:["",m.t.required],phoneNumber:["",[m.t.required,m.t.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:"",commission:["",m.t.required],canReserve:[!1,m.t.required],canCancelReservation:[!1,m.t.required],canCancelBooking:[!1,m.t.required]})}submit(){if(this.form.valid){if(this.exists){const e=Object.assign(Object.assign({},this.user),this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.onClear()}}onRemoveAgent(e){this.removeAgent.emit(e),this.onClear()}onClear(){this.form.reset(),this.form.patchValue({name:"",phoneNumber:"",email:"",commission:"",canReserve:!1,canCancelReservation:!1,canCancelBooking:!1}),this.exists=!1}}return e.\u0275fac=function(n){return new(n||e)(c.Jb(m.c))},e.\u0275cmp=c.Db({type:e,selectors:[["agent-form"]],inputs:{user:"user"},outputs:{create:"create",removeAgent:"removeAgent"},features:[c.vb],decls:43,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["for","commission"],["type","number","id","commission","placeholder","Commission","formControlName","commission",1,"form-control"],[1,"form-group","col-md-4"],[1,"form-check"],["type","checkbox","id","canReserve","formControlName","canReserve",1,"form-check-input"],["for","canReserve",1,"form-check-label"],["type","checkbox","id","canCancelReservation","formControlName","canCancelReservation",1,"form-check-input"],["for","canCancelReservation",1,"form-check-label"],["type","checkbox","id","canCancelBooking","formControlName","canCancelBooking",1,"form-check-input"],["for","canCancelBooking",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","mx-1",3,"ngClass"],["type","button","class","btn btn-sm btn-success mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-success","mx-1",3,"click"]],template:function(e,n){1&e&&(c.Ob(0,"form",0),c.Yb("ngSubmit",function(){return n.submit()}),c.Ob(1,"div",1),c.Ob(2,"div",2),c.Ob(3,"label",3),c.yc(4,"Name *"),c.Nb(),c.Kb(5,"input",4),c.wc(6,l,2,0,"small",5),c.Nb(),c.Ob(7,"div",2),c.Ob(8,"label",6),c.yc(9,"Phone *"),c.Nb(),c.Kb(10,"input",7),c.wc(11,u,5,2,"small",5),c.Nb(),c.Ob(12,"div",2),c.Ob(13,"label",8),c.yc(14,"Email"),c.Nb(),c.Kb(15,"input",9),c.Nb(),c.Ob(16,"div",2),c.Ob(17,"label",10),c.yc(18,"Commission *"),c.Nb(),c.Kb(19,"input",11),c.wc(20,d,2,0,"small",5),c.Nb(),c.Nb(),c.Ob(21,"div",1),c.Ob(22,"div",12),c.Ob(23,"div",13),c.Kb(24,"input",14),c.Ob(25,"label",15),c.yc(26," Reserve "),c.Nb(),c.Nb(),c.Nb(),c.Ob(27,"div",12),c.Ob(28,"div",13),c.Kb(29,"input",16),c.Ob(30,"label",17),c.yc(31," Cancel Reservation "),c.Nb(),c.Nb(),c.Nb(),c.Ob(32,"div",12),c.Ob(33,"div",13),c.Kb(34,"input",18),c.Ob(35,"label",19),c.yc(36," Cancel Booking "),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(37,"div",20),c.Ob(38,"button",21),c.yc(39),c.Nb(),c.wc(40,h,2,0,"button",22),c.Ob(41,"button",23),c.Yb("click",function(){return n.onClear()}),c.yc(42," Clear "),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.hc("formGroup",n.form),c.xb(6),c.hc("ngIf",n.form.controls.name.errors&&n.form.controls.name.touched),c.xb(5),c.hc("ngIf",n.form.controls.phoneNumber.errors&&n.form.controls.phoneNumber.touched),c.xb(9),c.hc("ngIf",n.form.controls.commission.errors&&n.form.controls.commission.touched),c.xb(18),c.hc("ngClass",c.nc(7,f,n.form.invalid,n.exists,!n.exists)),c.xb(1),c.Ac(" ",n.exists?"Update":"Create"," User "),c.xb(1),c.hc("ngIf",n.exists))},directives:[m.v,m.l,m.e,m.b,m.k,m.d,b.n,m.h,m.p,m.a,b.l],styles:[""]}),e})();const g=[{path:"agent",component:(()=>{class e{constructor(e){this.userService=e}ngOnInit(){this.getServiceAdminAgents()}getServiceAdminAgents(e=0){return Object(i.a)(this,void 0,void 0,function*(){try{this.userPage=yield this.userService.getServiceAdminAgents(e).toPromise()}catch(n){console.log(n)}})}onCreate(e){return Object(i.a)(this,void 0,void 0,function*(){try{yield this.userService.createSerivceAdminAgent(e).toPromise(),this.getServiceAdminAgents()}catch(n){console.log(n)}})}onSelect(e){const n=this.userPage.content.find(n=>n.id===e);this.user=n}onRemoveAgent(e){return Object(i.a)(this,void 0,void 0,function*(){if(console.log("On leave ",e),confirm("Are you sure to remove agent with id = "+e))try{yield this.userService.removeServiceAdminAgent(e).toPromise(),this.getServiceAdminAgents()}catch(n){console.log(n)}})}}return e.\u0275fac=function(n){return new(n||e)(c.Jb(s.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-add-agent"]],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[3,"userPage","userId","page"],[1,"p-3","shadow-sm"],[1,"text-center"],[3,"user","create","removeAgent"]],template:function(e,n){1&e&&(c.Ob(0,"div",0),c.Ob(1,"span",1),c.yc(2,"Agents"),c.Nb(),c.Nb(),c.Ob(3,"div",0),c.Ob(4,"div",2),c.Ob(5,"div",3),c.Ob(6,"service-admin-agent-list",4),c.Yb("userId",function(e){return n.onSelect(e)})("page",function(e){return n.getServiceAdminAgents(e)}),c.Nb(),c.Nb(),c.Ob(7,"div",3),c.Ob(8,"div",5),c.Ob(9,"h3",6),c.yc(10,"Add Agent"),c.Nb(),c.Ob(11,"agent-form",7),c.Yb("create",function(e){return n.onCreate(e)})("removeAgent",function(e){return n.onRemoveAgent(e)}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.xb(6),c.hc("userPage",n.userPage),c.xb(5),c.hc("user",n.user))},directives:[a.a,v],styles:[""]}),e})()}];let p=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(n){return new(n||e)},imports:[[o.a,r.e.forChild(g)]]}),e})()}}]);