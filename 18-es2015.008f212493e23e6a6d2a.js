(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{ctvA:function(t,e,i){"use strict";i.r(e),i.d(e,"ROUTES",function(){return kt}),i.d(e,"SellModule",function(){return yt});var n=i("mrSG"),c=i("HymT"),o=i("l7+V"),s=i("brC8"),a=i("zdEN"),r=i("dgus"),l=i("z3bE"),b=i("fXoL"),d=i("ofXK"),g=i("i1jY"),h=i("FDGS"),u=i("1kSV"),f=i("3Pt+"),p=i("8Hrs"),m=i("L00E"),k=i("xOgB"),y=i("aTqc"),O=i("rfY/");function S(t,e){if(1&t){const t=b.Pb();b.Ob(0,"ticket-sukantababu-print",2),b.Yb("close",function(){return b.qc(t),b.ac().onTicketClose()}),b.Nb()}if(2&t){const t=b.ac();b.hc("ticket",t.ticket)}}function v(t,e){if(1&t){const t=b.Pb();b.Ob(0,"tiket-baycruise-print",2),b.Yb("close",function(){return b.qc(t),b.ac().onTicketClose()}),b.Nb()}if(2&t){const t=b.ac();b.hc("ticket",t.ticket)}}function N(t,e){1&t&&b.Kb(0,"app-loading")}function x(t,e){if(1&t){const t=b.Pb();b.Ob(0,"span"),b.Ob(1,"button",49),b.Yb("click",function(){b.qc(t);const i=e.$implicit;return b.ac(5).onSelectCategory(i.id)}),b.yc(2),b.Nb(),b.Nb()}if(2&t){const t=e.$implicit,i=b.ac(5);b.xb(1),b.hc("ngClass",t.id==i.category.id?"btn-primary":"btn-secondary"),b.xb(1),b.Ac(" ",t.name," ")}}function C(t,e){if(1&t){const t=b.Pb();b.Ob(0,"seat-plan-other",50),b.Yb("select",function(e){return b.qc(t),b.ac(5).onSeatClick(e)}),b.Nb()}if(2&t){const t=b.ac(5);b.hc("filteredSeatList",t.filteredSeatList)("selectedSeat",t.selectedSeat)("categoryName",null==t.category?null:t.category.name)}}function w(t,e){if(1&t){const t=b.Pb();b.Ob(0,"seat-plan-bay-cruiser",50),b.Yb("select",function(e){return b.qc(t),b.ac(5).onSeatClick(e)}),b.Nb()}if(2&t){const t=b.ac(5);b.hc("filteredSeatList",t.filteredSeatList)("selectedSeat",t.selectedSeat)("categoryName",null==t.category?null:t.category.name)}}function P(t,e){if(1&t){const t=b.Pb();b.Ob(0,"seat-plan-sukanto",50),b.Yb("select",function(e){return b.qc(t),b.ac(5).onSeatClick(e)}),b.Nb()}if(2&t){const t=b.ac(5);b.hc("filteredSeatList",t.filteredSeatList)("selectedSeat",t.selectedSeat)("categoryName",null==t.category?null:t.category.name)}}function I(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div"),b.Kb(1,"ticket-details",51),b.Ob(2,"div",52),b.Kb(3,"div",53),b.Ob(4,"label",54),b.yc(5,"Discount"),b.Nb(),b.Ob(6,"div",7),b.Ob(7,"input",55),b.Yb("ngModelChange",function(e){return b.qc(t),b.ac(5).discount=e})("ngModelChange",function(e){return b.qc(t),b.ac(5).onDiscountChange(e)}),b.Nb(),b.Nb(),b.Nb(),b.Ob(8,"div",52),b.Kb(9,"div",53),b.Ob(10,"label",56),b.yc(11,"Payable"),b.Nb(),b.Ob(12,"div",7),b.Ob(13,"label",57),b.yc(14),b.Nb(),b.Nb(),b.Nb(),b.Ob(15,"user-form",58),b.Yb("create",function(e){return b.qc(t),b.ac(5).onCreateUser(e)}),b.Nb(),b.Nb()}if(2&t){const t=b.ac(5);b.xb(1),b.hc("seatList",t.selectedSeat),b.xb(6),b.hc("ngModel",t.discount),b.xb(7),b.zc(t.payable)}}function D(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",59),b.yc(1),b.Ob(2,"button",60),b.Yb("click",function(){return b.qc(t),b.ac(5).onClear()}),b.yc(3," Clear "),b.Nb(),b.Nb()}if(2&t){const t=b.ac(5);b.xb(1),b.Ac(" ",t.message," \xa0 ")}}function L(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",61),b.yc(1),b.Ob(2,"button",60),b.Yb("click",function(){return b.qc(t),b.ac(5).onClear()}),b.yc(3," Clear "),b.Nb(),b.Nb()}if(2&t){const t=b.ac(5);b.xb(1),b.Ac(" ",t.errorMessage," \xa0 ")}}function A(t,e){1&t&&b.Kb(0,"app-loading")}const M=function(t,e){return{"btn-primary active":t,"btn-light":e}};function B(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div"),b.Ob(1,"div",33),b.Ob(2,"button",34),b.Yb("click",function(){return b.qc(t),b.ac(4).closeDetails()}),b.Kb(3,"i",35),b.Nb(),b.Nb(),b.Ob(4,"div",36),b.Ob(5,"div",37),b.Ob(6,"div",38),b.wc(7,x,3,2,"span",39),b.Nb(),b.wc(8,C,1,3,"seat-plan-other",40),b.wc(9,w,1,3,"seat-plan-bay-cruiser",40),b.wc(10,P,1,3,"seat-plan-sukanto",40),b.Nb(),b.Ob(11,"div",41),b.Ob(12,"div",42),b.Ob(13,"label",43),b.Ob(14,"input",44),b.Yb("ngModelChange",function(e){return b.qc(t),b.ac(4).mode=e}),b.Nb(),b.yc(15," Sell "),b.Nb(),b.Ob(16,"label",45),b.Ob(17,"input",46),b.Yb("ngModelChange",function(e){return b.qc(t),b.ac(4).mode=e}),b.Nb(),b.yc(18," Reserve "),b.Nb(),b.Nb(),b.wc(19,I,16,3,"div",32),b.wc(20,D,4,1,"div",47),b.wc(21,L,4,1,"div",48),b.wc(22,A,1,0,"app-loading",32),b.Nb(),b.Nb(),b.Nb()}if(2&t){const t=b.ac(2).$implicit,e=b.ac(2);b.xb(7),b.hc("ngForOf",e.categoryList),b.xb(1),b.hc("ngIf","OTHER"==t.shipName),b.xb(1),b.hc("ngIf","BAY_CRUISE"==t.shipName),b.xb(1),b.hc("ngIf","SUKANTO_BABU"==t.shipName),b.xb(3),b.hc("ngClass",b.mc(12,M,"SEAT_SOLD"==e.mode,"SEAT_SOLD"!=e.mode)),b.xb(1),b.hc("ngModel",e.mode),b.xb(2),b.hc("ngClass",b.mc(15,M,"SEAT_RESERVED"==e.mode,"SEAT_RESERVED"!=e.mode)),b.xb(1),b.hc("ngModel",e.mode),b.xb(2),b.hc("ngIf",!e.dataSending&&e.selectedSeat.length),b.xb(1),b.hc("ngIf",e.message.length),b.xb(1),b.hc("ngIf",e.errorMessage.length),b.xb(1),b.hc("ngIf",e.dataSending)}}function Y(t,e){if(1&t&&(b.Ob(0,"div",30),b.Ob(1,"div",31),b.wc(2,N,1,0,"app-loading",32),b.wc(3,B,23,18,"div",32),b.Nb(),b.Nb()),2&t){const t=b.ac(3);b.xb(2),b.hc("ngIf",t.seatLoading),b.xb(1),b.hc("ngIf",t.seatList)}}function E(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",18),b.Ob(1,"div",19),b.Ob(2,"span",20),b.yc(3),b.Nb(),b.Kb(4,"br"),b.yc(5),b.Nb(),b.Ob(6,"div",21),b.yc(7),b.Kb(8,"br"),b.Ob(9,"span",22),b.Kb(10,"i",23),b.yc(11),b.Nb(),b.Nb(),b.Ob(12,"div",24),b.Ob(13,"div",25),b.yc(14),b.Nb(),b.Nb(),b.Ob(15,"div",26),b.Ob(16,"button",27),b.Yb("click",function(){b.qc(t);const i=e.$implicit;return b.ac(2).onDetails(i.id)}),b.Kb(17,"i",28),b.yc(18," Details "),b.Nb(),b.Nb(),b.wc(19,Y,4,2,"div",29),b.Nb()}if(2&t){const t=e.$implicit,i=b.ac(2);b.xb(3),b.Ac(" ",t.name," "),b.xb(2),b.Ac(" ",t.shipNumber," "),b.xb(2),b.Cc(" ",i.dd.day,"-",i.dd.month,"-",i.dd.year," "),b.xb(4),b.Ac(" ",t.startTime," "),b.xb(3),b.Bc("",t.startingPoint," - ",t.droppingPoint,""),b.xb(5),b.hc("ngIf",i.detailsId==t.id)}}function T(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",3),b.Ob(1,"div",4),b.Ob(2,"div",5),b.Yb("click",function(){return b.qc(t),b.ac().adjustDay(-1)}),b.Kb(3,"i",6),b.yc(4," \xa0 Previous "),b.Nb(),b.Ob(5,"div",7),b.Ob(6,"div",8),b.Ob(7,"div",9),b.Ob(8,"div",10),b.Ob(9,"div",11),b.yc(10," Date : "),b.Nb(),b.Nb(),b.Ob(11,"input",12,13),b.Yb("ngModelChange",function(e){return b.qc(t),b.ac().dd=e})("dateSelect",function(){return b.qc(t),b.ac().onDateChange()})("click",function(){return b.qc(t),b.pc(12).toggle()}),b.Nb(),b.Ob(13,"div",14),b.Yb("click",function(){return b.qc(t),b.pc(12).toggle()}),b.Ob(14,"div",11),b.Kb(15,"i",15),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(16,"div",5),b.Yb("click",function(){return b.qc(t),b.ac().adjustDay(1)}),b.yc(17," Next \xa0 "),b.Kb(18,"i",16),b.Nb(),b.Nb(),b.wc(19,E,20,9,"div",17),b.Nb()}if(2&t){const t=b.ac();b.xb(11),b.hc("ngModel",t.dd)("minDate",t.minDate)("maxDate",t.maxDate),b.xb(8),b.hc("ngForOf",null==t.shipPage?null:t.shipPage.content)}}let _=(()=>{class t{constructor(t,e,i,n){this.shipService=t,this.seatService=e,this.bookinService=i,this.utilService=n,this.selectedSeat=[],this.categoryList=[],this.seatLoading=!1,this.dataSending=!1,this.message="",this.errorMessage="",this.discount=0,this.mode="SEAT_SOLD"}ngOnInit(){let t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.minDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()-1},this.maxDate={year:t.getFullYear(),month:t.getMonth()+3,day:t.getDate()},this.maxDate.month>12&&(this.maxDate.year+=1,this.maxDate.month-=12),this.getAdminShipPage()}getAdminShipPage(t=0){return Object(n.a)(this,void 0,void 0,function*(){try{this.shipPage=yield this.shipService.getAdminShipPage(t).toPromise(),this.shipPage.content.sort(this.utilService.dynamicSortObject("priority"))}catch(e){console.log(e)}})}getAdminSeatList(t){return Object(n.a)(this,void 0,void 0,function*(){this.seatLoading=!0;try{this.seatList=yield this.seatService.getAdminAvailableSeatListByShiplId(t,this.makeDateString(this.dd)).toPromise(),this.seatLoading=!1,this.categoryList=[],this.seatList&&this.seatList.length>0&&(this.seatList.forEach(t=>{const e=t.category;this.categoryList.find(t=>t.id==e.id)||0==e.priority||this.categoryList.push(e)}),this.categoryList.sort(this.utilService.dynamicSortObject("priority")),this.onSelectCategory(this.categoryList[this.categoryList.length-1].id))}catch(e){console.log(e)}})}adjustDay(t){let e=new Date(this.dd.year,this.dd.month-1,this.dd.day+t);const i={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()};let n=new Date(this.minDate.year,this.minDate.month-1,this.minDate.day),c=new Date(this.maxDate.year,this.maxDate.month-1,this.maxDate.day);e.getTime()-n.getTime()>=0&&c.getTime()-e.getTime()>=0&&(this.dd=i,this.onDateChange())}onDateChange(){this.detailsId=null,this.seatList=[],this.selectedSeat=[],this.filteredSeatList=[]}onDetails(t){this.detailsId!=t?(this.detailsId=t,this.getAdminSeatList(t)):this.closeDetails()}closeDetails(){this.detailsId=null,this.seatList=[],this.selectedSeat=[],this.filteredSeatList=[]}onSelectCategory(t){this.category=this.categoryList.find(e=>e.id==t),this.selectedSeat=[],this.filterSeatList(t)}filterSeatList(t){this.filteredSeatList=[],this.seatList.forEach(e=>{e.category.id==t&&this.filteredSeatList.push(e)})}onSeatClick(t){if(this.selectedSeat.some(e=>e.id===t)){const e=this.selectedSeat.findIndex(e=>e.id==t);this.selectedSeat.splice(e,1)}else{const e=this.filteredSeatList.find(e=>e.id==t);e.available&&this.selectedSeat.length<10&&this.selectedSeat.push(e)}this.onDiscountChange(this.discount)}onCreateUser(t){return Object(n.a)(this,void 0,void 0,function*(){let e=new a.a(t.name,t.phone),i=this.getSubbookingList(this.selectedSeat),n=new s.a(e,i);this.discount>0&&(n.bookingDiscount=this.discount);const c=this.shipPage.content.find(t=>t.id==this.detailsId);n.ship=c,n.eStatus=this.mode,this.dataSending=!0,this.message="Sending data to server";try{this.ticket=yield this.bookinService.createAdminBooking(n).toPromise(),this.dataSending=!1,this.message="Booking done",this.selectedSeat=[],this.getAdminSeatList(this.detailsId)}catch(o){console.log(o.error),this.message="",this.errorMessage=o.error}})}getSubbookingList(t){let e=[];return t.forEach(t=>{let i=new s.c(this.makeDateString(this.dd),t);e.push(i)}),e}selectedSeatContainSeatId(t){return this.selectedSeat.some(e=>e.id==t)}makeDateString(t){return t.year+"-"+(t.month<10?"0"+t.month:t.month)+"-"+(t.day<10?"0"+t.day:t.day)}getTotal(){let t=0;return this.selectedSeat.forEach(e=>{t+=e.category.fare-e.category.discount}),t}onClear(){this.message="",this.errorMessage=""}onTicketClose(){this.ticket=null}onDiscountChange(t){let e=0;this.selectedSeat.forEach(t=>{e+=t.category.fare}),this.payable=e-t,this.discount=t}}return t.\u0275fac=function(e){return new(e||t)(b.Jb(c.a),b.Jb(o.a),b.Jb(r.a),b.Jb(l.a))},t.\u0275cmp=b.Db({type:t,selectors:[["app-sell"]],decls:3,vars:3,consts:[[3,"ticket","close",4,"ngIf"],["class","container d-print-none",4,"ngIf"],[3,"ticket","close"],[1,"container","d-print-none"],[1,"row","border","my-3","p-2"],[1,"input-group-text","btn","btn-secondary",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","readonly","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],["class","row border py-2 ship-row",4,"ngFor","ngForOf"],[1,"row","border","py-2","ship-row"],[1,"col-md-3","col-6"],[1,"ship-row-name"],[1,"col-md-2","col-6"],[1,"ship-row-startTime"],[1,"fa","fa-clock-o"],[1,"col-md-3","col-6","d-flex","align-items-center","ship-row-route"],[1,""],[1,"col-md-4","col-6","d-flex","flex-row-reverse","align-items-center"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-hand-o-up"],["class","col-12 px-1",4,"ngIf"],[1,"col-12","px-1"],[1,"ship-details"],[4,"ngIf"],[1,"d-flex","flex-row-reverse"],["type","button",1,"btn","btn-sm","btn-danger",2,"border-radius","0",3,"click"],[1,"fa","fa-times"],[1,"row"],[1,"col-md-6"],[1,"row","m-0"],[4,"ngFor","ngForOf"],[3,"filteredSeatList","selectedSeat","categoryName","select",4,"ngIf"],[1,"col-md-6","mb-3"],["data-toggle","buttons",1,"btn-group","btn-group-toggle","border"],[1,"btn",3,"ngClass"],["type","radio","value","SEAT_SOLD","name","mode","id","mode_sell","autocomplete","off",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"ngClass"],["type","radio","value","SEAT_RESERVED","name","mode","id","mode_reservation","autocomplete","off",3,"ngModel","ngModelChange"],["class","alert alert-primary",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"btn-sm","m-1",3,"ngClass","click"],[3,"filteredSeatList","selectedSeat","categoryName","select"],[3,"seatList"],[1,"form-group","row"],[1,"col","mr-auto"],["for","discount",1,"col","col-form-label"],["type","number","id","discount","name","discount",1,"form-control","text-right",3,"ngModel","ngModelChange"],["for","payable",1,"col","col-form-label"],["id","payable",1,"form-control","text-right"],[3,"create"],[1,"alert","alert-primary"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(b.wc(0,S,1,1,"ticket-sukantababu-print",0),b.wc(1,v,1,1,"tiket-baycruise-print",0),b.wc(2,T,20,4,"div",1)),2&t&&(b.hc("ngIf",e.ticket&&"SUKANTO_BABU"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),b.xb(1),b.hc("ngIf",e.ticket&&"BAY_CRUISE"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),b.xb(1),b.hc("ngIf",!e.ticket))},directives:[d.n,g.a,h.a,u.d,f.b,f.k,f.n,d.m,d.l,f.q,p.a,m.a,k.a,y.a,f.p,O.a],styles:[".ship-row[_ngcontent-%COMP%]{border:1px solid #d3d3d3;box-shadow:0 .125rem .25rem rgba(0,0,0,.16)!important;margin-bottom:10px}.ship-row-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#000}.ship-row-startTime[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#000}.ship-row-route[_ngcontent-%COMP%]{color:#000}.ship-details[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #0c0266}.seat-box[_ngcontent-%COMP%]{border:1px solid #000;border-radius:4px;cursor:pointer;padding:2px;font-size:12px;text-align:center}.seat-box[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.seat-box.disabled[_ngcontent-%COMP%]{background-color:grey!important;color:#fff;cursor:not-allowed}.selected[_ngcontent-%COMP%]{background-color:#add8e6;color:#fff}"]}),t})();var q=i("3whx"),K=i("tyNb"),R=i("uEz7");function F(t,e){if(1&t){const t=b.Pb();b.Ob(0,"a",11),b.Yb("click",function(){b.qc(t);const i=e.$implicit;return b.ac(2).onBookingDetails(i.id)}),b.Ob(1,"strong"),b.yc(2),b.Nb(),b.yc(3),b.Nb()}if(2&t){const t=e.$implicit;b.xb(2),b.Ac(" ",t.id," "),b.xb(1),b.Bc(" ",t.user.name," [",t.user.phoneNumber,"] ")}}function U(t,e){if(1&t&&(b.Ob(0,"ul",8),b.Ob(1,"li",9),b.Ob(2,"h5"),b.yc(3,"Sells List"),b.Nb(),b.Ob(4,"small"),b.yc(5,"Choose a sell from below list"),b.Nb(),b.Nb(),b.wc(6,F,4,3,"a",10),b.Nb()),2&t){const t=b.ac();b.xb(6),b.hc("ngForOf",null==t.bookingPage?null:t.bookingPage.content)}}function j(t,e){1&t&&b.Kb(0,"app-loading")}function J(t,e){if(1&t){const t=b.Pb();b.Ob(0,"pagination",12),b.Yb("getPage",function(e){return b.qc(t),b.ac().getMyBookings(e)}),b.Nb()}if(2&t){const t=b.ac();b.hc("page",t.bookingPage)("short",t.short)}}function $(t,e){if(1&t){const t=b.Pb();b.Ob(0,"ticket-sukantababu-print",13),b.Yb("close",function(){return b.qc(t),b.ac().onTicketClose()}),b.Nb()}if(2&t){const t=b.ac();b.hc("ticket",t.ticket)}}function z(t,e){if(1&t){const t=b.Pb();b.Ob(0,"tiket-baycruise-print",13),b.Yb("close",function(){return b.qc(t),b.ac().onTicketClose()}),b.Nb()}if(2&t){const t=b.ac();b.hc("ticket",t.ticket)}}let V=(()=>{class t{constructor(t){this.bookingService=t,this.short=!0,this.loading=!1}ngOnInit(){this.getMyBookings()}getMyBookings(t=0){return Object(n.a)(this,void 0,void 0,function*(){this.loading=!0,yield this.bookingService.getAdminMySells(t).subscribe(t=>{this.bookingPage=t,this.loading=!1})})}onBookingDetails(t){this.ticket=this.bookingPage.content.find(e=>e.id==t)}onTicketClose(){this.ticket=null}}return t.\u0275fac=function(e){return new(e||t)(b.Jb(r.a))},t.\u0275cmp=b.Db({type:t,selectors:[["app-mysells"]],decls:10,vars:5,consts:[[1,"container-fluid"],[1,"row","my-2"],[1,"col-md-3","d-print-none"],["class","list-group",4,"ngIf","ngIfElse"],["showLoading",""],[3,"page","short","getPage",4,"ngIf"],[1,"col","p-0"],[3,"ticket","close",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[3,"page","short","getPage"],[3,"ticket","close"]],template:function(t,e){if(1&t&&(b.Ob(0,"div",0),b.Ob(1,"div",1),b.Ob(2,"div",2),b.wc(3,U,7,1,"ul",3),b.wc(4,j,1,0,"ng-template",null,4,b.xc),b.wc(6,J,1,2,"pagination",5),b.Nb(),b.Ob(7,"div",6),b.wc(8,$,1,1,"ticket-sukantababu-print",7),b.wc(9,z,1,1,"tiket-baycruise-print",7),b.Nb(),b.Nb(),b.Nb()),2&t){const t=b.pc(5);b.xb(3),b.hc("ngIf",!e.loading)("ngIfElse",t),b.xb(3),b.hc("ngIf",null!=e.bookingPage),b.xb(2),b.hc("ngIf",e.ticket&&"SUKANTO_BABU"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),b.xb(1),b.hc("ngIf",e.ticket&&"BAY_CRUISE"==(null==e.ticket.ship?null:e.ticket.ship.shipName))}},directives:[d.n,d.m,R.a,g.a,h.a],styles:[""]}),t})();function H(t,e){if(1&t){const t=b.Pb();b.Ob(0,"a",11),b.Yb("click",function(){b.qc(t);const i=e.$implicit;return b.ac(2).onBookingDetails(i.id)}),b.Kb(1,"i",12),b.yc(2),b.Nb()}if(2&t){const t=e.$implicit;b.xb(2),b.Cc(" ",t.id," ",t.user.name," [",t.user.phoneNumber,"] ")}}function G(t,e){if(1&t&&(b.Ob(0,"ul",8),b.Ob(1,"li",9),b.Ob(2,"h5"),b.yc(3,"Booking List"),b.Nb(),b.Ob(4,"small"),b.yc(5,"Choose a booking from below list"),b.Nb(),b.Nb(),b.wc(6,H,3,3,"a",10),b.Nb()),2&t){const t=b.ac();b.xb(6),b.hc("ngForOf",null==t.bookingPage?null:t.bookingPage.content)}}function X(t,e){1&t&&b.Kb(0,"app-loading")}function Q(t,e){if(1&t){const t=b.Pb();b.Ob(0,"pagination",13),b.Yb("getPage",function(e){return b.qc(t),b.ac().getAdminBookings(e)}),b.Nb()}if(2&t){const t=b.ac();b.hc("page",t.bookingPage)("short",t.short)}}function W(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",14),b.Ob(1,"div",15),b.yc(2),b.Ob(3,"button",16),b.Yb("click",function(){return b.qc(t),b.ac().clear()}),b.yc(4,"Close"),b.Nb(),b.Nb(),b.Nb()}if(2&t){const t=b.ac();b.xb(2),b.Ac(" ",t.message," ")}}function Z(t,e){if(1&t){const t=b.Pb();b.Ob(0,"ticket-sukantababu-print",21),b.Yb("close",function(){return b.qc(t),b.ac(2).onTicketClose()}),b.Nb()}if(2&t){const t=b.ac(2);b.hc("ticket",t.ticket)}}function tt(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",17),b.wc(1,Z,1,1,"ticket-sukantababu-print",18),b.Ob(2,"div",19),b.Ob(3,"button",20),b.Yb("click",function(){b.qc(t);const e=b.ac();return e.onCancelBooking(e.ticket.id)}),b.yc(4," Cancel booking "),b.Nb(),b.Nb(),b.Nb()}if(2&t){const t=b.ac();b.xb(1),b.hc("ngIf",t.ticket&&"SUKANTO_BABU"==(null==t.ticket.ship?null:t.ticket.ship.shipName))}}let et=(()=>{class t{constructor(t){this.bookingService=t,this.short=!0,this.loading=!1,this.message=""}ngOnInit(){this.getAdminBookings()}getAdminBookings(t=0){return Object(n.a)(this,void 0,void 0,function*(){this.bookingService.getAdminBookings(t).subscribe(t=>{this.bookingPage=t})})}onBookingDetails(t){this.ticket=this.bookingPage.content.find(e=>e.id==t)}onTicketClose(){this.ticket=null}onCancelBooking(t){return Object(n.a)(this,void 0,void 0,function*(){console.log("cancle ",t),yield this.bookingService.cancelAdminBooking(t).subscribe(t=>{console.log(t),this.message="Booking cancel done",this.ticket=null,this.getAdminBookings(this.bookingPage.number)})})}clear(){this.message=""}}return t.\u0275fac=function(e){return new(e||t)(b.Jb(r.a))},t.\u0275cmp=b.Db({type:t,selectors:[["app-cancel-booking"]],decls:9,vars:5,consts:[[1,"container-fluid"],[1,"row","my-2"],[1,"col-md-2","d-print-none"],["class","list-group",4,"ngIf","ngIfElse"],["showLoading",""],[3,"page","short","getPage",4,"ngIf"],["class","col text-center p-0",4,"ngIf"],["class","col p-0",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-ticket"],[3,"page","short","getPage"],[1,"col","text-center","p-0"],["role","alert",1,"alert","alert-danger"],[1,"btn-sm","btn-warning",3,"click"],[1,"col","p-0"],[3,"ticket","close",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[3,"ticket","close"]],template:function(t,e){if(1&t&&(b.Ob(0,"div",0),b.Ob(1,"div",1),b.Ob(2,"div",2),b.wc(3,G,7,1,"ul",3),b.wc(4,X,1,0,"ng-template",null,4,b.xc),b.wc(6,Q,1,2,"pagination",5),b.Nb(),b.wc(7,W,5,1,"div",6),b.wc(8,tt,5,1,"div",7),b.Nb(),b.Nb()),2&t){const t=b.pc(5);b.xb(3),b.hc("ngIf",!e.loading)("ngIfElse",t),b.xb(3),b.hc("ngIf",null!=e.bookingPage),b.xb(1),b.hc("ngIf",e.message.length),b.xb(1),b.hc("ngIf",e.ticket)}},directives:[d.n,d.m,R.a,g.a],styles:[""]}),t})();var it=i("Fif/"),nt=i("dR/p"),ct=i("dmtF");function ot(t,e){if(1&t){const t=b.Pb();b.Ob(0,"button",22),b.Yb("click",function(){b.qc(t);const i=e.$implicit;return b.ac(2).onSelectCategory(i)}),b.yc(1),b.Nb()}if(2&t){const t=e.$implicit,i=b.ac(2);b.hc("ngClass",t.name==i.category.name?"btn-primary":"btn-light"),b.xb(1),b.zc(t.name)}}function st(t,e){if(1&t){const t=b.Pb();b.Ob(0,"seat-status-bay-cruiser",23),b.Yb("select",function(e){return b.qc(t),b.ac(2).onSeatClick(e)}),b.Nb()}if(2&t){const t=b.ac(2);b.hc("filteredSeatList",t.filteredSeatList)("categoryName",t.category.name)}}function at(t,e){if(1&t){const t=b.Pb();b.Ob(0,"seat-status-sukanto",23),b.Yb("select",function(e){return b.qc(t),b.ac(2).onSeatClick(e)}),b.Nb()}if(2&t){const t=b.ac(2);b.hc("filteredSeatList",t.filteredSeatList)("categoryName",t.category.name)}}function rt(t,e){1&t&&(b.Ob(0,"div",24),b.Ob(1,"div",25),b.Kb(2,"div",26),b.yc(3," Blocked "),b.Nb(),b.Ob(4,"div",25),b.Kb(5,"div",27),b.yc(6," Reserved "),b.Nb(),b.Ob(7,"div",25),b.Kb(8,"div",28),b.yc(9," Sold "),b.Nb(),b.Ob(10,"div",25),b.Kb(11,"div",29),b.yc(12," Free "),b.Nb(),b.Nb())}function lt(t,e){if(1&t&&(b.Ob(0,"div",14),b.Ob(1,"h4"),b.yc(2),b.Nb(),b.Ob(3,"div",15),b.Ob(4,"div",16),b.wc(5,ot,2,2,"button",17),b.Nb(),b.Nb(),b.Ob(6,"div",2),b.Ob(7,"div",18),b.wc(8,st,1,2,"seat-status-bay-cruiser",19),b.wc(9,at,1,2,"seat-status-sukanto",19),b.Nb(),b.Ob(10,"div",20),b.wc(11,rt,13,0,"div",21),b.Nb(),b.Nb(),b.Nb()),2&t){const t=b.ac();b.xb(2),b.Bc("",null==t.ship?null:t.ship.shipNumber,"-",null==t.ship?null:t.ship.name," Seat status"),b.xb(3),b.hc("ngForOf",t.categoryList),b.xb(3),b.hc("ngIf","BAY_CRUISE"==t.ship.shipName),b.xb(1),b.hc("ngIf","SUKANTO_BABU"==t.ship.shipName),b.xb(2),b.hc("ngIf",null==t.filteredSeatList?null:t.filteredSeatList.length)}}function bt(t,e){if(1&t){const t=b.Pb();b.Ob(0,"ticket-sukantababu-print",34),b.Yb("close",function(){return b.qc(t),b.ac(2).onTicketClose()}),b.Nb()}if(2&t){const t=b.ac(2);b.hc("ticket",t.ticket)("short",t.shortTicket)}}function dt(t,e){if(1&t){const t=b.Pb();b.Ob(0,"tiket-baycruise-print",34),b.Yb("close",function(){return b.qc(t),b.ac(2).onTicketClose()}),b.Nb()}if(2&t){const t=b.ac(2);b.hc("ticket",t.ticket)("short",t.shortTicket)}}function gt(t,e){if(1&t){const t=b.Pb();b.Ob(0,"button",35),b.Yb("click",function(){b.qc(t);const e=b.ac(2);return e.onConfirmReservation(e.ticket.id)}),b.yc(1," Confirm Reservation "),b.Nb()}}function ht(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",14),b.wc(1,bt,1,2,"ticket-sukantababu-print",30),b.wc(2,dt,1,2,"tiket-baycruise-print",30),b.Ob(3,"div",31),b.Ob(4,"button",32),b.Yb("click",function(){b.qc(t);const e=b.ac();return e.onCancelBooking(e.ticket.id,e.ticket.eStatus)}),b.yc(5),b.Nb(),b.wc(6,gt,2,0,"button",33),b.Nb(),b.Nb()}if(2&t){const t=b.ac();b.xb(1),b.hc("ngIf",t.ticket&&"SUKANTO_BABU"==(null==t.ticket.ship?null:t.ticket.ship.shipName)),b.xb(1),b.hc("ngIf",t.ticket&&"BAY_CRUISE"==(null==t.ticket.ship?null:t.ticket.ship.shipName)),b.xb(3),b.Ac(" Cancel ","SEAT_RESERVED"==t.ticket.eStatus?"Reservation":"Booking"," "),b.xb(1),b.hc("ngIf","SEAT_RESERVED"==t.ticket.eStatus)}}function ut(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",11),b.yc(1),b.Ob(2,"button",12),b.Yb("click",function(){return b.qc(t),b.ac().onCloseButton()}),b.yc(3," Close "),b.Nb(),b.Nb()}if(2&t){const t=b.ac();b.xb(1),b.Ac(" ",t.errorMessage," ")}}function ft(t,e){if(1&t){const t=b.Pb();b.Ob(0,"ticket-sukantababu-print",15),b.Yb("close",function(){return b.qc(t),b.ac(2).onTicketClose()}),b.Nb()}if(2&t){const t=b.ac(2);b.hc("ticket",t.ticket)}}function pt(t,e){if(1&t){const t=b.Pb();b.Ob(0,"tiket-baycruise-print",15),b.Yb("close",function(){return b.qc(t),b.ac(2).onTicketClose()}),b.Nb()}if(2&t){const t=b.ac(2);b.hc("ticket",t.ticket)}}function mt(t,e){if(1&t&&(b.Ob(0,"div",13),b.wc(1,ft,1,1,"ticket-sukantababu-print",14),b.wc(2,pt,1,1,"tiket-baycruise-print",14),b.Nb()),2&t){const t=b.ac();b.xb(1),b.hc("ngIf",t.ticket&&"SUKANTO_BABU"==(null==t.ticket.ship?null:t.ticket.ship.shipName)),b.xb(1),b.hc("ngIf",t.ticket&&"BAY_CRUISE"==(null==t.ticket.ship?null:t.ticket.ship.shipName))}}const kt=[{path:"mySells",component:V},{path:"cancle-booking",component:et},{path:"seat-status",component:(()=>{class t{constructor(t,e,i){this.seastService=t,this.bookingService=e,this.utilService=i,this.seatList=[],this.filteredSeatList=[],this.categoryList=[],this.shortTicket=!0}ngOnInit(){let t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.minDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()-1},this.maxDate={year:t.getFullYear(),month:t.getMonth()+3,day:t.getDate()}}onShipSelect(t){this.ship=t,this.getAdminSeatStatus(t.id,this.dd)}onDateChange(){this.ship.id&&this.getAdminSeatStatus(this.ship.id,this.dd)}getAdminSeatStatus(t,e){return Object(n.a)(this,void 0,void 0,function*(){try{this.seatList=yield this.seastService.getAdminSeatStatusListByShiplId(t,this.makeDateString(e)).toPromise(),this.categoryList=[],this.seatList.forEach(t=>{const e=t.category;this.categoryList.find(t=>t.name==e.name)||this.categoryList.push(e)}),this.categoryList.sort(this.utilService.dynamicSortObject("priority")),this.onSelectCategory(this.categoryList[this.categoryList.length-1])}catch(i){console.log(i)}})}onSelectCategory(t){this.category=this.categoryList.find(e=>e.name==t.name),this.filterSeatList(t)}filterSeatList(t){this.filteredSeatList=[],this.seatList.forEach(e=>{e.category.name==t.name&&this.filteredSeatList.push(e)})}onSeatClick(t){const e=this.filteredSeatList.find(e=>e.id==t);e.bookingId?null!=this.ticket&&this.ticket.id==e.bookingId||this.getAdminBooking(e.bookingId):this.ticket=null}getAdminBooking(t){return Object(n.a)(this,void 0,void 0,function*(){try{this.ticket=yield this.bookingService.getAdminBooking(t).toPromise()}catch(e){console.log(e)}})}onCancelBooking(t,e){return Object(n.a)(this,void 0,void 0,function*(){if(confirm("Are you sure to cancel booking with id : "+t))if(e==s.b.SEAT_SOLD)try{yield this.bookingService.cancelAdminBooking(t).toPromise(),this.ticket=null,this.getAdminSeatStatus(this.ship.id,this.dd)}catch(i){console.log(i)}else if(e==s.b.SEAT_RESERVED)try{yield this.bookingService.cancelAdminReservation(t).toPromise(),this.ticket=null,this.getAdminSeatStatus(this.ship.id,this.dd)}catch(i){console.log(i)}})}onConfirmReservation(t){return Object(n.a)(this,void 0,void 0,function*(){if(confirm("Are you sure to confirm your reservation with id : "+t)){console.log("confirm reservation");try{yield this.bookingService.confirmAdminReservation(t).toPromise(),this.ticket=null,this.getAdminSeatStatus(this.ship.id,this.dd)}catch(e){console.log(e)}}})}makeDateString(t){return t.year+"-"+(t.month<10?"0"+t.month:t.month)+"-"+(t.day<10?"0"+t.day:t.day)}onTicketClose(t){this.ticket=null}}return t.\u0275fac=function(e){return new(e||t)(b.Jb(o.a),b.Jb(r.a),b.Jb(l.a))},t.\u0275cmp=b.Db({type:t,selectors:[["app-status"]],decls:19,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-2"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[3,"ship"],["class","col-md-5",4,"ngIf"],[1,"col-md-5"],[1,"row","m-0"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button","class","btn",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-12","p-0"],[3,"filteredSeatList","categoryName","select",4,"ngIf"],[1,"col-12"],["class","row border py-3 mt-3",4,"ngIf"],["type","button",1,"btn",3,"ngClass","click"],[3,"filteredSeatList","categoryName","select"],[1,"row","border","py-3","mt-3"],[1,"col-3"],[1,"foo","blocked"],[1,"foo","reserved"],[1,"foo","sold"],[1,"foo"],[3,"ticket","short","close",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2"],[1,"btn","btn-danger","btn-sm","mx-1",3,"click"],["class","btn btn-sm btn-primary mx-1",3,"click",4,"ngIf"],[3,"ticket","short","close"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"]],template:function(t,e){if(1&t){const t=b.Pb();b.Ob(0,"div",0),b.Ob(1,"span",1),b.yc(2,"Seat status"),b.Nb(),b.Nb(),b.Ob(3,"div",0),b.Ob(4,"div",2),b.Ob(5,"div",3),b.Ob(6,"div",4),b.Ob(7,"div",5),b.Ob(8,"div",6),b.Ob(9,"div",7),b.yc(10," Date : "),b.Nb(),b.Nb(),b.Ob(11,"input",8,9),b.Yb("ngModelChange",function(t){return e.dd=t})("dateSelect",function(){return e.onDateChange()})("click",function(){return b.qc(t),b.pc(12).toggle()}),b.Nb(),b.Ob(13,"div",10),b.Yb("click",function(){return b.qc(t),b.pc(12).toggle()}),b.Ob(14,"div",7),b.Kb(15,"i",11),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(16,"admin-ship-list",12),b.Yb("ship",function(t){return e.onShipSelect(t)}),b.Nb(),b.Nb(),b.wc(17,lt,12,6,"div",13),b.wc(18,ht,7,4,"div",13),b.Nb(),b.Nb()}2&t&&(b.xb(11),b.hc("ngModel",e.dd)("minDate",e.minDate)("maxDate",e.maxDate),b.xb(6),b.hc("ngIf",e.filteredSeatList.length),b.xb(1),b.hc("ngIf",e.ticket))},directives:[u.d,f.b,f.k,f.n,it.a,d.n,d.m,d.l,nt.a,ct.a,g.a,h.a],styles:[".seat-box[_ngcontent-%COMP%]{border:1px solid #000;border-radius:4px;cursor:pointer;padding:2px;font-size:12px;text-align:center}.seat-box[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.seat-box.sold[_ngcontent-%COMP%]{border:1px solid red;background-color:red;color:#fff}.seat-box.reserved[_ngcontent-%COMP%]{border:1px solid #ffc107;background-color:#ffc107}.seat-box.blocked[_ngcontent-%COMP%]{border:1px solid #d3d3d3;background-color:#d3d3d3;color:#fff}.ticket[_ngcontent-%COMP%]{font-family:Bitter,serif;font-size:12px;padding:15px 0}.ticket-head[_ngcontent-%COMP%]{background-color:grey;color:#fff;padding:5px}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}.foo.sold[_ngcontent-%COMP%]{border:1px solid red;background-color:red}.foo.reserved[_ngcontent-%COMP%]{border:1px solid #ffc107;background-color:#ffc107}.foo.blocked[_ngcontent-%COMP%]{border:1px solid #d3d3d3;background-color:#d3d3d3}"]}),t})()},{path:"print-ticket",component:(()=>{class t{constructor(t){this.bookingService=t,this.errorMessage=""}getTicket(){this.getAdminBooking(this.ticketId)}getAdminBooking(t){return Object(n.a)(this,void 0,void 0,function*(){this.errorMessage="",this.ticket=null;try{const e=yield this.bookingService.getAdminBooking(t).toPromise();e.id?0==e.cancelled?this.ticket=e:this.errorMessage="This ticket has been canceled":this.errorMessage="No ticket found with id "+t}catch(e){console.log(e)}})}onTicketClose(){this.ticket=null}onCloseButton(){this.ticket=null,this.errorMessage=""}}return t.\u0275fac=function(e){return new(e||t)(b.Jb(r.a))},t.\u0275cmp=b.Db({type:t,selectors:[["app-print-ticket"]],decls:17,vars:3,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"d-flex","justify-content-center","d-print-none"],[1,"row","shadow-sm"],[1,"col-auto"],["type","number","name","ticketId","placeholder","Ticket Id",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","mb-2",3,"click"],[1,"row"],["class","col-auto alert alert-danger","role","alert",4,"ngIf"],["class","container-fluid p-0",4,"ngIf"],["role","alert",1,"col-auto","alert","alert-danger"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"container-fluid","p-0"],[3,"ticket","close",4,"ngIf"],[3,"ticket","close"]],template:function(t,e){1&t&&(b.Ob(0,"div",0),b.Ob(1,"span",1),b.yc(2,"Print Ticket"),b.Nb(),b.Nb(),b.Ob(3,"div",2),b.Ob(4,"div",3),b.Ob(5,"form"),b.Ob(6,"div",4),b.Ob(7,"div",5),b.Ob(8,"input",6),b.Yb("ngModelChange",function(t){return e.ticketId=t}),b.Nb(),b.Nb(),b.Ob(9,"div",5),b.Ob(10,"button",7),b.Yb("click",function(){return e.getTicket()}),b.yc(11," Submit "),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(12,"div",2),b.Ob(13,"div",3),b.Ob(14,"div",8),b.wc(15,ut,4,1,"div",9),b.Nb(),b.Nb(),b.Nb(),b.wc(16,mt,3,2,"div",10)),2&t&&(b.xb(8),b.hc("ngModel",e.ticketId),b.xb(7),b.hc("ngIf",e.errorMessage.length),b.xb(1),b.hc("ngIf",e.ticket))},directives:[f.v,f.l,f.m,f.p,f.b,f.k,f.n,d.n,g.a,h.a],styles:[""]}),t})()},{path:"",component:_}];let yt=(()=>{class t{}return t.\u0275mod=b.Hb({type:t}),t.\u0275inj=b.Gb({factory:function(e){return new(e||t)},imports:[[q.a,K.e.forChild(kt)]]}),t})()}}]);