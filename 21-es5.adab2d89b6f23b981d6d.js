!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{qGDO:function(n,r,o){"use strict";o.r(r),o.d(r,"ROUTES",function(){return k}),o.d(r,"SUsersModule",function(){return x});var i=o("tyNb"),c=o("MKLO"),s=o("mrSG"),a=o("/7iW"),u=o("fXoL"),m=o("FCUJ"),b=(o("zdEN"),o("3Pt+")),l=o("ofXK");function f(e,n){1&e&&(u.Ob(0,"small",24),u.yc(1," Name required "),u.Nb())}function h(e,n){if(1&e&&(u.Ob(0,"small",24),u.Ob(1,"div",25),u.yc(2," Phone number required "),u.Nb(),u.Ob(3,"div",25),u.yc(4," Phone number format 01934953023 "),u.Nb(),u.Nb()),2&e){var t=u.ac();u.xb(1),u.hc("hidden",!t.form.controls.phoneNumber.errors.required),u.xb(2),u.hc("hidden",!t.form.controls.phoneNumber.errors.pattern)}}function v(e,n){1&e&&(u.Ob(0,"small",24),u.yc(1," Commission required "),u.Nb())}function d(e,n){if(1&e){var t=u.Pb();u.Ob(0,"button",26),u.Yb("click",function(){u.qc(t);var e=u.ac();return e.onRemoveAgent(e.user.id)}),u.yc(1," Remove this agent "),u.Nb()}}var g,p,N,O=function(e,n,t){return{disabled:e,"btn-warning":n,"btn-success":t}},y=((g=function(){function n(t){e(this,n),this.builder=t,this.create=new u.n,this.removeAgent=new u.n,this.exists=!1,this.createForm()}return t(n,[{key:"ngOnChanges",value:function(e){if(e.user&&this.user&&this.user.id){var n={name:this.user.name,phoneNumber:this.user.phoneNumber,email:this.user.email,commission:this.user.commission,canReserve:null!=this.user.canReserve&&this.user.canReserve,canCancelReservation:null!=this.user.canCancelReservation&&this.user.canCancelReservation,canCancelBooking:null!=this.user.canCancelBooking&&this.user.canCancelBooking};this.onClear(),this.exists=!0,this.form.patchValue(Object.assign({},n))}}},{key:"createForm",value:function(){this.form=this.builder.group({name:["",b.t.required],phoneNumber:["",[b.t.required,b.t.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:"",commission:["",b.t.required],canReserve:[!1,b.t.required],canCancelReservation:[!1,b.t.required],canCancelBooking:[!1,b.t.required]})}},{key:"submit",value:function(){if(this.form.valid){if(this.exists){var e=Object.assign(Object.assign({},this.user),this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.onClear()}}},{key:"onRemoveAgent",value:function(e){this.removeAgent.emit(e),this.onClear()}},{key:"onClear",value:function(){this.form.reset(),this.form.patchValue({name:"",phoneNumber:"",email:"",commission:"",canReserve:!1,canCancelReservation:!1,canCancelBooking:!1}),this.exists=!1}}]),n}()).\u0275fac=function(e){return new(e||g)(u.Jb(b.c))},g.\u0275cmp=u.Db({type:g,selectors:[["agent-form"]],inputs:{user:"user"},outputs:{create:"create",removeAgent:"removeAgent"},features:[u.vb],decls:43,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["for","commission"],["type","number","id","commission","placeholder","Commission","formControlName","commission",1,"form-control"],[1,"form-group","col-md-4"],[1,"form-check"],["type","checkbox","id","canReserve","formControlName","canReserve",1,"form-check-input"],["for","canReserve",1,"form-check-label"],["type","checkbox","id","canCancelReservation","formControlName","canCancelReservation",1,"form-check-input"],["for","canCancelReservation",1,"form-check-label"],["type","checkbox","id","canCancelBooking","formControlName","canCancelBooking",1,"form-check-input"],["for","canCancelBooking",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","mx-1",3,"ngClass"],["type","button","class","btn btn-sm btn-success mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-success","mx-1",3,"click"]],template:function(e,n){1&e&&(u.Ob(0,"form",0),u.Yb("ngSubmit",function(){return n.submit()}),u.Ob(1,"div",1),u.Ob(2,"div",2),u.Ob(3,"label",3),u.yc(4,"Name *"),u.Nb(),u.Kb(5,"input",4),u.wc(6,f,2,0,"small",5),u.Nb(),u.Ob(7,"div",2),u.Ob(8,"label",6),u.yc(9,"Phone *"),u.Nb(),u.Kb(10,"input",7),u.wc(11,h,5,2,"small",5),u.Nb(),u.Ob(12,"div",2),u.Ob(13,"label",8),u.yc(14,"Email"),u.Nb(),u.Kb(15,"input",9),u.Nb(),u.Ob(16,"div",2),u.Ob(17,"label",10),u.yc(18,"Commission *"),u.Nb(),u.Kb(19,"input",11),u.wc(20,v,2,0,"small",5),u.Nb(),u.Nb(),u.Ob(21,"div",1),u.Ob(22,"div",12),u.Ob(23,"div",13),u.Kb(24,"input",14),u.Ob(25,"label",15),u.yc(26," Reserve "),u.Nb(),u.Nb(),u.Nb(),u.Ob(27,"div",12),u.Ob(28,"div",13),u.Kb(29,"input",16),u.Ob(30,"label",17),u.yc(31," Cancel Reservation "),u.Nb(),u.Nb(),u.Nb(),u.Ob(32,"div",12),u.Ob(33,"div",13),u.Kb(34,"input",18),u.Ob(35,"label",19),u.yc(36," Cancel Booking "),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Ob(37,"div",20),u.Ob(38,"button",21),u.yc(39),u.Nb(),u.wc(40,d,2,0,"button",22),u.Ob(41,"button",23),u.Yb("click",function(){return n.onClear()}),u.yc(42," Clear "),u.Nb(),u.Nb(),u.Nb()),2&e&&(u.hc("formGroup",n.form),u.xb(6),u.hc("ngIf",n.form.controls.name.errors&&n.form.controls.name.touched),u.xb(5),u.hc("ngIf",n.form.controls.phoneNumber.errors&&n.form.controls.phoneNumber.touched),u.xb(9),u.hc("ngIf",n.form.controls.commission.errors&&n.form.controls.commission.touched),u.xb(18),u.hc("ngClass",u.nc(7,O,n.form.invalid,n.exists,!n.exists)),u.xb(1),u.Ac(" ",n.exists?"Update":"Create"," User "),u.xb(1),u.hc("ngIf",n.exists))},directives:[b.v,b.l,b.e,b.b,b.k,b.d,l.n,b.h,b.p,b.a,l.l],styles:[""]}),g),k=[{path:"agent",component:(p=function(){function n(t){e(this,n),this.userService=t}return t(n,[{key:"ngOnInit",value:function(){this.getServiceAdminAgents()}},{key:"getServiceAdminAgents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.userService.getServiceAdminAgents(e).toPromise();case 3:this.userPage=n.sent,n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0);case 9:case"end":return n.stop()}},n,this,[[0,6]])}))}},{key:"onCreate",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.userService.createSerivceAdminAgent(e).toPromise();case 3:this.getServiceAdminAgents(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0);case 9:case"end":return n.stop()}},n,this,[[0,6]])}))}},{key:"onSelect",value:function(e){var n=this.userPage.content.find(function(n){return n.id===e});this.user=n}},{key:"onRemoveAgent",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("On leave ",e),!confirm("Are you sure to remove agent with id = "+e)){n.next=10;break}return n.prev=1,n.next=4,this.userService.removeServiceAdminAgent(e).toPromise();case 4:this.getServiceAdminAgents(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.log(n.t0);case 10:case"end":return n.stop()}},n,this,[[1,7]])}))}}]),n}(),p.\u0275fac=function(e){return new(e||p)(u.Jb(a.a))},p.\u0275cmp=u.Db({type:p,selectors:[["app-add-agent"]],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[3,"userPage","userId","page"],[1,"p-3","shadow-sm"],[1,"text-center"],[3,"user","create","removeAgent"]],template:function(e,n){1&e&&(u.Ob(0,"div",0),u.Ob(1,"span",1),u.yc(2,"Agents"),u.Nb(),u.Nb(),u.Ob(3,"div",0),u.Ob(4,"div",2),u.Ob(5,"div",3),u.Ob(6,"service-admin-agent-list",4),u.Yb("userId",function(e){return n.onSelect(e)})("page",function(e){return n.getServiceAdminAgents(e)}),u.Nb(),u.Nb(),u.Ob(7,"div",3),u.Ob(8,"div",5),u.Ob(9,"h3",6),u.yc(10,"Add Agent"),u.Nb(),u.Ob(11,"agent-form",7),u.Yb("create",function(e){return n.onCreate(e)})("removeAgent",function(e){return n.onRemoveAgent(e)}),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb()),2&e&&(u.xb(6),u.hc("userPage",n.userPage),u.xb(5),u.hc("user",n.user))},directives:[m.a,y],styles:[""]}),p)}],x=((N=function n(){e(this,n)}).\u0275mod=u.Hb({type:N}),N.\u0275inj=u.Gb({factory:function(e){return new(e||N)},imports:[[c.a,i.e.forChild(k)]]}),N)}}])}();