<div class="container-fluid">
  <span class="row px-3 details-title text-left"> Assign User </span>
</div>

<div class="container-fluid">
  <div class="row m-0">
    <div class="offset-md-2 col-md-4 p-2" *ngIf="user || ship">
      <div class="p-4 shadow-sm">
        <h4 class="text-center">Assign user</h4>
        <assign-user-form
          [ship]="ship"
          [user]="user"
          (role)="onSaveRole($event)"
          (close)="onCloseForm($event)"
        ></assign-user-form>
      </div>
    </div>
    <div class="col-md-4" *ngIf="shipUserList.length">
      <div class="shadow-sm  p-3">
        <h4>{{ ship.name }} User list</h4>
        <table class="table border">
          <thead>
            <tr>
              <th>
                Name
              </th>
              <th>
                Phone
              </th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of shipUserList">
              <td>{{ user.name }}</td>
              <td>{{ user.phoneNumber }}</td>
              <td>
                <span *ngFor="let role of user.roles">{{ role.name }}, </span>
              </td>
            </tr>
          </tbody>
        </table>
        <!-- {{ shipUserList | json }} -->
      </div>
    </div>
  </div>
</div>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <h3 class="text-center">User list</h3>
      <table class="table border">
        <thead>
          <tr>
            <th>Name</th>
            <th>Phone, Email</th>
            <th>Staus</th>
            <th></th>
          </tr>
        </thead>
        <tbody *ngIf="userPage">
          <tr *ngFor="let user of userPage.content">
            <td>
              {{ user.name }} <br />
              <span
                class="badge badge-pill"
                [ngClass]="i % 2 == 0 ? 'badge-success' : 'badge-info'"
                *ngFor="let role of user?.roles; let i = index"
              >
                {{ role.name }}
              </span>
            </td>
            <td>
              {{ user.phoneNumber }}<br />
              {{ user.email }}
            </td>
            <td>{{ user.enabled ? 'ACTIVE' : 'INACTIVE' }}</td>
            <td>
              <button
                class="btn btn-warning btn-sm"
                (click)="onSelectUser(user.id)"
              >
                <i class="fa fa-edit"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-md-6">
      <h3 class="text-center">Ship list</h3>
      <table class="table border">
        <thead>
          <tr>
            <th>Name</th>
            <th>Phone</th>
            <th>Enabled</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ship of shipPage?.content">
            <td>{{ ship.name }}</td>
            <td>{{ ship.phoneNumber }}</td>
            <td>{{ ship.enabled }}</td>
            <td>
              <button
                class="btn btn-warning btn-sm"
                (click)="onSelectShip(ship.id)"
              >
                <i class="fa fa-edit"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
