(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{EIsZ:function(t,e,i){"use strict";i.r(e),i.d(e,"ROUTES",function(){return it}),i.d(e,"ReportModule",function(){return nt});var n=i("tyNb"),o=i("3whx"),s=i("mrSG"),r=i("sNvP"),a=i("z3bE"),c=i("1kSV"),l=i("fXoL"),b=i("3Pt+"),d=i("ofXK");function h(t,e){1&t&&(l.Ob(0,"th"),l.yc(1,"Seat"),l.Nb())}function p(t,e){if(1&t&&(l.Ob(0,"span"),l.yc(1),l.Nb()),2&t){const t=e.$implicit;l.xb(1),l.Ac(" ",t," ")}}function g(t,e){if(1&t&&(l.Ob(0,"th"),l.wc(1,p,2,1,"span",3),l.Nb()),2&t){const t=l.ac().$implicit;l.xb(1),l.hc("ngForOf",t.seatNumbers)}}function m(t,e){if(1&t&&(l.Ob(0,"span"),l.yc(1),l.Nb()),2&t){const t=e.$implicit;l.xb(1),l.Ac("",t,", ")}}const u=function(t,e){return{"bg-success":t,"bg-warning":e}};function y(t,e){if(1&t&&(l.Ob(0,"tr"),l.Ob(1,"td"),l.yc(2),l.Nb(),l.wc(3,g,2,1,"th",2),l.Ob(4,"td"),l.yc(5),l.Nb(),l.Ob(6,"td"),l.yc(7),l.bc(8,"date"),l.Nb(),l.Ob(9,"td"),l.yc(10),l.bc(11,"date"),l.Nb(),l.Ob(12,"td"),l.yc(13),l.Nb(),l.Ob(14,"td"),l.wc(15,m,2,1,"span",3),l.Nb(),l.Ob(16,"td"),l.yc(17),l.Nb(),l.Ob(18,"td"),l.yc(19),l.Nb(),l.Ob(20,"td"),l.yc(21),l.Nb(),l.Ob(22,"td"),l.yc(23),l.Nb(),l.Ob(24,"td"),l.yc(25),l.Nb(),l.Ob(26,"td",4),l.yc(27),l.Nb(),l.Nb()),2&t){const t=e.$implicit,i=e.index,n=l.ac();l.xb(2),l.zc(i+1),l.xb(1),l.hc("ngIf","Reservation"==n.type),l.xb(2),l.zc(t.bookingId),l.xb(2),l.zc(l.dc(8,16,t.bookingDate,"MMM d, y, h:mm:ss a")),l.xb(3),l.zc(l.cc(11,19,t.journeyDate)),l.xb(3),l.Bc("",t.customerName," - ",t.customerPhone,""),l.xb(2),l.hc("ngForOf",t.seatNumbers),l.xb(2),l.zc(t.price),l.xb(2),l.Ac("",t.hotelswaveCommission+t.hotelswaveAgentCommission+t.shipAgentCommission," "),l.xb(2),l.Bc("",t.shipNumber," - ",t.routes,""),l.xb(2),l.zc(t.soldBy),l.xb(2),l.zc(t.bookingStatus),l.xb(1),l.hc("ngClass",l.mc(21,u,t.paid,!t.paid)),l.xb(1),l.Ac(" ",t.paid?"Paid":"Unpaid"," ")}}function v(t,e){1&t&&l.Kb(0,"td")}function O(t,e){if(1&t&&(l.Ob(0,"tr"),l.Ob(1,"td"),l.yc(2),l.Nb(),l.Ob(3,"td"),l.yc(4),l.Nb(),l.Ob(5,"td"),l.yc(6),l.Nb(),l.Ob(7,"td"),l.yc(8),l.Nb(),l.Ob(9,"td"),l.yc(10),l.Nb(),l.Ob(11,"td"),l.yc(12),l.Nb(),l.Ob(13,"td"),l.yc(14),l.Nb(),l.Nb()),2&t){const t=e.$implicit;l.xb(2),l.zc(t.key),l.xb(2),l.zc(t.value.totalReserved),l.xb(2),l.zc(t.value.totalSold),l.xb(2),l.zc(t.value.price),l.xb(2),l.zc(t.value.hotelswaveCommission),l.xb(2),l.zc(t.value.hotelswaveAgentCommission),l.xb(2),l.zc(t.value.shipAgentCommission)}}let N=(()=>{class t{constructor(){this.reportList=[],this.soldBy=new Map}ngOnChanges(t){t.reportList&&null!=this.reportList&&this.calculateServiceAdminBookingReportList()}calculateServiceAdminBookingReportList(){this.total={totalrent:0,totalAdvance:0,totalDue:0,totalCommission:0},this.soldBy=new Map,this.reportList.forEach(t=>{if(this.total.totalrent+=t.price,this.total.totalCommission+=t.hotelswaveAgentCommission+t.hotelswaveCommission+t.shipAgentCommission,t.soldBy&&t.seatNumbers){const e=null==this.soldBy.get(t.soldBy)?t.hotelswaveCommission:this.soldBy.get(t.soldBy).hotelswaveCommission+t.hotelswaveCommission,i=null==this.soldBy.get(t.soldBy)?t.hotelswaveAgentCommission:this.soldBy.get(t.soldBy).hotelswaveAgentCommission+t.hotelswaveAgentCommission,n=null==this.soldBy.get(t.soldBy)?t.shipAgentCommission:this.soldBy.get(t.soldBy).shipAgentCommission+t.shipAgentCommission,o=null==this.soldBy.get(t.soldBy)?t.seatNumbers.length:this.soldBy.get(t.soldBy).totalSeatNumber+t.seatNumbers.length;let s=0,r=0,a=0;"SEAT_SOLD"==t.bookingStatus?(r=null==this.soldBy.get(t.soldBy)?t.seatNumbers.length:this.soldBy.get(t.soldBy).totalSold+t.seatNumbers.length,s=null==this.soldBy.get(t.soldBy)?t.price:this.soldBy.get(t.soldBy).price+t.price):(a=null==this.soldBy.get(t.soldBy)?t.seatNumbers.length:this.soldBy.get(t.soldBy).totalReserved+t.seatNumbers.length,s=null==this.soldBy.get(t.soldBy)?0:this.soldBy.get(t.soldBy).price),this.soldBy.set(t.soldBy,{totalSold:r,totalReserved:a,price:s,hotelswaveCommission:e,hotelswaveAgentCommission:i,shipAgentCommission:n,totalSeatNumber:o})}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Db({type:t,selectors:[["report-table"]],inputs:{type:"type",headLine:"headLine",reportList:"reportList"},features:[l.vb],decls:68,vars:9,consts:[[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,e){1&t&&(l.Ob(0,"h4",0),l.yc(1),l.Nb(),l.Ob(2,"table",1),l.Ob(3,"thead"),l.Ob(4,"tr"),l.Ob(5,"th"),l.yc(6,"Sl."),l.Nb(),l.wc(7,h,2,0,"th",2),l.Ob(8,"th"),l.yc(9,"Ticket no."),l.Nb(),l.Ob(10,"th"),l.yc(11,"Booking Date"),l.Nb(),l.Ob(12,"th"),l.yc(13,"Journey Date"),l.Nb(),l.Ob(14,"th"),l.yc(15,"Passenger Info"),l.Nb(),l.Ob(16,"th"),l.yc(17,"Seats"),l.Nb(),l.Ob(18,"th"),l.yc(19,"Price"),l.Nb(),l.Ob(20,"th"),l.yc(21,"Commission"),l.Nb(),l.Ob(22,"th"),l.yc(23,"Route"),l.Nb(),l.Ob(24,"th"),l.yc(25,"Sold By"),l.Nb(),l.Ob(26,"th"),l.yc(27,"Status"),l.Nb(),l.Ob(28,"th"),l.yc(29,"Paid"),l.Nb(),l.Nb(),l.Nb(),l.Ob(30,"tbody"),l.wc(31,y,28,24,"tr",3),l.Nb(),l.Ob(32,"tfoot"),l.Ob(33,"tr"),l.Kb(34,"td"),l.wc(35,v,1,0,"td",2),l.Kb(36,"td"),l.Kb(37,"td"),l.Kb(38,"td"),l.Kb(39,"td"),l.Ob(40,"td"),l.yc(41,"TOTAL"),l.Nb(),l.Ob(42,"td"),l.yc(43),l.Nb(),l.Ob(44,"td"),l.yc(45),l.Nb(),l.Kb(46,"td"),l.Kb(47,"td"),l.Kb(48,"td"),l.Kb(49,"td"),l.Nb(),l.Nb(),l.Nb(),l.Ob(50,"table",1),l.Ob(51,"tr"),l.Ob(52,"th"),l.yc(53,"Counter Name"),l.Nb(),l.Ob(54,"th"),l.yc(55,"Reserved"),l.Nb(),l.Ob(56,"th"),l.yc(57,"Sold "),l.Nb(),l.Ob(58,"th"),l.yc(59,"Price"),l.Nb(),l.Ob(60,"th"),l.yc(61,"Hotelswave Commission"),l.Nb(),l.Ob(62,"th"),l.yc(63,"Hotelswave Agent Commission"),l.Nb(),l.Ob(64,"th"),l.yc(65,"Ship Agent Commission"),l.Nb(),l.Nb(),l.wc(66,O,15,7,"tr",3),l.bc(67,"keyvalue"),l.Nb()),2&t&&(l.xb(1),l.Ac(" ",e.headLine," "),l.xb(6),l.hc("ngIf","Reservation"==e.type),l.xb(24),l.hc("ngForOf",e.reportList),l.xb(4),l.hc("ngIf","Reservation"==e.type),l.xb(8),l.zc(e.total.totalrent),l.xb(2),l.zc(e.total.totalCommission),l.xb(21),l.hc("ngForOf",l.cc(67,7,e.soldBy)))},directives:[d.n,d.m,d.l],pipes:[d.h,d.e],styles:[""]}),t})();var f=i("HF3I");function S(t,e){if(1&t&&(l.Ob(0,"div"),l.Kb(1,"report-table",33),l.Nb()),2&t){const t=l.ac(2);l.xb(1),l.hc("type",t.reportType)("date",t.dd)("reportList",t.serviceAdminSellsReportList)}}function w(t,e){1&t&&(l.Ob(0,"h4",34),l.Kb(1,"i",35),l.yc(2," No record yet "),l.Nb())}function D(t,e){if(1&t&&(l.Mb(0),l.wc(1,S,2,3,"div",30),l.wc(2,w,3,0,"ng-template",null,32,l.xc),l.Lb()),2&t){const t=l.pc(3),e=l.ac();l.xb(1),l.hc("ngIf",e.serviceAdminSellsReportList.length>0)("ngIfElse",t)}}function A(t,e){1&t&&l.Kb(0,"loading")}let x=(()=>{class t{constructor(t,e){this.reportService=t,this.utilService=e,this.reportHead="",this.reportType="Sells",this.filterValue="all",this.loading=!1,this.savedList=[],this.serviceAdminSellsReportList=[],this.soldBy=new Map}ngOnInit(){let t=new Date;this.dd=new c.a(t.getFullYear(),t.getMonth()+1,t.getDate()),this.getAdminSellsgReport(this.dd)}onDateChange(){this.onLoad()}onTypeChange(){this.onLoad()}onPrint(){window.print()}onFilterChange(t){switch(this.filterValue=t,t){case"all":this.serviceAdminSellsReportList=this.savedList;break;case"hotelswave":this.serviceAdminSellsReportList=this.savedList.filter(t=>"Admin"===t.role);break;case"shipAdmin":this.serviceAdminSellsReportList=this.savedList.filter(t=>"Service Admin"===t.role);break;case"shipAgent":this.serviceAdminSellsReportList=this.savedList.filter(t=>"Service Agent"===t.role);break;case"hotelswaveAgent":this.serviceAdminSellsReportList=this.savedList.filter(t=>"Agent"===t.role);break;case"user":this.serviceAdminSellsReportList=this.savedList.filter(t=>"User"===t.role);break;case"superSell":this.serviceAdminSellsReportList=this.savedList.filter(t=>"User"===t.role||"Agent"===t.role||"Admin"==t.role)}}onLoad(){switch(this.reportType){case"Reservation":this.getAdminReservationReport(this.dd);break;case"Sells":this.getAdminSellsgReport(this.dd)}}getAdminReservationReport({year:t,month:e,day:i}){return Object(s.a)(this,void 0,void 0,function*(){const n=`${t}-${e=e<10?"0"+e:e}-${i=i<10?"0"+i:i}`;try{this.loading=!0,this.serviceAdminSellsReportList=[],this.savedList=yield this.reportService.getAdminReservationReport(n).toPromise(),this.onFilterChange(this.filterValue),this.reportHead="Reservation",this.loading=!1}catch(o){console.log(o)}})}getAdminSellsgReport({year:t,month:e,day:i}){return Object(s.a)(this,void 0,void 0,function*(){const n=`${t}-${e=e<10?"0"+e:e}-${i=i<10?"0"+i:i}`;try{this.loading=!0,this.serviceAdminSellsReportList=[],this.savedList=yield this.reportService.getAdminSellsReport(n).toPromise(),this.savedList.sort(this.utilService.dynamicSortObject("date")),this.savedList.sort(this.utilService.dynamicSortObject("roomNumber")),this.onFilterChange(this.filterValue),this.reportHead="Sells",this.loading=!1}catch(o){console.log(o)}})}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(r.a),l.Jb(a.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-sells-report"]],decls:55,vars:4,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],[1,"ml-auto","col-auto"],["id","reportType",1,"form-control",3,"change"],["value","all"],["value","hotelswave"],["value","shipAdmin"],["value","shipAgent"],["value","hotelswaveAgent"],["value","superSell"],["value","user"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf","ngIfElse"],["showLoding",""],["noRecord",""],[3,"type","date","reportList"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",0),l.Ob(1,"span",1),l.yc(2," Sells Report "),l.Nb(),l.Nb(),l.Ob(3,"div",2),l.Ob(4,"div",3),l.Ob(5,"div",4),l.Ob(6,"div",5),l.Ob(7,"div",6),l.Ob(8,"div",7),l.Ob(9,"div",8),l.yc(10," Date : "),l.Nb(),l.Nb(),l.Ob(11,"input",9,10),l.Yb("ngModelChange",function(t){return e.dd=t})("dateSelect",function(){return e.onDateChange()})("click",function(){return l.qc(t),l.pc(12).toggle()}),l.Nb(),l.Ob(13,"div",11),l.Yb("click",function(){return l.qc(t),l.pc(12).toggle()}),l.Ob(14,"div",8),l.Kb(15,"i",12),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(16,"div",4),l.Ob(17,"div",13),l.Ob(18,"div",7),l.Ob(19,"div",8),l.yc(20,"Type"),l.Nb(),l.Nb(),l.Ob(21,"select",14),l.Yb("ngModelChange",function(t){return e.reportType=t})("change",function(){return e.onTypeChange()}),l.Ob(22,"option",15),l.yc(23," Today's Sells "),l.Nb(),l.Ob(24,"option",16),l.yc(25," Journey Date "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(26,"div",17),l.Ob(27,"div",13),l.Ob(28,"div",7),l.Ob(29,"div",8),l.yc(30,"Filter"),l.Nb(),l.Nb(),l.Ob(31,"select",18),l.Yb("change",function(t){return e.onFilterChange(t.target.value)}),l.Ob(32,"option",19),l.yc(33," All "),l.Nb(),l.Ob(34,"option",20),l.yc(35," Hotelswave "),l.Nb(),l.Ob(36,"option",21),l.yc(37," Ship Admin "),l.Nb(),l.Ob(38,"option",22),l.yc(39," SHip Agent "),l.Nb(),l.Ob(40,"option",23),l.yc(41," Hotelswave Agent "),l.Nb(),l.Ob(42,"option",24),l.yc(43," Super Sell "),l.Nb(),l.Ob(44,"option",25),l.yc(45," User "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(46,"div",4),l.Ob(47,"button",26),l.Yb("click",function(){return e.onPrint()}),l.Kb(48,"i",27),l.yc(49," Print "),l.Nb(),l.Nb(),l.Nb(),l.Ob(50,"div",28),l.Ob(51,"div",29),l.wc(52,D,4,2,"ng-container",30),l.wc(53,A,1,0,"ng-template",null,31,l.xc),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=l.pc(54);l.xb(11),l.hc("ngModel",e.dd),l.xb(10),l.hc("ngModel",e.reportType),l.xb(31),l.hc("ngIf",!e.loading)("ngIfElse",t)}},directives:[c.e,b.b,b.k,b.n,b.s,b.o,b.u,d.n,N,f.a],styles:[""]}),t})();var R=i("Fif/");function B(t,e){if(1&t&&(l.Ob(0,"div"),l.Kb(1,"report-table",26),l.Nb()),2&t){const t=l.ac(2);l.xb(1),l.hc("type",t.reportType)("date",t.dd)("reportList",t.serviceAdminSellsReportList)}}function C(t,e){1&t&&(l.Ob(0,"h4",27),l.Kb(1,"i",28),l.yc(2," No record yet"),l.Nb())}function L(t,e){if(1&t&&(l.Mb(0),l.wc(1,B,2,3,"div",23),l.wc(2,C,3,0,"ng-template",null,25,l.xc),l.Lb()),2&t){const t=l.pc(3),e=l.ac();l.xb(1),l.hc("ngIf",e.serviceAdminSellsReportList.length>0)("ngIfElse",t)}}function k(t,e){1&t&&l.Kb(0,"loading")}let T=(()=>{class t{constructor(t){this.reportService=t,this.loading=!1,this.reportType="Sells",this.serviceAdminSellsReportList=[]}ngOnInit(){let t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}onTypeChange(){this.onLoad()}onDateChange(){this.onLoad()}onPrint(){window.print()}onSelectShip(t){this.ship=t,this.getAdminReservationReportByShipId(this.ship.id,this.dd)}onLoad(){if(this.ship&&null!=this.ship.id)switch(this.reportType){case"Reservation":this.getAdminReservationReportByShipId(this.ship.id,this.dd);break;case"Sells":this.getAdminSellsReportByShipId(this.ship.id,this.dd)}}getAdminReservationReportByShipId(t,{year:e,month:i,day:n}){return Object(s.a)(this,void 0,void 0,function*(){const o=`${e}-${i=i<10?"0"+i:i}-${n=n<10?"0"+n:n}`;try{this.loading=!0,this.serviceAdminSellsReportList=yield this.reportService.getAdminReservationReportByShipId(o,t).toPromise(),this.calculateServiceAdminBookingReportList(),this.loading=!1}catch(s){console.log(s)}})}getAdminSellsReportByShipId(t,{year:e,month:i,day:n}){return Object(s.a)(this,void 0,void 0,function*(){const o=`${e}-${i=i<10?"0"+i:i}-${n=n<10?"0"+n:n}`;try{this.loading=!0,this.serviceAdminSellsReportList=yield this.reportService.getAdminSellsReportByShipId(o,t).toPromise(),this.calculateServiceAdminBookingReportList(),this.loading=!1}catch(s){console.log(s)}})}calculateServiceAdminBookingReportList(){this.total={totalrent:0,totalAdvance:0,totalDue:0},this.serviceAdminSellsReportList.forEach(t=>{this.total.totalrent+=t.price})}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(r.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-hotel-report"]],decls:37,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-2","d-print-none"],[3,"ship"],[1,"col-md-10"],[1,"row","d-print-none"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf","ngIfElse"],["showLoading",""],["noRecord",""],[3,"type","date","reportList"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",0),l.Ob(1,"span",1),l.yc(2,"Ship Report"),l.Nb(),l.Nb(),l.Ob(3,"div",0),l.Ob(4,"div",2),l.Ob(5,"div",3),l.Ob(6,"admin-ship-list",4),l.Yb("ship",function(t){return e.onSelectShip(t)}),l.Nb(),l.Nb(),l.Ob(7,"div",5),l.Ob(8,"div",6),l.Ob(9,"div",7),l.Ob(10,"div",8),l.Ob(11,"div",9),l.Ob(12,"div",10),l.Ob(13,"div",11),l.yc(14," Date : "),l.Nb(),l.Nb(),l.Ob(15,"input",12,13),l.Yb("ngModelChange",function(t){return e.dd=t})("dateSelect",function(){return e.onDateChange()})("click",function(){return l.qc(t),l.pc(16).toggle()}),l.Nb(),l.Ob(17,"div",14),l.Yb("click",function(){return l.qc(t),l.pc(16).toggle()}),l.Ob(18,"div",11),l.Kb(19,"i",15),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(20,"div",7),l.Ob(21,"div",16),l.Ob(22,"div",10),l.Ob(23,"div",11),l.yc(24,"Type"),l.Nb(),l.Nb(),l.Ob(25,"select",17),l.Yb("ngModelChange",function(t){return e.reportType=t})("change",function(){return e.onTypeChange()}),l.Ob(26,"option",18),l.yc(27," Sells "),l.Nb(),l.Ob(28,"option",19),l.yc(29," Reservation "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(30,"div",20),l.Ob(31,"button",21),l.Yb("click",function(){return e.onPrint()}),l.Kb(32,"i",22),l.yc(33," Print "),l.Nb(),l.Nb(),l.Nb(),l.wc(34,L,4,2,"ng-container",23),l.wc(35,k,1,0,"ng-template",null,24,l.xc),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=l.pc(36);l.xb(15),l.hc("ngModel",e.dd),l.xb(10),l.hc("ngModel",e.reportType),l.xb(9),l.hc("ngIf",!e.loading)("ngIfElse",t)}},directives:[R.a,c.e,b.b,b.k,b.n,b.s,b.o,b.u,d.n,N,f.a],styles:[""]}),t})();var M=i("B01t");function I(t,e){if(1&t&&(l.Ob(0,"tr"),l.Ob(1,"td"),l.yc(2),l.Nb(),l.Ob(3,"td"),l.yc(4),l.bc(5,"date"),l.Nb(),l.Ob(6,"td"),l.yc(7),l.Nb(),l.Ob(8,"td"),l.yc(9),l.Nb(),l.Ob(10,"td"),l.yc(11),l.Nb(),l.Ob(12,"td",24),l.yc(13),l.Nb(),l.Nb()),2&t){const t=e.$implicit,i=e.index;l.xb(2),l.zc(i+1),l.xb(2),l.zc(l.dc(5,6,t.date,"MMM d, y")),l.xb(3),l.zc(t.shipNumber),l.xb(2),l.zc(t.shipName),l.xb(2),l.zc(t.totalNumberOfSeat),l.xb(2),l.zc(t.totalFare)}}function P(t,e){if(1&t&&(l.Ob(0,"div"),l.Ob(1,"h3",21),l.yc(2),l.bc(3,"date"),l.bc(4,"date"),l.Nb(),l.Ob(5,"table",22),l.Ob(6,"thead"),l.Ob(7,"tr"),l.Ob(8,"th"),l.yc(9,"Sl."),l.Nb(),l.Ob(10,"th"),l.yc(11,"Date"),l.Nb(),l.Ob(12,"th"),l.yc(13,"Ship Number"),l.Nb(),l.Ob(14,"th"),l.yc(15,"Ship Name"),l.Nb(),l.Ob(16,"th"),l.yc(17,"Total Number Of Seat"),l.Nb(),l.Ob(18,"th"),l.yc(19,"Total Fare"),l.Nb(),l.Nb(),l.Nb(),l.Ob(20,"tbody"),l.wc(21,I,14,9,"tr",23),l.Nb(),l.Ob(22,"tfoot"),l.Ob(23,"tr"),l.Kb(24,"td"),l.Kb(25,"td"),l.Kb(26,"td"),l.Kb(27,"td"),l.Ob(28,"th",24),l.yc(29,"TOTAL"),l.Nb(),l.Ob(30,"td",24),l.yc(31),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&t){const t=l.ac(2);l.xb(2),l.Cc(" ",t.reportType," report for date of : ",l.dc(3,5,t.daterange.checkinDate," d MMM y")," to ",l.dc(4,8,t.daterange.checkoutDate," d MMM y")," "),l.xb(19),l.hc("ngForOf",t.serviceAdminSellsReportRangeList),l.xb(10),l.zc(t.total)}}function z(t,e){1&t&&(l.Ob(0,"h4",21),l.Kb(1,"i",25),l.yc(2," No record yet "),l.Nb())}function F(t,e){if(1&t&&(l.Mb(0),l.wc(1,P,32,11,"div",18),l.wc(2,z,3,0,"ng-template",null,20,l.xc),l.Lb()),2&t){const t=l.pc(3),e=l.ac();l.xb(1),l.hc("ngIf",e.serviceAdminSellsReportRangeList.length>0)("ngIfElse",t)}}function K(t,e){1&t&&l.Kb(0,"loading")}let Y=(()=>{class t{constructor(t){this.reportService=t,this.daterange={},this.reportType="Sell",this.serviceAdminSellsReportRangeList=[],this.loading=!1}ngOnInit(){this.setDateRanges(),this.onReportTypeChange(this.reportType)}setDateRanges(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date;const t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);const e=new Date;e.setDate(this.daterange.checkinDate.getDate()+12),this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}}selectedDate(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onReportTypeChange(this.reportType)}onReportTypeChange(t){switch(this.reportType=t,this.reportType){case"Sell":this.getAdminSellsgReportRange(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getAdminReservationReportRange(this.daterange.checkinDate,this.daterange.checkoutDate)}}getAdminReservationReportRange(t,e){return Object(s.a)(this,void 0,void 0,function*(){const i=this.getDateString(t),n=this.getDateString(e);try{this.loading=!0,this.serviceAdminSellsReportRangeList=yield this.reportService.getAdminReservationRangeReport(i,n).toPromise(),this.calculateServiceAdminBookingReportList(),this.loading=!1}catch(o){console.log(o)}})}getAdminSellsgReportRange(t,e){return Object(s.a)(this,void 0,void 0,function*(){let i=this.getDateString(t),n=this.getDateString(e);try{this.loading=!0,this.serviceAdminSellsReportRangeList=yield this.reportService.getAdminSellsReportRange(i,n).toPromise(),this.calculateServiceAdminBookingReportList(),this.loading=!1}catch(o){console.log(o)}})}calculateServiceAdminBookingReportList(){this.total=0,this.serviceAdminSellsReportRangeList.forEach(t=>{this.total+=t.totalFare})}getDateString(t){const e=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,i=t.getDate()<10?"0"+t.getDate():t.getDate();return t.getFullYear()+"-"+e+"-"+i}onPrint(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(r.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-sells-report-range"]],decls:26,vars:5,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-auto"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-sm",3,"ngClass","click"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf","ngIfElse"],["showLoading",""],["noRecord",""],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(l.Ob(0,"div",0),l.Ob(1,"span",1),l.yc(2," Sells Report Range "),l.Nb(),l.Nb(),l.Ob(3,"div",2),l.Ob(4,"div",3),l.Ob(5,"div",4),l.Ob(6,"div",5),l.Ob(7,"div",6),l.Ob(8,"div",7),l.Kb(9,"i",8),l.Nb(),l.Nb(),l.Ob(10,"input",9),l.Yb("selected",function(t){return e.selectedDate(t)}),l.Nb(),l.Nb(),l.Nb(),l.Ob(11,"div",10),l.Ob(12,"div",11),l.Ob(13,"a",12),l.Yb("click",function(){return e.onReportTypeChange("Sell")}),l.yc(14,"Sells"),l.Nb(),l.Ob(15,"a",12),l.Yb("click",function(){return e.onReportTypeChange("Reserve")}),l.yc(16,"Journey Date"),l.Nb(),l.Nb(),l.Nb(),l.Ob(17,"div",13),l.Ob(18,"button",14),l.Yb("click",function(){return e.onPrint()}),l.Kb(19,"i",15),l.yc(20," Print "),l.Nb(),l.Nb(),l.Nb(),l.Ob(21,"div",16),l.Ob(22,"div",17),l.wc(23,F,4,2,"ng-container",18),l.wc(24,K,1,0,"ng-template",null,19,l.xc),l.Nb(),l.Nb(),l.Nb()),2&t){const t=l.pc(25);l.xb(10),l.hc("options",e.options),l.xb(3),l.hc("ngClass","Sell"==e.reportType?"btn-primary text-white":"btn-light"),l.xb(2),l.hc("ngClass","Reserve"==e.reportType?"btn-primary text-white":"btn-light"),l.xb(8),l.hc("ngIf",!e.loading)("ngIfElse",t)}},directives:[M.b,d.l,d.n,d.m,f.a],pipes:[d.e],styles:[""]}),t})();var E=i("HymT"),U=i("/7iW");function $(t,e){if(1&t&&(l.Ob(0,"option",28),l.yc(1),l.Nb()),2&t){const t=e.$implicit;l.hc("value",t.id),l.xb(1),l.Bc(" ",t.name,"[",t.phoneNumber,"] ")}}function j(t,e){if(1&t&&(l.Ob(0,"option",28),l.yc(1),l.Nb()),2&t){const t=e.$implicit;l.hc("value",t.id),l.xb(1),l.Bc(" ",t.shipNumber,"-",t.name," ")}}function H(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div",29),l.Ob(1,"button",30),l.Yb("click",function(){return l.qc(t),l.ac().onSearch()}),l.yc(2,"Search"),l.Nb(),l.Nb()}}function J(t,e){if(1&t&&(l.Ob(0,"span"),l.yc(1),l.Nb()),2&t){const t=e.$implicit;l.xb(1),l.Ac("",t,", ")}}function q(t,e){if(1&t&&(l.Ob(0,"tr"),l.Ob(1,"td"),l.yc(2),l.Nb(),l.Ob(3,"td"),l.yc(4),l.Nb(),l.Ob(5,"td"),l.yc(6),l.bc(7,"date"),l.Nb(),l.Ob(8,"td"),l.yc(9),l.bc(10,"date"),l.Nb(),l.Ob(11,"td"),l.yc(12),l.Nb(),l.Ob(13,"td"),l.wc(14,J,2,1,"span",37),l.Nb(),l.Ob(15,"td"),l.yc(16),l.Nb(),l.Ob(17,"td"),l.yc(18),l.Nb(),l.Ob(19,"td"),l.yc(20),l.Nb(),l.Ob(21,"td"),l.yc(22),l.Nb(),l.Ob(23,"td"),l.yc(24),l.Nb(),l.Nb()),2&t){const t=e.$implicit,i=e.index;l.xb(2),l.zc(i+1),l.xb(2),l.zc(t.bookingId),l.xb(2),l.zc(l.dc(7,12,t.bookingDate,"MMM d, y, h:mm:ss a")),l.xb(3),l.zc(l.cc(10,15,t.journeyDate)),l.xb(3),l.Bc("",t.customerName," - ",t.customerPhone,""),l.xb(2),l.hc("ngForOf",t.seatNumbers),l.xb(2),l.zc(t.price),l.xb(2),l.Ac("",t.hotelswaveCommission+t.hotelswaveAgentCommission+t.shipAgentCommission," "),l.xb(2),l.zc(t.shipNumber),l.xb(2),l.zc(t.soldBy),l.xb(2),l.zc(t.bookingStatus)}}function _(t,e){if(1&t&&(l.Ob(0,"tr"),l.Ob(1,"td"),l.yc(2),l.Nb(),l.Ob(3,"td"),l.yc(4),l.Nb(),l.Ob(5,"td"),l.yc(6),l.Nb(),l.Ob(7,"td"),l.yc(8),l.Nb(),l.Ob(9,"td"),l.yc(10),l.Nb(),l.Ob(11,"td"),l.yc(12),l.Nb(),l.Nb()),2&t){const t=e.$implicit;l.xb(2),l.zc(t.key),l.xb(2),l.zc(t.value.totalSeatNumber),l.xb(2),l.zc(t.value.price),l.xb(2),l.zc(t.value.hotelswaveCommission),l.xb(2),l.zc(t.value.hotelswaveAgentCommission),l.xb(2),l.zc(t.value.shipAgentCommission)}}function G(t,e){if(1&t&&(l.Ob(0,"div",33),l.Ob(1,"div",34),l.Ob(2,"h4",35),l.yc(3),l.bc(4,"date"),l.bc(5,"date"),l.Nb(),l.Nb(),l.Ob(6,"table",36),l.Ob(7,"thead"),l.Ob(8,"tr"),l.Ob(9,"th"),l.yc(10,"Sl."),l.Nb(),l.Ob(11,"th"),l.yc(12,"Ticket no."),l.Nb(),l.Ob(13,"th"),l.yc(14,"Sells Date"),l.Nb(),l.Ob(15,"th"),l.yc(16,"Journey Date"),l.Nb(),l.Ob(17,"th"),l.yc(18,"Passenger Info"),l.Nb(),l.Ob(19,"th"),l.yc(20,"Seats"),l.Nb(),l.Ob(21,"th"),l.yc(22,"Price"),l.Nb(),l.Ob(23,"th"),l.yc(24,"Commission"),l.Nb(),l.Ob(25,"th"),l.yc(26,"Route"),l.Nb(),l.Ob(27,"th"),l.yc(28,"Sold By"),l.Nb(),l.Ob(29,"th"),l.yc(30,"Status"),l.Nb(),l.Nb(),l.Nb(),l.Ob(31,"tbody"),l.wc(32,q,25,17,"tr",37),l.Nb(),l.Ob(33,"tfoot"),l.Ob(34,"tr"),l.Kb(35,"td"),l.Kb(36,"td"),l.Kb(37,"td"),l.Kb(38,"td"),l.Kb(39,"td"),l.Ob(40,"td"),l.yc(41,"TOTAL"),l.Nb(),l.Ob(42,"td"),l.Ob(43,"strong"),l.yc(44),l.Nb(),l.Nb(),l.Ob(45,"td"),l.Ob(46,"strong"),l.yc(47),l.Nb(),l.Nb(),l.Kb(48,"td"),l.Kb(49,"td"),l.Kb(50,"td"),l.Nb(),l.Nb(),l.Nb(),l.Ob(51,"table",38),l.Ob(52,"tr"),l.Ob(53,"th"),l.yc(54,"Counter Name"),l.Nb(),l.Ob(55,"th"),l.yc(56,"No of seat sold / Reserved"),l.Nb(),l.Ob(57,"th"),l.yc(58,"Price"),l.Nb(),l.Ob(59,"th"),l.yc(60,"Hotelswave Commission"),l.Nb(),l.Ob(61,"th"),l.yc(62,"Hotelswave Agent Commission"),l.Nb(),l.Ob(63,"th"),l.yc(64,"Ship Agent Commission"),l.Nb(),l.Nb(),l.wc(65,_,13,6,"tr",37),l.bc(66,"keyvalue"),l.Nb(),l.Nb()),2&t){const t=l.ac(2);l.xb(3),l.Dc("",t.reportType," report of ",t.counter.name," from ",l.cc(4,10,t.daterange.startDate)," to ",l.cc(5,12,t.daterange.endDate)," for ",t.ship.shipNumber,"-",t.ship.name,""),l.xb(29),l.hc("ngForOf",t.reportList),l.xb(12),l.Ac(" ",t.total.totalrent," "),l.xb(3),l.zc(t.total.totalCommission),l.xb(18),l.hc("ngForOf",l.cc(66,14,t.soldBy))}}function V(t,e){1&t&&(l.Ob(0,"h4",35),l.Kb(1,"i",39),l.yc(2," No record yet "),l.Nb())}function X(t,e){if(1&t&&(l.Mb(0),l.wc(1,G,67,16,"div",31),l.wc(2,V,3,0,"ng-template",null,32,l.xc),l.Lb()),2&t){const t=l.pc(3),e=l.ac();l.xb(1),l.hc("ngIf",e.reportList&&e.reportList.length>0)("ngIfElse",t)}}function W(t,e){1&t&&l.Kb(0,"loading")}function Z(t,e){1&t&&l.Kb(0,"loading")}function Q(t,e){if(1&t&&(l.Ob(0,"tr"),l.Ob(1,"td"),l.yc(2),l.Nb(),l.Ob(3,"td"),l.yc(4),l.Nb(),l.Ob(5,"td"),l.yc(6),l.Nb(),l.Nb()),2&t){const t=e.$implicit;l.xb(2),l.zc(t.date),l.xb(2),l.zc(t.booking),l.xb(2),l.zc(t.seat)}}function tt(t,e){if(1&t){const t=l.Pb();l.Ob(0,"div"),l.Ob(1,"table",12),l.Ob(2,"thead"),l.Ob(3,"tr"),l.Ob(4,"th"),l.yc(5,"Date"),l.Nb(),l.Ob(6,"th"),l.yc(7,"Booking count"),l.Nb(),l.Ob(8,"th"),l.yc(9,"Ticket count"),l.Nb(),l.Nb(),l.Nb(),l.Ob(10,"tbody"),l.wc(11,Q,7,3,"tr",13),l.Nb(),l.Ob(12,"tfoot"),l.Ob(13,"tr"),l.Ob(14,"th"),l.yc(15,"Total"),l.Nb(),l.Ob(16,"th"),l.yc(17),l.Nb(),l.Ob(18,"th"),l.yc(19),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(20,"div",14),l.Ob(21,"button",15),l.Yb("click",function(){return l.qc(t),l.ac(2).onPrint()}),l.yc(22,"Print"),l.Nb(),l.Nb(),l.Nb()}if(2&t){const t=l.ac(2);l.xb(11),l.hc("ngForOf",t.reportList.count),l.xb(6),l.zc(t.reportList.totalBooking),l.xb(2),l.zc(t.reportList.totalSeat)}}function et(t,e){if(1&t&&(l.Ob(0,"div",9),l.Ob(1,"h3",10),l.yc(2),l.Nb(),l.wc(3,Z,1,0,"loading",11),l.wc(4,tt,23,3,"div",11),l.Nb()),2&t){const t=l.ac();l.xb(2),l.Bc("Ticket count report for ",t.ship.shipNumber," - ",t.ship.name,""),l.xb(1),l.hc("ngIf",t.loading),l.xb(1),l.hc("ngIf",t.reportList)}}const it=[{path:"sells",component:x},{path:"sells-range",component:Y},{path:"ship",component:T},{path:"counter",component:(()=>{class t{constructor(t,e,i,n){this.userService=t,this.reportService=e,this.util=i,this.shipService=n,this.daterange={},this.reportType="Sells",this.loading=!1,this.soldBy=new Map}ngOnInit(){this.getAllShip(),this.setDateRanges()}setDateRanges(){this.daterange.startDate=new Date,this.daterange.endDate=new Date;const t=new Date;t.setDate(this.daterange.startDate.getDate()-490);const e=new Date;e.setDate(this.daterange.endDate.getDate()+90),this.daterange.startDate.setDate(this.daterange.endDate.getDate()-10),this.daterange.endDate.setDate(this.daterange.endDate.getDate()+10),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedDate(t){this.reportList=null,this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.daterange.label=t.label}onPrint(){window.print()}getAllShip(t=0){return Object(s.a)(this,void 0,void 0,function*(){this.loading=!0;try{const e=yield this.shipService.getAllShip(t).toPromise();this.shipList=e.content,this.shipList.sort(this.util.dynamicSortObject("priority")),this.loading=!1}catch(e){console.log(e)}})}getUserListByRole(t){return Object(s.a)(this,void 0,void 0,function*(){this.reportList=null,this.loading=!0;try{this.userList=yield this.userService.getAdminUserByRole(t).toPromise(),this.userList.sort(this.util.dynamicSortObject("name")),this.loading=!1}catch(e){console.log(e)}})}onCounterChange(t){this.reportList=null,this.counter=this.userList.find(e=>e.id==t)}onShipChange(t){this.reportList=null,this.ship=this.shipList.find(e=>e.id==t)}onSearch(){switch(this.reportType){case"Sells":this.getAdminSellsRangeReport(this.ship.id,this.counter.id,this.daterange.startDate,this.daterange.endDate);break;case"Reservation":this.getAdminReservationRangeReport(this.ship.id,this.counter.id,this.daterange.startDate,this.daterange.endDate)}}getAdminSellsRangeReport(t,e,i,n){return Object(s.a)(this,void 0,void 0,function*(){const o=this.util.getDateString(i),s=this.util.getDateString(n);try{this.loading=!0,this.reportList=yield this.reportService.getAdminSellsReportRangeForIndividual(t,e,o,s).toPromise(),this.calculateServiceAdminBookingReportList(),this.loading=!1}catch(r){console.log(r)}})}getAdminReservationRangeReport(t,e,i,n){return Object(s.a)(this,void 0,void 0,function*(){const o=this.util.getDateString(i),s=this.util.getDateString(n);try{this.loading=!0,this.reportList=yield this.reportService.getAdminReserveReportRangeForIndividual(t,e,o,s).toPromise(),this.calculateServiceAdminBookingReportList(),this.loading=!1}catch(r){console.log(r)}})}calculateServiceAdminBookingReportList(){this.total={totalrent:0,totalAdvance:0,totalDue:0,totalCommission:0},this.soldBy=new Map,this.reportList.forEach(t=>{if(this.total.totalrent+=t.price,this.total.totalCommission+=t.hotelswaveAgentCommission+t.hotelswaveCommission+t.shipAgentCommission,t.soldBy&&t.seatNumbers){const e=null==this.soldBy.get(t.soldBy)?t.hotelswaveCommission:this.soldBy.get(t.soldBy).hotelswaveCommission+t.hotelswaveCommission,i=null==this.soldBy.get(t.soldBy)?t.hotelswaveAgentCommission:this.soldBy.get(t.soldBy).hotelswaveAgentCommission+t.hotelswaveAgentCommission,n=null==this.soldBy.get(t.soldBy)?t.shipAgentCommission:this.soldBy.get(t.soldBy).shipAgentCommission+t.shipAgentCommission,o=null==this.soldBy.get(t.soldBy)?t.seatNumbers.length:this.soldBy.get(t.soldBy).totalSeatNumber+t.seatNumbers.length;let s=0,r=0,a=0;"SEAT_SOLD"==t.bookingStatus?(r=null==this.soldBy.get(t.soldBy)?t.seatNumbers.length:this.soldBy.get(t.soldBy).totalSold+t.seatNumbers.length,s=null==this.soldBy.get(t.soldBy)?t.price:this.soldBy.get(t.soldBy).price+t.price):(a=null==this.soldBy.get(t.soldBy)?t.seatNumbers.length:this.soldBy.get(t.soldBy).totalReserved+t.seatNumbers.length,s=null==this.soldBy.get(t.soldBy)?0:this.soldBy.get(t.soldBy).price),this.soldBy.set(t.soldBy,{totalSold:r,totalReserved:a,price:s,hotelswaveCommission:e,hotelswaveAgentCommission:i,shipAgentCommission:n,totalSeatNumber:o})}})}clear(){this.reportList=null}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(U.a),l.Jb(r.a),l.Jb(a.a),l.Jb(E.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-counter-report"]],decls:58,vars:7,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none","bg-light","shadow-sm"],[1,"col-auto"],[1,"form-group"],["for","counterType"],["id","counterType",1,"form-control",3,"change"],["value",""],["value","admin"],["value","Agent"],["value","Service Admin"],["value","Service Agent"],["for","counter"],[3,"value",4,"ngFor","ngForOf"],["for","dateRange"],["type","text","id","dateRange","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],["for","reportType"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center","ml-auto","mr-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf","ngIfElse"],["showLoding",""],[3,"value"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],["class","row mb-5 mx-2",4,"ngIf","ngIfElse"],["noRecord",""],[1,"row","mb-5","mx-2"],[1,"col-12"],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"table","table-bordered","table-hover","table-responsive-sm","mt-4"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(l.Ob(0,"div",0),l.Ob(1,"span",1),l.yc(2,"Counter Report"),l.Nb(),l.Nb(),l.Ob(3,"div",2),l.Ob(4,"div",3),l.Ob(5,"div",4),l.Ob(6,"div",5),l.Ob(7,"label",6),l.yc(8,"Counter Type"),l.Nb(),l.Ob(9,"select",7),l.Yb("change",function(t){return e.getUserListByRole(t.target.value)}),l.Ob(10,"option",8),l.yc(11," Select a counterType "),l.Nb(),l.Ob(12,"option",9),l.yc(13," Hotelswave "),l.Nb(),l.Ob(14,"option",10),l.yc(15," Hotelswave Agent "),l.Nb(),l.Ob(16,"option",11),l.yc(17," Ship Admin "),l.Nb(),l.Ob(18,"option",12),l.yc(19," Ship Agent "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(20,"div",4),l.Ob(21,"div",5),l.Ob(22,"label",13),l.yc(23,"Counter"),l.Nb(),l.Ob(24,"select",7),l.Yb("change",function(t){return e.onCounterChange(t.target.value)}),l.Ob(25,"option",8),l.yc(26," Select a Counter "),l.Nb(),l.wc(27,$,2,3,"option",14),l.Nb(),l.Nb(),l.Nb(),l.Ob(28,"div",4),l.Ob(29,"div",5),l.Ob(30,"label",15),l.yc(31,"Date Range"),l.Nb(),l.Ob(32,"input",16),l.Yb("selected",function(t){return e.selectedDate(t)}),l.Nb(),l.Nb(),l.Nb(),l.Ob(33,"div",4),l.Ob(34,"label",17),l.yc(35,"Report Type"),l.Nb(),l.Ob(36,"div",18),l.Ob(37,"select",19),l.Yb("ngModelChange",function(t){return e.reportType=t})("change",function(){return e.clear()}),l.Ob(38,"option",20),l.yc(39," By Sells "),l.Nb(),l.Ob(40,"option",21),l.yc(41," By Journey Date "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(42,"div",4),l.Ob(43,"div",5),l.Ob(44,"label",13),l.yc(45,"Ship"),l.Nb(),l.Ob(46,"select",7),l.Yb("change",function(t){return e.onShipChange(t.target.value)}),l.Ob(47,"option",8),l.yc(48," Select a Ship "),l.Nb(),l.wc(49,j,2,3,"option",14),l.Nb(),l.Nb(),l.Nb(),l.wc(50,H,3,0,"div",22),l.Ob(51,"div",23),l.Ob(52,"button",24),l.Yb("click",function(){return e.onPrint()}),l.Kb(53,"i",25),l.yc(54," Print"),l.Nb(),l.Nb(),l.Nb(),l.wc(55,X,4,2,"ng-container",26),l.wc(56,W,1,0,"ng-template",null,27,l.xc),l.Nb()),2&t){const t=l.pc(57);l.xb(27),l.hc("ngForOf",e.userList),l.xb(5),l.hc("options",e.options),l.xb(5),l.hc("ngModel",e.reportType),l.xb(12),l.hc("ngForOf",e.shipList),l.xb(1),l.hc("ngIf",!!e.counter&&!!e.ship),l.xb(5),l.hc("ngIf",!e.loading)("ngIfElse",t)}},directives:[b.o,b.u,d.m,M.b,b.s,b.k,b.n,d.n,f.a],pipes:[d.e,d.h],styles:["label[_ngcontent-%COMP%]{margin-bottom:.1rem}"]}),t})()},{path:"ticket-count",component:(()=>{class t{constructor(t,e){this.reportService=t,this.util=e,this.daterange={},this.loading=!1}ngOnInit(){this.setDateRanges()}setDateRanges(){this.daterange.startDate=new Date,this.daterange.endDate=new Date;const t=new Date;t.setDate(this.daterange.endDate.getDate()+90),this.daterange.startDate.setDate(this.daterange.endDate.getDate()-10),this.daterange.endDate.setDate(this.daterange.endDate.getDate()),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},maxDate:t,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedDate(t){this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.daterange.label=t.label,this.ship&&this.getTicketCountReport(this.ship.id,this.daterange.startDate,this.daterange.endDate)}onSelectShip(t){this.ship=t,this.getTicketCountReport(t.id,this.daterange.startDate,this.daterange.endDate)}getTicketCountReport(t,e,i){return Object(s.a)(this,void 0,void 0,function*(){const n=this.util.getDateString(e),o=this.util.getDateString(i);this.reportList=null,this.loading=!0;try{this.reportList=yield this.reportService.getTicketCount(t,n,o).toPromise(),this.loading=!1}catch(s){console.log(s)}})}onPrint(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(r.a),l.Jb(a.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-ticket-count"]],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-2","d-print-none"],[1,"form-group"],["for","dateRange"],["type","text","id","dateRange","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[3,"ship"],["class","col-md-10",4,"ngIf"],[1,"col-md-10"],[1,"text-center"],[4,"ngIf"],[1,"table","table-striped","table-hover","border"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-row-reverse","d-print-none"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(t,e){1&t&&(l.Ob(0,"div",0),l.Ob(1,"span",1),l.yc(2,"Count ticket"),l.Nb(),l.Nb(),l.Ob(3,"div",0),l.Ob(4,"div",2),l.Ob(5,"div",3),l.Ob(6,"div",4),l.Ob(7,"label",5),l.yc(8,"Date Range"),l.Nb(),l.Ob(9,"input",6),l.Yb("selected",function(t){return e.selectedDate(t)}),l.Nb(),l.Nb(),l.Ob(10,"admin-ship-list",7),l.Yb("ship",function(t){return e.onSelectShip(t)}),l.Nb(),l.Nb(),l.wc(11,et,5,4,"div",8),l.Nb(),l.Nb()),2&t&&(l.xb(9),l.hc("options",e.options),l.xb(2),l.hc("ngIf",e.ship))},directives:[M.b,R.a,d.n,f.a,d.m],styles:[""]}),t})()}];let nt=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[o.a,n.e.forChild(it)]]}),t})()},HF3I:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("fXoL");let o=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Db({type:t,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"loader"],[1,"text-center"]],template:function(t,e){1&t&&(n.Ob(0,"div",0),n.yc(1,"Loading..."),n.Nb(),n.Ob(2,"div",1),n.yc(3,"Please wait ..."),n.Nb())},styles:[".loader[_ngcontent-%COMP%]{color:#137b85;font-size:30px;text-indent:-9999em;overflow:hidden;width:1em;height:1em;border-radius:50%;margin:20px auto;position:relative;transform:translateZ(0);-webkit-animation:load6 1.7s ease infinite,round 1.7s ease infinite;animation:load6 1.7s ease infinite,round 1.7s ease infinite}@-webkit-keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@-webkit-keyframes round{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes round{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),t})()},HymT:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i("uWAI"),o=i("tk/3"),s=i("fXoL"),r=i("tyNb");let a=(()=>{class t{constructor(t,e){this.dataSource=t,this.router=e,this.serviceUrl="api/v1/ships",this.serviceAdminUrl="api/v1/admin/ships",this.serviceAdminAgentUrl="api/v1/adminAgent/ships",this.serviceServiceAdminUrl="api/v1/serviceAdmin/ships",this.serviceServiceAgentUrl="api/v1/serviceAgent/ships"}getAllShip(t=0){const e=(new o.c).set("page",t.toString());return this.dataSource.sendRequest("GET",this.serviceUrl,null,!1,e)}getAdminShipPage(t=0){const e=(new o.c).set("page",t.toString());return this.dataSource.sendRequest("GET",this.serviceAdminUrl,null,!0,e)}getAdminShip(t){return this.dataSource.sendRequest("GET",this.serviceAdminUrl+"/"+t,null,!0,null)}saveAdminShip(t){return this.dataSource.sendRequest("POST",this.serviceAdminUrl,t,!0,null)}updateAdminShip(t,e){return this.dataSource.sendRequest("PUT",this.serviceAdminUrl+"/"+t,e,!0,null)}getAdminShipMap(t,e,i){const n=(new o.c).set("startDate",e).set("endDate",i);return this.dataSource.sendRequest("GET",this.serviceAdminUrl+"/shipMap/"+t,null,!0,n)}updateAdminShipMap(t,e,i){const n=(new o.c).set("date",e).set("value",i?"true":"false");return this.dataSource.sendRequest("PUT",this.serviceAdminUrl+"/updateMap/"+t,null,!0,n)}getAdminAgentShips(t=0){const e=(new o.c).set("page",t.toString());return this.dataSource.sendRequest("GET",this.serviceAdminAgentUrl,null,!0,e)}getServiceAdminShips(){return this.dataSource.sendRequest("GET",this.serviceServiceAdminUrl+"/myShips",null,!0,null)}getServiceAgentShips(){return this.dataSource.sendRequest("GET",this.serviceServiceAgentUrl+"/myShips",null,!0,null)}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(n.a),s.Vb(r.b))},t.\u0275prov=s.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},z3bE:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("fXoL");let o=(()=>{class t{constructor(){}getDatesBetween(t,e){const i=new Date(t),n=new Date(e);n.setDate(n.getDate()-1);let o=[];for(;i.getTime()<=n.getTime();){const t=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate();o.push(t),i.setDate(i.getDate()+1)}return o}getDateString(t){const e=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,i=t.getDate()<10?"0"+t.getDate():t.getDate();return t.getFullYear()+"-"+e+"-"+i}getDateStringFromDateObj(t){return t.year+"-"+(t.month<10?"0"+t.month:t.month)+"-"+(t.day<10?"0"+t.day:t.day)}getTimeStringFromTimeObj(t){return t.hour+":"+t.minute}dynamicSortObject(t){let e=t.split("."),i=e.length;if(i<2){var n=1;return"-"===t[0]&&(n=-1,t=t.substr(1)),function(e,i){return(e[t]<i[t]?-1:e[t]>i[t]?1:0)*n}}if(i>=2)return function(t,n){for(var o=0;o<i;)t=t[e[o]],n=n[e[o]],o++;return t<n?-1:t>n?1:0}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);