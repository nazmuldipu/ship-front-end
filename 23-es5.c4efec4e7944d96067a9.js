!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"5ya6":function(e,n,r){"use strict";r.r(n),r.d(n,"ROUTES",function(){return Ot}),r.d(n,"ServiceAgentModule",function(){return xt});var a=r("tyNb"),c=r("mrSG"),o=r("dgus"),s=r("l7+V"),l=r("HymT"),b=r("zdEN"),u=r("brC8"),d=r("z3bE"),g=r("u6mN"),h=r("fXoL"),f=r("ofXK"),p=r("i1jY"),v=r("FDGS"),m=r("1kSV"),k=r("3Pt+"),y=r("8Hrs"),S=r("L00E"),O=r("xOgB"),x=r("aTqc"),N=r("rfY/");function w(t,e){if(1&t){var i=h.Pb();h.Ob(0,"ticket-sukantababu-print",2),h.Yb("close",function(){return h.qc(i),h.ac().onTicketClose()}),h.Nb()}if(2&t){var n=h.ac();h.hc("ticket",n.ticket)}}function C(t,e){if(1&t){var i=h.Pb();h.Ob(0,"tiket-baycruise-print",2),h.Yb("close",function(){return h.qc(i),h.ac().onTicketClose()}),h.Nb()}if(2&t){var n=h.ac();h.hc("ticket",n.ticket)}}function L(t,e){1&t&&h.Kb(0,"app-loading")}function A(t,e){if(1&t){var i=h.Pb();h.Ob(0,"label",46),h.Yb("click",function(){h.qc(i);var t=e.$implicit;return h.ac(5).onSelectCategory(t.id)}),h.yc(1),h.Nb()}if(2&t){var n=e.$implicit,r=h.ac(5);h.hc("ngClass",n.id==r.category.id?"btn-primary":"btn-light"),h.xb(1),h.zc(n.name)}}function D(t,e){if(1&t){var i=h.Pb();h.Ob(0,"seat-plan-other",47),h.Yb("select",function(t){return h.qc(i),h.ac(5).onSeatClick(t)}),h.Nb()}if(2&t){var n=h.ac(5);h.hc("filteredSeatList",n.filteredSeatList)("selectedSeat",n.selectedSeat)("categoryName",null==n.category?null:n.category.name)}}function P(t,e){if(1&t){var i=h.Pb();h.Ob(0,"seat-plan-bay-cruiser",47),h.Yb("select",function(t){return h.qc(i),h.ac(5).onSeatClick(t)}),h.Nb()}if(2&t){var n=h.ac(5);h.hc("filteredSeatList",n.filteredSeatList)("selectedSeat",n.selectedSeat)("categoryName",null==n.category?null:n.category.name)}}function I(t,e){if(1&t){var i=h.Pb();h.Ob(0,"seat-plan-sukanto",47),h.Yb("select",function(t){return h.qc(i),h.ac(5).onSeatClick(t)}),h.Nb()}if(2&t){var n=h.ac(5);h.hc("filteredSeatList",n.filteredSeatList)("selectedSeat",n.selectedSeat)("categoryName",null==n.category?null:n.category.name)}}function M(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div",48),h.Ob(1,"label",49),h.Yb("click",function(){return h.qc(i),h.ac(5).mode="SEAT_SOLD"}),h.yc(2,"Sell"),h.Nb(),h.Ob(3,"label",49),h.Yb("click",function(){return h.qc(i),h.ac(5).mode="SEAT_RESERVED"}),h.yc(4,"Reserve"),h.Nb(),h.Nb()}if(2&t){var n=h.ac(5);h.xb(1),h.hc("ngClass","SEAT_SOLD"==n.mode?"btn-primary":"btn-light"),h.xb(2),h.hc("ngClass","SEAT_RESERVED"==n.mode?"btn-primary":"btn-light")}}function R(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div"),h.Kb(1,"ticket-details",50),h.Ob(2,"user-form",51),h.Yb("create",function(t){return h.qc(i),h.ac(5).onCreateUser(t)}),h.Nb(),h.Nb()}if(2&t){var n=h.ac(5);h.xb(1),h.hc("seatList",n.selectedSeat)}}function E(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div",52),h.yc(1),h.Ob(2,"button",53),h.Yb("click",function(){return h.qc(i),h.ac(5).onClear()}),h.yc(3," Clear "),h.Nb(),h.Nb()}if(2&t){var n=h.ac(5);h.xb(1),h.Ac(" ",n.message," \xa0 ")}}function Y(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div",54),h.yc(1),h.Ob(2,"button",53),h.Yb("click",function(){return h.qc(i),h.ac(5).onClear()}),h.yc(3," Clear "),h.Nb(),h.Nb()}if(2&t){var n=h.ac(5);h.xb(1),h.Ac(" ",n.errorMessage," \xa0 ")}}function B(t,e){1&t&&h.Kb(0,"app-loading")}function _(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div"),h.Ob(1,"div",33),h.Ob(2,"div",34),h.Ob(3,"div",35),h.Ob(4,"div",36),h.wc(5,A,2,2,"label",37),h.Nb(),h.Nb(),h.wc(6,D,1,3,"seat-plan-other",38),h.wc(7,P,1,3,"seat-plan-bay-cruiser",38),h.wc(8,I,1,3,"seat-plan-sukanto",38),h.Nb(),h.Ob(9,"div",39),h.Ob(10,"div",33),h.Ob(11,"div",40),h.wc(12,M,5,2,"div",41),h.Nb(),h.Ob(13,"div",7),h.Ob(14,"button",42),h.Yb("click",function(){return h.qc(i),h.ac(4).closeDetails()}),h.Kb(15,"i",43),h.Nb(),h.Nb(),h.Nb(),h.wc(16,R,3,1,"div",32),h.wc(17,E,4,1,"div",44),h.wc(18,Y,4,1,"div",45),h.wc(19,B,1,0,"app-loading",32),h.Nb(),h.Nb(),h.Nb()}if(2&t){var n=h.ac(2).$implicit,r=h.ac(2);h.xb(5),h.hc("ngForOf",r.categoryList),h.xb(1),h.hc("ngIf","OTHER"==n.shipName),h.xb(1),h.hc("ngIf","BAY_CRUISE"==n.shipName),h.xb(1),h.hc("ngIf","SUKANTO_BABU"==n.shipName),h.xb(4),h.hc("ngIf",r.canReserve),h.xb(4),h.hc("ngIf",!r.dataSending&&r.selectedSeat.length),h.xb(1),h.hc("ngIf",r.message.length),h.xb(1),h.hc("ngIf",r.errorMessage.length),h.xb(1),h.hc("ngIf",r.dataSending)}}function T(t,e){if(1&t&&(h.Ob(0,"div",30),h.Ob(1,"div",31),h.wc(2,L,1,0,"app-loading",32),h.wc(3,_,20,9,"div",32),h.Nb(),h.Nb()),2&t){var i=h.ac(3);h.xb(2),h.hc("ngIf",i.seatLoading),h.xb(1),h.hc("ngIf",i.seatList)}}function q(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div",18),h.Ob(1,"div",19),h.yc(2),h.Kb(3,"br"),h.Ob(4,"span",20),h.yc(5),h.Nb(),h.Nb(),h.Ob(6,"div",21),h.yc(7),h.Kb(8,"br"),h.Ob(9,"span",22),h.Kb(10,"i",23),h.yc(11),h.Nb(),h.Nb(),h.Ob(12,"div",24),h.Ob(13,"div",25),h.yc(14),h.Nb(),h.Nb(),h.Ob(15,"div",26),h.Ob(16,"button",27),h.Yb("click",function(){h.qc(i);var t=e.$implicit;return h.ac(2).onDetails(t.id)}),h.Kb(17,"i",28),h.yc(18," Details "),h.Nb(),h.Nb(),h.wc(19,T,4,2,"div",29),h.Nb()}if(2&t){var n=e.$implicit,r=h.ac(2);h.xb(2),h.Ac(" Ship Name ",n.shipNumber," "),h.xb(3),h.Ac(" ",n.name," "),h.xb(2),h.Cc(" ",r.dd.day,"-",r.dd.month,"-",r.dd.year," "),h.xb(4),h.Ac(" ",n.startTime," "),h.xb(3),h.Bc("",n.startingPoint," - ",n.droppingPoint,""),h.xb(5),h.hc("ngIf",r.detailsId==n.id)}}function F(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div",3),h.Ob(1,"div",4),h.Ob(2,"div",5),h.Yb("click",function(){return h.qc(i),h.ac().adjustDay(-1)}),h.Kb(3,"i",6),h.yc(4," \xa0 "),h.Nb(),h.Ob(5,"div",7),h.Ob(6,"div",8),h.Ob(7,"div",9),h.Ob(8,"div",10),h.Ob(9,"div",11),h.yc(10," Date : "),h.Nb(),h.Nb(),h.Ob(11,"input",12,13),h.Yb("ngModelChange",function(t){return h.qc(i),h.ac().dd=t})("dateSelect",function(){return h.qc(i),h.ac().closeDetails()})("click",function(){return h.qc(i),h.pc(12).toggle()}),h.Nb(),h.Ob(13,"div",14),h.Yb("click",function(){return h.qc(i),h.pc(12).toggle()}),h.Ob(14,"div",11),h.Kb(15,"i",15),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(16,"div",5),h.Yb("click",function(){return h.qc(i),h.ac().adjustDay(1)}),h.yc(17," \xa0 "),h.Kb(18,"i",16),h.Nb(),h.Nb(),h.wc(19,q,20,9,"div",17),h.Nb()}if(2&t){var n=h.ac();h.xb(11),h.hc("ngModel",n.dd)("minDate",n.minDate)("maxDate",n.maxDate),h.xb(8),h.hc("ngForOf",n.ships)}}var K,j=((K=function(){function e(i,n,r,a,c){t(this,e),this.auth=i,this.shipService=n,this.seatService=r,this.bookinService=a,this.utilService=c,this.mode="SEAT_SOLD",this.seatLoading=!1,this.dataSending=!1,this.canReserve=!1,this.message="",this.errorMessage="",this.selectedSeat=[],this.categoryList=[],this.canReserve=this.auth.user.canReserve}return i(e,[{key:"ngOnInit",value:function(){var t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.minDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()-1},this.maxDate={year:t.getFullYear(),month:t.getMonth()+2,day:t.getDate()},this.maxDate.month>12&&(this.maxDate.year+=1,this.maxDate.month-=12),this.getServiceAgentShips()}},{key:"adjustDay",value:function(t){var e=new Date(this.dd.year,this.dd.month-1,this.dd.day+t),i={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},n=new Date(this.minDate.year,this.minDate.month-1,this.minDate.day),r=new Date(this.maxDate.year,this.maxDate.month-1,this.maxDate.day);e.getTime()-n.getTime()>=0&&r.getTime()-e.getTime()>=0&&(this.dd=i,this.closeDetails())}},{key:"getServiceAgentShips",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.shipService.getServiceAgentShips().toPromise();case 3:this.ships=t.sent,this.ships.sort(this.utilService.dynamicSortObject("priority")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}))}},{key:"onDetails",value:function(t){this.closeDetails(),this.detailsId!=t&&(this.detailsId=t,this.getShipAgentSeatList(t))}},{key:"closeDetails",value:function(){this.detailsId=null,this.seatList=[],this.selectedSeat=[],this.filteredSeatList=[]}},{key:"getShipAgentSeatList",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.seatLoading=!0,e.prev=1,e.next=4,this.seatService.getServiceAgentAvailableSeatListByShiplId(t,this.makeDateString(this.dd)).toPromise();case 4:this.seatList=e.sent,this.seatLoading=!1,this.categoryList=[],this.seatList.length>0&&(this.seatList.forEach(function(t){var e=t.category;i.categoryList.find(function(t){return t.id==e.id})||0==e.priority||"Standing"==e.name||i.categoryList.push(e)}),this.categoryList.sort(this.utilService.dynamicSortObject("priority")),this.onSelectCategory(this.categoryList[this.categoryList.length-1].id)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}))}},{key:"makeDateString",value:function(t){return t.year+"-"+(t.month<10?"0"+t.month:t.month)+"-"+(t.day<10?"0"+t.day:t.day)}},{key:"onSelectCategory",value:function(t){this.category=this.categoryList.find(function(e){return e.id==t}),this.selectedSeat=[],this.filterSeatList(t)}},{key:"filterSeatList",value:function(t){var e=this;this.filteredSeatList=[],this.seatList.forEach(function(i){i.category.id==t&&e.filteredSeatList.push(i)})}},{key:"onSeatClick",value:function(t){if(this.selectedSeat.some(function(e){return e.id===t})){var e=this.selectedSeat.findIndex(function(e){return e.id==t});this.selectedSeat.splice(e,1)}else{var i=this.filteredSeatList.find(function(e){return e.id==t});i.available&&this.selectedSeat.length<10&&this.selectedSeat.push(i)}}},{key:"onCreateUser",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,n,r,a,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new b.a(t.name,t.phone),n=this.getSubbookingList(this.selectedSeat),r=new u.a(i,n),a=this.ships.find(function(t){return t.id==c.detailsId}),r.ship=a,r.eStatus=this.mode,this.dataSending=!0,this.message="Sending data to server",e.prev=3,e.next=6,this.bookinService.createServiceAgentBooking(r).toPromise();case 6:this.ticket=e.sent,this.dataSending=!1,this.message="Booking done",this.selectedSeat=[],this.getShipAgentSeatList(this.detailsId),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0.error),this.message="",this.errorMessage=e.t0.error;case 16:case"end":return e.stop()}},e,this,[[3,13]])}))}},{key:"getSubbookingList",value:function(t){var e=this,i=[];return t.forEach(function(t){var n=new u.c(e.makeDateString(e.dd),t);i.push(n)}),i}},{key:"onTicketClose",value:function(){this.ticket=null}},{key:"onClear",value:function(){this.message="",this.errorMessage=""}}]),e}()).\u0275fac=function(t){return new(t||K)(h.Jb(g.a),h.Jb(l.a),h.Jb(s.a),h.Jb(o.a),h.Jb(d.a))},K.\u0275cmp=h.Db({type:K,selectors:[["app-sell"]],decls:3,vars:3,consts:[[3,"ticket","close",4,"ngIf"],["class","container d-print-none",4,"ngIf"],[3,"ticket","close"],[1,"container","d-print-none"],[1,"row","border","my-2","p-2"],[1,"input-group-text","btn","btn-secondary",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","readonly","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],["class","row border py-2 ship-row",4,"ngFor","ngForOf"],[1,"row","border","py-2","ship-row"],[1,"col-md-3","col-6"],[1,"ship-row-name"],[1,"col-md-2","col-6"],[1,"ship-row-startTime"],[1,"fa","fa-clock-o"],[1,"col-md-3","col-6","d-flex","align-items-center","ship-row-route"],[1,""],[1,"col-md-4","col-6","d-flex","flex-row-reverse","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-hand-o-up"],["class","col-12 px-1",4,"ngIf"],[1,"col-12","px-1"],[1,"ship-details"],[4,"ngIf"],[1,"row"],[1,"col-md-6"],[1,"row","m-0"],["role","group",1,"btn-group","border","ml-1"],["type","button","class","btn btn-sm m-0",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"filteredSeatList","selectedSeat","categoryName","select",4,"ngIf"],[1,"col-md-6","mb-3"],[1,"col"],["class","btn-group","role","group",4,"ngIf"],["type","button",1,"ml-auto","btn","btn-sm","btn-danger",2,"border-radius","0",3,"click"],[1,"fa","fa-times"],["class","alert alert-primary",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","button",1,"btn","btn-sm","m-0",3,"ngClass","click"],[3,"filteredSeatList","selectedSeat","categoryName","select"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[3,"seatList"],[3,"create"],[1,"alert","alert-primary"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(h.wc(0,w,1,1,"ticket-sukantababu-print",0),h.wc(1,C,1,1,"tiket-baycruise-print",0),h.wc(2,F,20,4,"div",1)),2&t&&(h.hc("ngIf",e.ticket&&"SUKANTO_BABU"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),h.xb(1),h.hc("ngIf",e.ticket&&"BAY_CRUISE"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),h.xb(1),h.hc("ngIf",!e.ticket))},directives:[f.n,p.a,v.a,m.d,k.b,k.k,k.n,f.m,f.l,y.a,S.a,O.a,x.a,N.a],styles:[".ship-row[_ngcontent-%COMP%]{border:1px solid #d3d3d3;box-shadow:0 .125rem .25rem rgba(0,0,0,.16)!important;margin-bottom:10px}.ship-row-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#000}.ship-row-startTime[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#000}.ship-row-route[_ngcontent-%COMP%]{color:#000}.ship-details[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #0c0266}.seat-box[_ngcontent-%COMP%]{border:1px solid #000;border-radius:4px;cursor:pointer;padding:2px;font-size:12px;text-align:center}.seat-box[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.seat-box.disabled[_ngcontent-%COMP%]{background-color:grey!important;color:#fff;cursor:not-allowed}.selected[_ngcontent-%COMP%]{background-color:#add8e6;color:#fff}"]}),K),U=r("uEz7");function J(t,e){if(1&t){var i=h.Pb();h.Ob(0,"a",11),h.Yb("click",function(){h.qc(i);var t=e.$implicit;return h.ac(2).onBookingDetails(t.id)}),h.Kb(1,"i",12),h.yc(2),h.Nb()}if(2&t){var n=e.$implicit;h.xb(2),h.Cc(" ",n.id," ",n.user.name," [",n.user.phoneNumber,"] ")}}function z(t,e){if(1&t&&(h.Ob(0,"ul",8),h.Ob(1,"li",9),h.Ob(2,"h5"),h.yc(3,"Sells List"),h.Nb(),h.Ob(4,"small"),h.yc(5,"Choose a sell from below list"),h.Nb(),h.Nb(),h.wc(6,J,3,3,"a",10),h.Nb()),2&t){var i=h.ac();h.xb(6),h.hc("ngForOf",null==i.bookingPage?null:i.bookingPage.content)}}function $(t,e){1&t&&h.Kb(0,"app-loading")}function V(t,e){if(1&t){var i=h.Pb();h.Ob(0,"pagination",13),h.Yb("getPage",function(t){return h.qc(i),h.ac().getServiceAgentBooking(t)}),h.Nb()}if(2&t){var n=h.ac();h.hc("page",n.bookingPage)("short",n.short)}}function H(t,e){if(1&t){var i=h.Pb();h.Ob(0,"ticket-sukantababu-print",14),h.Yb("close",function(){return h.qc(i),h.ac().onTicketClose()}),h.Nb()}if(2&t){var n=h.ac();h.hc("ticket",n.ticket)}}function G(t,e){if(1&t){var i=h.Pb();h.Ob(0,"tiket-baycruise-print",14),h.Yb("close",function(){return h.qc(i),h.ac().onTicketClose()}),h.Nb()}if(2&t){var n=h.ac();h.hc("ticket",n.ticket)}}var X,Z=((X=function(){function e(i,n){t(this,e),this.bookingService=i,this.auth=n,this.short=!0,this.loading=!1}return i(e,[{key:"ngOnInit",value:function(){this.getServiceAgentBooking()}},{key:"getServiceAgentBooking",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.bookingService.getServiceAgentMySells(t).toPromise();case 4:this.bookingPage=e.sent,this.bookingPage.content.forEach(function(t){t.createdBy=i.auth.user}),this.loading=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}))}},{key:"onBookingDetails",value:function(t){this.ticket=this.bookingPage.content.find(function(e){return e.id==t})}},{key:"onTicketClose",value:function(){this.ticket=null}}]),e}()).\u0275fac=function(t){return new(t||X)(h.Jb(o.a),h.Jb(g.a))},X.\u0275cmp=h.Db({type:X,selectors:[["app-my-sells"]],decls:10,vars:5,consts:[[1,"container-fluid"],[1,"row","my-2"],[1,"col-md-2","d-print-none"],["class","list-group",4,"ngIf","ngIfElse"],["showLoading",""],[3,"page","short","getPage",4,"ngIf"],[1,"col","p-0"],[3,"ticket","close",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-ticket"],[3,"page","short","getPage"],[3,"ticket","close"]],template:function(t,e){if(1&t&&(h.Ob(0,"div",0),h.Ob(1,"div",1),h.Ob(2,"div",2),h.wc(3,z,7,1,"ul",3),h.wc(4,$,1,0,"ng-template",null,4,h.xc),h.wc(6,V,1,2,"pagination",5),h.Nb(),h.Ob(7,"div",6),h.wc(8,H,1,1,"ticket-sukantababu-print",7),h.wc(9,G,1,1,"tiket-baycruise-print",7),h.Nb(),h.Nb(),h.Nb()),2&t){var i=h.pc(5);h.xb(3),h.hc("ngIf",!e.loading)("ngIfElse",i),h.xb(3),h.hc("ngIf",null!=e.bookingPage),h.xb(2),h.hc("ngIf",e.ticket&&"SUKANTO_BABU"==(null==e.ticket.ship?null:e.ticket.ship.shipName)),h.xb(1),h.hc("ngIf",e.ticket&&"BAY_CRUISE"==(null==e.ticket.ship?null:e.ticket.ship.shipName))}},directives:[f.n,f.m,U.a,p.a,v.a],styles:[""]}),X),Q=r("5Pr4");function W(t,e){if(1&t&&(h.Ob(0,"tr"),h.Ob(1,"td"),h.yc(2),h.Nb(),h.Ob(3,"td"),h.yc(4),h.Nb(),h.Ob(5,"td"),h.yc(6),h.Nb(),h.Ob(7,"td"),h.yc(8),h.Nb(),h.Ob(9,"td",8),h.yc(10),h.bc(11,"currency"),h.Nb(),h.Nb()),2&t){var i=e.$implicit;h.xb(2),h.zc(i.date),h.xb(2),h.zc(i.explanation),h.xb(2),h.zc(i.debit),h.xb(2),h.zc(i.credit),h.xb(2),h.Ac(" ",h.ec(11,5,i.balance,"BDT ","symbol","4.2-2")," ")}}function tt(t,e){if(1&t){var i=h.Pb();h.Ob(0,"pagination",12),h.Yb("getPage",function(t){return h.qc(i),h.ac(2).getShipAdminAgentLedger(t)}),h.Nb()}if(2&t){var n=h.ac(2);h.hc("page",n.shipAgentLedger)}}function et(t,e){if(1&t&&(h.Ob(0,"table",7),h.Ob(1,"thead"),h.Ob(2,"tr"),h.Ob(3,"th"),h.yc(4,"Date"),h.Nb(),h.Ob(5,"th"),h.yc(6,"Explanation"),h.Nb(),h.Ob(7,"th"),h.yc(8,"Debit"),h.Nb(),h.Ob(9,"th"),h.yc(10,"Credit"),h.Nb(),h.Ob(11,"th",8),h.yc(12,"Balance"),h.Nb(),h.Nb(),h.Nb(),h.Ob(13,"tbody"),h.wc(14,W,12,10,"tr",9),h.Nb(),h.Ob(15,"tfoot"),h.Ob(16,"tr"),h.Ob(17,"td",10),h.wc(18,tt,1,1,"pagination",11),h.Nb(),h.Nb(),h.Nb(),h.Nb()),2&t){var i=h.ac();h.xb(14),h.hc("ngForOf",i.shipAgentLedger.content),h.xb(4),h.hc("ngIf",null!=i.shipAgentLedger)}}var it,nt,rt=((nt=function(){function e(i){t(this,e),this.accountingSrvice=i}return i(e,[{key:"ngOnInit",value:function(){this.getShipAdminAgentLedger()}},{key:"getShipAdminAgentLedger",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.accountingSrvice.getShipAdminAgentLedger(t).toPromise();case 3:this.shipAgentLedger=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}))}}]),e}()).\u0275fac=function(t){return new(t||nt)(h.Jb(Q.a))},nt.\u0275cmp=h.Db({type:nt,selectors:[["app-my-ledger"]],decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],[1,"col-md-2","d-print-none"],[1,"col-md-10"],["class","table border table-responsive-sm",4,"ngIf"],[1,"table","border","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5"],[3,"page","getPage",4,"ngIf"],[3,"page","getPage"]],template:function(t,e){1&t&&(h.Ob(0,"div",0),h.Ob(1,"span",1),h.yc(2,"SHIP AGENT BALANCE"),h.Nb(),h.Nb(),h.Ob(3,"div",2),h.Ob(4,"div",3),h.Kb(5,"div",4),h.Ob(6,"div",5),h.wc(7,et,19,2,"table",6),h.Nb(),h.Nb(),h.Nb()),2&t&&(h.xb(7),h.hc("ngIf",e.shipAgentLedger))},directives:[f.n,f.m,U.a],pipes:[f.c],styles:[""]}),nt),at=((it=function(){function e(i){t(this,e),this.accountingSrvice=i}return i(e,[{key:"ngOnInit",value:function(){this.getServiceAdminAgentBalance()}},{key:"getServiceAdminAgentBalance",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.accountingSrvice.getServiceAdminAgentBalance().toPromise();case 3:e=t.sent,this.balance=e.response,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}))}}]),e}()).\u0275fac=function(t){return new(t||it)(h.Jb(Q.a))},it.\u0275cmp=h.Db({type:it,selectors:[["app-my-balance"]],decls:6,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"text-center"]],template:function(t,e){1&t&&(h.Ob(0,"div",0),h.Ob(1,"span",1),h.yc(2,"SHIP AGENT BALANCE"),h.Nb(),h.Nb(),h.Ob(3,"div",2),h.Ob(4,"h3",3),h.yc(5),h.Nb(),h.Nb()),2&t&&(h.xb(5),h.Ac("My balance is : ",e.balance,"BDT"))},styles:[""]}),it),ct=r("KZX/"),ot=r("dR/p"),st=r("dmtF");function lt(t,e){if(1&t){var i=h.Pb();h.Ob(0,"a",18),h.Yb("click",function(){h.qc(i);var t=e.$implicit;return h.ac().onSelectShip(t)}),h.Kb(1,"i",19),h.yc(2),h.Nb()}if(2&t){var n=e.$implicit;h.xb(2),h.Bc(" ",n.shipNumber,"-",n.name," ")}}function bt(t,e){if(1&t){var i=h.Pb();h.Ob(0,"label",28),h.Yb("click",function(){h.qc(i);var t=e.$implicit;return h.ac(2).onSelectCategory(t)}),h.yc(1),h.Nb()}if(2&t){var n=e.$implicit,r=h.ac(2);h.hc("ngClass",n.name==r.category.name?"btn-primary":"btn-light"),h.xb(1),h.zc(n.name)}}function ut(t,e){if(1&t){var i=h.Pb();h.Ob(0,"seat-status-bay-cruiser",29),h.Yb("select",function(t){return h.qc(i),h.ac(2).onSeatClick(t)}),h.Nb()}if(2&t){var n=h.ac(2);h.hc("filteredSeatList",n.filteredSeatList)("categoryName",n.category.name)}}function dt(t,e){if(1&t){var i=h.Pb();h.Ob(0,"seat-status-sukanto",29),h.Yb("select",function(t){return h.qc(i),h.ac(2).onSeatClick(t)}),h.Nb()}if(2&t){var n=h.ac(2);h.hc("filteredSeatList",n.filteredSeatList)("categoryName",n.category.name)}}function gt(t,e){1&t&&(h.Ob(0,"div",30),h.Ob(1,"div",31),h.Kb(2,"div",32),h.yc(3," Blocked "),h.Nb(),h.Ob(4,"div",31),h.Kb(5,"div",33),h.yc(6," Reserved "),h.Nb(),h.Ob(7,"div",31),h.Kb(8,"div",34),h.yc(9," Sold "),h.Nb(),h.Ob(10,"div",31),h.Kb(11,"div",35),h.yc(12," Free "),h.Nb(),h.Nb())}function ht(t,e){if(1&t&&(h.Ob(0,"div",20),h.Ob(1,"h4"),h.yc(2),h.Nb(),h.Ob(3,"div",21),h.Ob(4,"div",22),h.wc(5,bt,2,2,"label",23),h.Nb(),h.Nb(),h.Ob(6,"div",3),h.Ob(7,"div",24),h.wc(8,ut,1,2,"seat-status-bay-cruiser",25),h.wc(9,dt,1,2,"seat-status-sukanto",25),h.Nb(),h.Ob(10,"div",26),h.wc(11,gt,13,0,"div",27),h.Nb(),h.Nb(),h.Nb()),2&t){var i=h.ac();h.xb(2),h.Bc("",null==i.ship?null:i.ship.shipNumber,"-",null==i.ship?null:i.ship.name," Seat status"),h.xb(3),h.hc("ngForOf",i.categoryList),h.xb(3),h.hc("ngIf","BAY_CRUISE"==i.ship.shipName),h.xb(1),h.hc("ngIf","SUKANTO_BABU"==i.ship.shipName),h.xb(2),h.hc("ngIf",null==i.filteredSeatList?null:i.filteredSeatList.length)}}function ft(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div",42),h.Ob(1,"strong"),h.yc(2,"Error!"),h.Nb(),h.yc(3),h.Ob(4,"button",43),h.Yb("click",function(){return h.qc(i),h.ac(2).onClear()}),h.Ob(5,"span",44),h.yc(6,"\xd7"),h.Nb(),h.Nb(),h.Nb()}if(2&t){var n=h.ac(2);h.xb(3),h.Ac(" ",n.errorMessage," ")}}function pt(t,e){if(1&t){var i=h.Pb();h.Ob(0,"ticket-sukantababu-print",45),h.Yb("close",function(){return h.qc(i),h.ac(2).onClear()}),h.Nb()}if(2&t){var n=h.ac(2);h.hc("ticket",n.ticket)("short",n.shortTicket)}}function vt(t,e){if(1&t){var i=h.Pb();h.Ob(0,"tiket-baycruise-print",45),h.Yb("close",function(){return h.qc(i),h.ac(2).onClear()}),h.Nb()}if(2&t){var n=h.ac(2);h.hc("ticket",n.ticket)("short",n.shortTicket)}}function mt(t,e){if(1&t){var i=h.Pb();h.Ob(0,"button",46),h.Yb("click",function(){h.qc(i);var t=h.ac(2);return t.onConfirmReservation(t.ticket.id)}),h.yc(1," Confirm Reservation "),h.Nb()}}function kt(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div",36),h.wc(1,ft,7,1,"div",37),h.wc(2,pt,1,2,"ticket-sukantababu-print",38),h.wc(3,vt,1,2,"tiket-baycruise-print",38),h.Ob(4,"div",39),h.Ob(5,"button",40),h.Yb("click",function(){h.qc(i);var t=h.ac();return t.onCancelBooking(t.ticket.id,t.ticket.eStatus)}),h.yc(6),h.Nb(),h.wc(7,mt,2,0,"button",41),h.Nb(),h.Nb()}if(2&t){var n=h.ac();h.xb(1),h.hc("ngIf",n.errorMessage.length>0),h.xb(1),h.hc("ngIf",n.ticket&&"SUKANTO_BABU"==(null==n.ticket.ship?null:n.ticket.ship.shipName)),h.xb(1),h.hc("ngIf",n.ticket&&"BAY_CRUISE"==(null==n.ticket.ship?null:n.ticket.ship.shipName)),h.xb(3),h.Ac(" Cancel ","SEAT_RESERVED"==n.ticket.eStatus?"Reservation":"Booking"," "),h.xb(1),h.hc("ngIf","SEAT_RESERVED"==n.ticket.eStatus)}}var yt,St,Ot=[{path:"sell",component:j},{path:"status",component:(yt=function(){function e(i,n,r,a){t(this,e),this.seatsService=i,this.bookingService=n,this.shipService=r,this.utilService=a,this.categoryList=[],this.seatList=[],this.filteredSeatList=[],this.shortTicket=!0,this.errorMessage="",this.loading=!1}return i(e,[{key:"ngOnInit",value:function(){this.setDateRanges(),this.getServiceAgentShips()}},{key:"setDateRanges",value:function(){var t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.minDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()-1},this.maxDate={year:t.getFullYear(),month:t.getMonth()+3,day:t.getDate()}}},{key:"onDateChange",value:function(){this.ship&&this.getShipSeatStatus(this.ship.id,this.dd)}},{key:"onSelectShip",value:function(t){console.log(t),this.ship=t,this.getShipSeatStatus(t.id,this.dd)}},{key:"getServiceAgentShips",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.errorMessage="",this.loading=!0,t.next=5,this.shipService.getServiceAgentShips().toPromise();case 5:this.ships=t.sent,this.ships.sort(this.utilService.dynamicSortObject("priority")),this.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),this.errorMessage=t.t0.error;case 13:case"end":return t.stop()}},t,this,[[0,10]])}))}},{key:"getShipSeatStatus",value:function(t,e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,this.errorMessage="",i.next=4,this.seatsService.getServiceAgentSeatStatusListByShiplId(t,this.utilService.getDateStringFromDateObj(e)).toPromise();case 4:this.seatList=i.sent,this.categoryList=[],this.seatList.forEach(function(t){var e=t.category;n.categoryList.find(function(t){return t.name==e.name})||n.categoryList.push(e)}),this.categoryList.sort(this.utilService.dynamicSortObject("priority")),this.onSelectCategory(this.categoryList[0]),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(0),console.log(i.t0),this.errorMessage=i.t0.error;case 14:case"end":return i.stop()}},i,this,[[0,11]])}))}},{key:"onSelectCategory",value:function(t){this.category=this.categoryList.find(function(e){return e.name==t.name}),this.filterSeatList(t)}},{key:"filterSeatList",value:function(t){var e=this;this.filteredSeatList=[],this.seatList.forEach(function(i){i.category.name==t.name&&e.filteredSeatList.push(i)})}},{key:"onSeatClick",value:function(t){var e=this.filteredSeatList.find(function(e){return e.id==t});e.bookingId?null!=this.ticket&&this.ticket.id==e.bookingId||this.getServiceAgentBooking(e.bookingId):this.ticket=null}},{key:"getServiceAgentBooking",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorMessage="",e.prev=1,e.next=4,this.bookingService.getServiceAgentBooking(t).toPromise();case 4:this.ticket=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),this.errorMessage=e.t0.error;case 10:case"end":return e.stop()}},e,this,[[1,7]])}))}},{key:"onTicketClose",value:function(t){this.ticket=null}},{key:"onClear",value:function(){this.errorMessage="",this.ticket=null}},{key:"onCancelBooking",value:function(t,e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!confirm("Are you sure to cancel booking with id : "+t)){i.next=25;break}if(this.errorMessage="",e!=u.b.SEAT_SOLD){i.next=14;break}return i.prev=2,i.next=5,this.bookingService.cancelServiceAgentBooking(t).toPromise();case 5:this.getShipSeatStatus(this.ship.id,this.dd),this.ticket=null,i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),console.log(i.t0),this.errorMessage=i.t0.error;case 12:i.next=25;break;case 14:if(e!=u.b.SEAT_RESERVED){i.next=25;break}return i.prev=15,i.next=18,this.bookingService.cancelServiceAgentReservation(t).toPromise();case 18:this.ticket=null,this.getShipSeatStatus(this.ship.id,this.dd),i.next=25;break;case 22:i.prev=22,i.t1=i.catch(15),console.log(i.t1),this.errorMessage=i.t1.error;case 25:case"end":return i.stop()}},i,this,[[2,9],[15,22]])}))}},{key:"onConfirmReservation",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure to confirm your reservation with id : "+t)){e.next=12;break}return this.errorMessage="",e.prev=2,e.next=5,this.bookingService.confirmServiceAgentReservation(t).toPromise();case 5:this.ticket=null,this.getShipSeatStatus(this.ship.id,this.dd),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.error),this.errorMessage=e.t0.error;case 12:case"end":return e.stop()}},e,this,[[2,9]])}))}}]),e}(),yt.\u0275fac=function(t){return new(t||yt)(h.Jb(s.a),h.Jb(o.a),h.Jb(l.a),h.Jb(d.a))},yt.\u0275cmp=h.Db({type:yt,selectors:[["app-status"]],decls:25,vars:6,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-print-none"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],["class","col-md-5 d-print-none",4,"ngIf"],["class","col-md-5",4,"ngIf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-ship"],[1,"col-md-5","d-print-none"],[1,"row","m-0"],["role","group",1,"btn-group","border","ml-1"],["type","button","class","btn btn-sm m-0",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-12","p-0"],[3,"filteredSeatList","categoryName","select",4,"ngIf"],[1,"col-12"],["class","row border py-3 mt-3",4,"ngIf"],["type","button",1,"btn","btn-sm","m-0",3,"ngClass","click"],[3,"filteredSeatList","categoryName","select"],[1,"row","border","py-3","mt-3"],[1,"col-3"],[1,"foo","blocked"],[1,"foo","reserved"],[1,"foo","sold"],[1,"foo"],[1,"col-md-5"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[3,"ticket","short","close",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","d-print-none"],[1,"btn","btn-danger","btn-sm","mx-1",3,"click"],["class","btn btn-sm btn-primary mx-1",3,"click",4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ticket","short","close"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"]],template:function(t,e){if(1&t){var i=h.Pb();h.Ob(0,"div",0),h.Ob(1,"span",1),h.yc(2,"Seat status"),h.Nb(),h.Nb(),h.Ob(3,"div",2),h.Ob(4,"div",3),h.Ob(5,"div",4),h.Ob(6,"div",5),h.Ob(7,"div",6),h.Ob(8,"div",7),h.Ob(9,"div",8),h.yc(10," Date : "),h.Nb(),h.Nb(),h.Ob(11,"input",9,10),h.Yb("ngModelChange",function(t){return e.dd=t})("dateSelect",function(){return e.onDateChange()})("click",function(){return h.qc(i),h.pc(12).toggle()}),h.Nb(),h.Ob(13,"div",11),h.Yb("click",function(){return h.qc(i),h.pc(12).toggle()}),h.Ob(14,"div",8),h.Kb(15,"i",12),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(16,"ul",13),h.Ob(17,"li",14),h.Ob(18,"h5"),h.yc(19,"Ship List"),h.Nb(),h.Ob(20,"small"),h.yc(21,"Choose a ship from below list"),h.Nb(),h.Nb(),h.wc(22,lt,3,2,"a",15),h.Nb(),h.Nb(),h.wc(23,ht,12,6,"div",16),h.wc(24,kt,8,5,"div",17),h.Nb(),h.Nb()}2&t&&(h.xb(11),h.hc("ngModel",e.dd)("minDate",e.minDate)("maxDate",e.maxDate),h.xb(11),h.hc("ngForOf",e.ships),h.xb(1),h.hc("ngIf",e.filteredSeatList.length),h.xb(1),h.hc("ngIf",e.ticket))},directives:[m.d,k.b,k.k,k.n,f.m,f.n,f.l,ot.a,st.a,p.a,v.a],styles:[".list-group-item[_ngcontent-%COMP%], .seat-box[_ngcontent-%COMP%]{cursor:pointer}.seat-box[_ngcontent-%COMP%]{border:1px solid #000;border-radius:4px;padding:2px;font-size:12px;text-align:center}.seat-box[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.seat-box.sold[_ngcontent-%COMP%]{border:1px solid red;background-color:red;color:#fff}.seat-box.reserved[_ngcontent-%COMP%]{border:1px solid #ffc107;background-color:#ffc107}.seat-box.blocked[_ngcontent-%COMP%]{border:1px solid #d3d3d3;background-color:#d3d3d3;color:#fff}.ticket[_ngcontent-%COMP%]{font-family:Bitter,serif;font-size:12px;padding:15px 0}.ticket-head[_ngcontent-%COMP%]{background-color:grey;color:#fff;padding:5px}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}.foo.sold[_ngcontent-%COMP%]{border:1px solid red;background-color:red}.foo.reserved[_ngcontent-%COMP%]{border:1px solid #ffc107;background-color:#ffc107}.foo.blocked[_ngcontent-%COMP%]{border:1px solid #d3d3d3;background-color:#d3d3d3}"]}),yt)},{path:"my-sells",component:Z},{path:"my-ledger",component:rt},{path:"my-balance",component:at}],xt=((St=function e(){t(this,e)}).\u0275mod=h.Hb({type:St}),St.\u0275inj=h.Gb({factory:function(t){return new(t||St)},imports:[[ct.a,a.e.forChild(Ot)]]}),St)}}])}();