!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{EIsZ:function(t,i,o){"use strict";o.r(i),o.d(i,"ROUTES",function(){return de}),o.d(i,"ReportModule",function(){return ue});var r=o("tyNb"),a=o("3whx"),s=o("mrSG"),c=o("sNvP"),l=o("z3bE"),b=o("1kSV"),d=o("fXoL"),u=o("3Pt+"),h=o("ofXK");function p(e,t){1&e&&(d.Ob(0,"th"),d.yc(1,"Seat"),d.Nb())}function g(e,t){if(1&e&&(d.Ob(0,"span"),d.yc(1),d.Nb()),2&e){var n=t.$implicit;d.xb(1),d.Ac(" ",n," ")}}function m(e,t){if(1&e&&(d.Ob(0,"th"),d.wc(1,g,2,1,"span",3),d.Nb()),2&e){var n=d.ac().$implicit;d.xb(1),d.hc("ngForOf",n.seatNumbers)}}function v(e,t){if(1&e&&(d.Ob(0,"span"),d.yc(1),d.Nb()),2&e){var n=t.$implicit;d.xb(1),d.Ac("",n,", ")}}var y=function(e,t){return{"bg-success":e,"bg-warning":t}};function f(e,t){if(1&e&&(d.Ob(0,"tr"),d.Ob(1,"td"),d.yc(2),d.Nb(),d.wc(3,m,2,1,"th",2),d.Ob(4,"td"),d.yc(5),d.Nb(),d.Ob(6,"td"),d.yc(7),d.bc(8,"date"),d.Nb(),d.Ob(9,"td"),d.yc(10),d.bc(11,"date"),d.Nb(),d.Ob(12,"td"),d.yc(13),d.Nb(),d.Ob(14,"td"),d.wc(15,v,2,1,"span",3),d.Nb(),d.Ob(16,"td"),d.yc(17),d.Nb(),d.Ob(18,"td"),d.yc(19),d.Nb(),d.Ob(20,"td"),d.yc(21),d.Nb(),d.Ob(22,"td"),d.yc(23),d.Nb(),d.Ob(24,"td"),d.yc(25),d.Nb(),d.Ob(26,"td",4),d.yc(27),d.Nb(),d.Nb()),2&e){var n=t.$implicit,i=t.index,o=d.ac();d.xb(2),d.zc(i+1),d.xb(1),d.hc("ngIf","Reservation"==o.type),d.xb(2),d.zc(n.bookingId),d.xb(2),d.zc(d.dc(8,16,n.bookingDate,"MMM d, y, h:mm:ss a")),d.xb(3),d.zc(d.cc(11,19,n.journeyDate)),d.xb(3),d.Bc("",n.customerName," - ",n.customerPhone,""),d.xb(2),d.hc("ngForOf",n.seatNumbers),d.xb(2),d.zc(n.price),d.xb(2),d.Ac("",n.hotelswaveCommission+n.hotelswaveAgentCommission+n.shipAgentCommission," "),d.xb(2),d.Bc("",n.shipNumber," - ",n.routes,""),d.xb(2),d.zc(n.soldBy),d.xb(2),d.zc(n.bookingStatus),d.xb(1),d.hc("ngClass",d.mc(21,y,n.paid,!n.paid)),d.xb(1),d.Ac(" ",n.paid?"Paid":"Unpaid"," ")}}function O(e,t){1&e&&d.Kb(0,"td")}function N(e,t){if(1&e&&(d.Ob(0,"tr"),d.Ob(1,"td"),d.yc(2),d.Nb(),d.Ob(3,"td"),d.yc(4),d.Nb(),d.Ob(5,"td"),d.yc(6),d.Nb(),d.Ob(7,"td"),d.yc(8),d.Nb(),d.Ob(9,"td"),d.yc(10),d.Nb(),d.Ob(11,"td"),d.yc(12),d.Nb(),d.Ob(13,"td"),d.yc(14),d.Nb(),d.Nb()),2&e){var n=t.$implicit;d.xb(2),d.zc(n.key),d.xb(2),d.zc(n.value.totalReserved),d.xb(2),d.zc(n.value.totalSold),d.xb(2),d.zc(n.value.price),d.xb(2),d.zc(n.value.hotelswaveCommission),d.xb(2),d.zc(n.value.hotelswaveAgentCommission),d.xb(2),d.zc(n.value.shipAgentCommission)}}var S,w=((S=function(){function t(){e(this,t),this.reportList=[],this.soldBy=new Map}return n(t,[{key:"ngOnChanges",value:function(e){e.reportList&&null!=this.reportList&&this.calculateServiceAdminBookingReportList()}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalCommission:0},this.soldBy=new Map,this.reportList.forEach(function(t){if(e.total.totalrent+=t.price,e.total.totalCommission+=t.hotelswaveAgentCommission+t.hotelswaveCommission+t.shipAgentCommission,t.soldBy&&t.seatNumbers){var n=null==e.soldBy.get(t.soldBy)?t.hotelswaveCommission:e.soldBy.get(t.soldBy).hotelswaveCommission+t.hotelswaveCommission,i=null==e.soldBy.get(t.soldBy)?t.hotelswaveAgentCommission:e.soldBy.get(t.soldBy).hotelswaveAgentCommission+t.hotelswaveAgentCommission,o=null==e.soldBy.get(t.soldBy)?t.shipAgentCommission:e.soldBy.get(t.soldBy).shipAgentCommission+t.shipAgentCommission,r=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalSeatNumber+t.seatNumbers.length,a=0,s=0,c=0;"SEAT_SOLD"==t.bookingStatus?(s=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalSold+t.seatNumbers.length,a=null==e.soldBy.get(t.soldBy)?t.price:e.soldBy.get(t.soldBy).price+t.price):(c=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalReserved+t.seatNumbers.length,a=null==e.soldBy.get(t.soldBy)?0:e.soldBy.get(t.soldBy).price),e.soldBy.set(t.soldBy,{totalSold:s,totalReserved:c,price:a,hotelswaveCommission:n,hotelswaveAgentCommission:i,shipAgentCommission:o,totalSeatNumber:r})}})}}]),t}()).\u0275fac=function(e){return new(e||S)},S.\u0275cmp=d.Db({type:S,selectors:[["report-table"]],inputs:{type:"type",headLine:"headLine",reportList:"reportList"},features:[d.vb],decls:68,vars:9,consts:[[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(d.Ob(0,"h4",0),d.yc(1),d.Nb(),d.Ob(2,"table",1),d.Ob(3,"thead"),d.Ob(4,"tr"),d.Ob(5,"th"),d.yc(6,"Sl."),d.Nb(),d.wc(7,p,2,0,"th",2),d.Ob(8,"th"),d.yc(9,"Ticket no."),d.Nb(),d.Ob(10,"th"),d.yc(11,"Booking Date"),d.Nb(),d.Ob(12,"th"),d.yc(13,"Journey Date"),d.Nb(),d.Ob(14,"th"),d.yc(15,"Passenger Info"),d.Nb(),d.Ob(16,"th"),d.yc(17,"Seats"),d.Nb(),d.Ob(18,"th"),d.yc(19,"Price"),d.Nb(),d.Ob(20,"th"),d.yc(21,"Commission"),d.Nb(),d.Ob(22,"th"),d.yc(23,"Route"),d.Nb(),d.Ob(24,"th"),d.yc(25,"Sold By"),d.Nb(),d.Ob(26,"th"),d.yc(27,"Status"),d.Nb(),d.Ob(28,"th"),d.yc(29,"Paid"),d.Nb(),d.Nb(),d.Nb(),d.Ob(30,"tbody"),d.wc(31,f,28,24,"tr",3),d.Nb(),d.Ob(32,"tfoot"),d.Ob(33,"tr"),d.Kb(34,"td"),d.wc(35,O,1,0,"td",2),d.Kb(36,"td"),d.Kb(37,"td"),d.Kb(38,"td"),d.Kb(39,"td"),d.Ob(40,"td"),d.yc(41,"TOTAL"),d.Nb(),d.Ob(42,"td"),d.yc(43),d.Nb(),d.Ob(44,"td"),d.yc(45),d.Nb(),d.Kb(46,"td"),d.Kb(47,"td"),d.Kb(48,"td"),d.Kb(49,"td"),d.Nb(),d.Nb(),d.Nb(),d.Ob(50,"table",1),d.Ob(51,"tr"),d.Ob(52,"th"),d.yc(53,"Counter Name"),d.Nb(),d.Ob(54,"th"),d.yc(55,"Reserved"),d.Nb(),d.Ob(56,"th"),d.yc(57,"Sold "),d.Nb(),d.Ob(58,"th"),d.yc(59,"Price"),d.Nb(),d.Ob(60,"th"),d.yc(61,"Hotelswave Commission"),d.Nb(),d.Ob(62,"th"),d.yc(63,"Hotelswave Agent Commission"),d.Nb(),d.Ob(64,"th"),d.yc(65,"Ship Agent Commission"),d.Nb(),d.Nb(),d.wc(66,N,15,7,"tr",3),d.bc(67,"keyvalue"),d.Nb()),2&e&&(d.xb(1),d.Ac(" ",t.headLine," "),d.xb(6),d.hc("ngIf","Reservation"==t.type),d.xb(24),d.hc("ngForOf",t.reportList),d.xb(4),d.hc("ngIf","Reservation"==t.type),d.xb(8),d.zc(t.total.totalrent),d.xb(2),d.zc(t.total.totalCommission),d.xb(21),d.hc("ngForOf",d.cc(67,7,t.soldBy)))},directives:[h.n,h.m,h.l],pipes:[h.h,h.e],styles:[""]}),S),k=o("HF3I");function x(e,t){if(1&e&&(d.Ob(0,"div"),d.Kb(1,"report-table",33),d.Nb()),2&e){var n=d.ac(2);d.xb(1),d.hc("type",n.reportType)("headLine",n.getHeadLine())("reportList",n.serviceAdminSellsReportList)}}function D(e,t){1&e&&(d.Ob(0,"h4",34),d.Kb(1,"i",35),d.yc(2," No record yet "),d.Nb())}function R(e,t){if(1&e&&(d.Mb(0),d.wc(1,x,2,3,"div",30),d.wc(2,D,3,0,"ng-template",null,32,d.xc),d.Lb()),2&e){var n=d.pc(3),i=d.ac();d.xb(1),d.hc("ngIf",i.serviceAdminSellsReportList.length>0)("ngIfElse",n)}}function A(e,t){1&e&&d.Kb(0,"loading")}var L,B=((L=function(){function t(n,i){e(this,t),this.reportService=n,this.utilService=i,this.reportHead="",this.reportType="Sells",this.filterValue="all",this.loading=!1,this.savedList=[],this.serviceAdminSellsReportList=[],this.soldBy=new Map}return n(t,[{key:"ngOnInit",value:function(){var e=new Date;this.dd=new b.a(e.getFullYear(),e.getMonth()+1,e.getDate()),this.getAdminSellsgReport(this.dd)}},{key:"onDateChange",value:function(){this.onLoad()}},{key:"onTypeChange",value:function(){this.onLoad()}},{key:"onPrint",value:function(){window.print()}},{key:"onFilterChange",value:function(e){switch(this.filterValue=e,e){case"all":this.serviceAdminSellsReportList=this.savedList;break;case"hotelswave":this.serviceAdminSellsReportList=this.savedList.filter(function(e){return"Admin"===e.role});break;case"shipAdmin":this.serviceAdminSellsReportList=this.savedList.filter(function(e){return"Service Admin"===e.role});break;case"shipAgent":this.serviceAdminSellsReportList=this.savedList.filter(function(e){return"Service Agent"===e.role});break;case"hotelswaveAgent":this.serviceAdminSellsReportList=this.savedList.filter(function(e){return"Agent"===e.role});break;case"user":this.serviceAdminSellsReportList=this.savedList.filter(function(e){return"User"===e.role});break;case"superSell":this.serviceAdminSellsReportList=this.savedList.filter(function(e){return"User"===e.role||"Agent"===e.role||"Admin"==e.role})}}},{key:"onLoad",value:function(){switch(this.reportType){case"Reservation":this.getAdminReservationReport(this.dd);break;case"Sells":this.getAdminSellsgReport(this.dd)}}},{key:"getAdminReservationReport",value:function(e){var t=e.year,n=e.month,i=e.day;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t,"-").concat(n=n<10?"0"+n:n,"-").concat(i=i<10?"0"+i:i),e.prev=1,this.loading=!0,this.serviceAdminSellsReportList=[],e.next=6,this.reportService.getAdminReservationReport(o).toPromise();case 6:this.savedList=e.sent,this.onFilterChange(this.filterValue),this.reportHead="Reservation",this.loading=!1,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[1,12]])}))}},{key:"getAdminSellsgReport",value:function(e){var t=e.year,n=e.month,i=e.day;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t,"-").concat(n=n<10?"0"+n:n,"-").concat(i=i<10?"0"+i:i),e.prev=1,this.loading=!0,this.serviceAdminSellsReportList=[],e.next=6,this.reportService.getAdminSellsReport(o).toPromise();case 6:this.savedList=e.sent,this.savedList.sort(this.utilService.dynamicSortObject("date")),this.savedList.sort(this.utilService.dynamicSortObject("roomNumber")),this.onFilterChange(this.filterValue),this.reportHead="Sells",this.loading=!1,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}},e,this,[[1,14]])}))}},{key:"getHeadLine",value:function(){return this.reportType+" report for "+this.utilService.getDateStringFromDateObj(this.dd)}}]),t}()).\u0275fac=function(e){return new(e||L)(d.Jb(c.a),d.Jb(l.a))},L.\u0275cmp=d.Db({type:L,selectors:[["app-sells-report"]],decls:55,vars:4,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],[1,"ml-auto","col-auto"],["id","reportType",1,"form-control",3,"change"],["value","all"],["value","hotelswave"],["value","shipAdmin"],["value","shipAgent"],["value","hotelswaveAgent"],["value","superSell"],["value","user"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf","ngIfElse"],["showLoding",""],["noRecord",""],[3,"type","headLine","reportList"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",0),d.Ob(1,"span",1),d.yc(2," Sells Report "),d.Nb(),d.Nb(),d.Ob(3,"div",2),d.Ob(4,"div",3),d.Ob(5,"div",4),d.Ob(6,"div",5),d.Ob(7,"div",6),d.Ob(8,"div",7),d.Ob(9,"div",8),d.yc(10," Date : "),d.Nb(),d.Nb(),d.Ob(11,"input",9,10),d.Yb("ngModelChange",function(e){return t.dd=e})("dateSelect",function(){return t.onDateChange()})("click",function(){return d.qc(n),d.pc(12).toggle()}),d.Nb(),d.Ob(13,"div",11),d.Yb("click",function(){return d.qc(n),d.pc(12).toggle()}),d.Ob(14,"div",8),d.Kb(15,"i",12),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(16,"div",4),d.Ob(17,"div",13),d.Ob(18,"div",7),d.Ob(19,"div",8),d.yc(20,"Type"),d.Nb(),d.Nb(),d.Ob(21,"select",14),d.Yb("ngModelChange",function(e){return t.reportType=e})("change",function(){return t.onTypeChange()}),d.Ob(22,"option",15),d.yc(23," Today's Sells "),d.Nb(),d.Ob(24,"option",16),d.yc(25," Journey Date "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(26,"div",17),d.Ob(27,"div",13),d.Ob(28,"div",7),d.Ob(29,"div",8),d.yc(30,"Filter"),d.Nb(),d.Nb(),d.Ob(31,"select",18),d.Yb("change",function(e){return t.onFilterChange(e.target.value)}),d.Ob(32,"option",19),d.yc(33," All "),d.Nb(),d.Ob(34,"option",20),d.yc(35," Hotelswave "),d.Nb(),d.Ob(36,"option",21),d.yc(37," Ship Admin "),d.Nb(),d.Ob(38,"option",22),d.yc(39," SHip Agent "),d.Nb(),d.Ob(40,"option",23),d.yc(41," Hotelswave Agent "),d.Nb(),d.Ob(42,"option",24),d.yc(43," Super Sell "),d.Nb(),d.Ob(44,"option",25),d.yc(45," User "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(46,"div",4),d.Ob(47,"button",26),d.Yb("click",function(){return t.onPrint()}),d.Kb(48,"i",27),d.yc(49," Print "),d.Nb(),d.Nb(),d.Nb(),d.Ob(50,"div",28),d.Ob(51,"div",29),d.wc(52,R,4,2,"ng-container",30),d.wc(53,A,1,0,"ng-template",null,31,d.xc),d.Nb(),d.Nb(),d.Nb()}if(2&e){var i=d.pc(54);d.xb(11),d.hc("ngModel",t.dd),d.xb(10),d.hc("ngModel",t.reportType),d.xb(31),d.hc("ngIf",!t.loading)("ngIfElse",i)}},directives:[b.e,u.b,u.k,u.n,u.s,u.o,u.u,h.n,w,k.a],styles:[""]}),L),C=o("Fif/");function T(e,t){if(1&e&&(d.Ob(0,"div"),d.Kb(1,"report-table",26),d.Nb()),2&e){var n=d.ac(2);d.xb(1),d.hc("type",n.reportType)("headLine",n.getHeadLine())("reportList",n.serviceAdminSellsReportList)}}function M(e,t){1&e&&(d.Ob(0,"h4",27),d.Kb(1,"i",28),d.yc(2," No record yet"),d.Nb())}function I(e,t){if(1&e&&(d.Mb(0),d.wc(1,T,2,3,"div",23),d.wc(2,M,3,0,"ng-template",null,25,d.xc),d.Lb()),2&e){var n=d.pc(3),i=d.ac();d.xb(1),d.hc("ngIf",i.serviceAdminSellsReportList.length>0)("ngIfElse",n)}}function P(e,t){1&e&&d.Kb(0,"loading")}var z,F=((z=function(){function t(n,i){e(this,t),this.reportService=n,this.utilService=i,this.loading=!1,this.reportType="Sells",this.serviceAdminSellsReportList=[]}return n(t,[{key:"ngOnInit",value:function(){var e=new Date;this.dd={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},{key:"onTypeChange",value:function(){this.onLoad()}},{key:"onDateChange",value:function(){this.onLoad()}},{key:"onPrint",value:function(){window.print()}},{key:"onSelectShip",value:function(e){this.ship=e,this.getAdminReservationReportByShipId(this.ship.id,this.dd)}},{key:"onLoad",value:function(){if(this.ship&&null!=this.ship.id)switch(this.reportType){case"Reservation":this.getAdminReservationReportByShipId(this.ship.id,this.dd);break;case"Sells":this.getAdminSellsReportByShipId(this.ship.id,this.dd)}}},{key:"getAdminReservationReportByShipId",value:function(e,t){var n=t.year,i=t.month,o=t.day;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(n,"-").concat(i=i<10?"0"+i:i,"-").concat(o=o<10?"0"+o:o),t.prev=1,this.loading=!0,t.next=5,this.reportService.getAdminReservationReportByShipId(r,e).toPromise();case 5:this.serviceAdminSellsReportList=t.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[1,10]])}))}},{key:"getAdminSellsReportByShipId",value:function(e,t){var n=t.year,i=t.month,o=t.day;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(n,"-").concat(i=i<10?"0"+i:i,"-").concat(o=o<10?"0"+o:o),t.prev=1,this.loading=!0,t.next=5,this.reportService.getAdminSellsReportByShipId(r,e).toPromise();case 5:this.serviceAdminSellsReportList=t.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[1,10]])}))}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.serviceAdminSellsReportList.forEach(function(t){e.total.totalrent+=t.price})}},{key:"getHeadLine",value:function(){return this.reportType+" report for "+this.utilService.getDateStringFromDateObj(this.dd)}}]),t}()).\u0275fac=function(e){return new(e||z)(d.Jb(c.a),d.Jb(l.a))},z.\u0275cmp=d.Db({type:z,selectors:[["app-hotel-report"]],decls:37,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-2","d-print-none"],[3,"ship"],[1,"col-md-10"],[1,"row","d-print-none"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf","ngIfElse"],["showLoading",""],["noRecord",""],[3,"type","headLine","reportList"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",0),d.Ob(1,"span",1),d.yc(2,"Ship Report"),d.Nb(),d.Nb(),d.Ob(3,"div",0),d.Ob(4,"div",2),d.Ob(5,"div",3),d.Ob(6,"admin-ship-list",4),d.Yb("ship",function(e){return t.onSelectShip(e)}),d.Nb(),d.Nb(),d.Ob(7,"div",5),d.Ob(8,"div",6),d.Ob(9,"div",7),d.Ob(10,"div",8),d.Ob(11,"div",9),d.Ob(12,"div",10),d.Ob(13,"div",11),d.yc(14," Date : "),d.Nb(),d.Nb(),d.Ob(15,"input",12,13),d.Yb("ngModelChange",function(e){return t.dd=e})("dateSelect",function(){return t.onDateChange()})("click",function(){return d.qc(n),d.pc(16).toggle()}),d.Nb(),d.Ob(17,"div",14),d.Yb("click",function(){return d.qc(n),d.pc(16).toggle()}),d.Ob(18,"div",11),d.Kb(19,"i",15),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(20,"div",7),d.Ob(21,"div",16),d.Ob(22,"div",10),d.Ob(23,"div",11),d.yc(24,"Type"),d.Nb(),d.Nb(),d.Ob(25,"select",17),d.Yb("ngModelChange",function(e){return t.reportType=e})("change",function(){return t.onTypeChange()}),d.Ob(26,"option",18),d.yc(27," Sells "),d.Nb(),d.Ob(28,"option",19),d.yc(29," Reservation "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(30,"div",20),d.Ob(31,"button",21),d.Yb("click",function(){return t.onPrint()}),d.Kb(32,"i",22),d.yc(33," Print "),d.Nb(),d.Nb(),d.Nb(),d.wc(34,I,4,2,"ng-container",23),d.wc(35,P,1,0,"ng-template",null,24,d.xc),d.Nb(),d.Nb(),d.Nb()}if(2&e){var i=d.pc(36);d.xb(15),d.hc("ngModel",t.dd),d.xb(10),d.hc("ngModel",t.reportType),d.xb(9),d.hc("ngIf",!t.loading)("ngIfElse",i)}},directives:[C.a,b.e,u.b,u.k,u.n,u.s,u.o,u.u,h.n,w,k.a],styles:[""]}),z),K=o("B01t");function Y(e,t){if(1&e&&(d.Ob(0,"tr"),d.Ob(1,"td"),d.yc(2),d.Nb(),d.Ob(3,"td"),d.yc(4),d.bc(5,"date"),d.Nb(),d.Ob(6,"td"),d.yc(7),d.Nb(),d.Ob(8,"td"),d.yc(9),d.Nb(),d.Ob(10,"td"),d.yc(11),d.Nb(),d.Ob(12,"td",24),d.yc(13),d.Nb(),d.Nb()),2&e){var n=t.$implicit,i=t.index;d.xb(2),d.zc(i+1),d.xb(2),d.zc(d.dc(5,6,n.date,"MMM d, y")),d.xb(3),d.zc(n.shipNumber),d.xb(2),d.zc(n.shipName),d.xb(2),d.zc(n.totalNumberOfSeat),d.xb(2),d.zc(n.totalFare)}}function E(e,t){if(1&e&&(d.Ob(0,"div"),d.Ob(1,"h3",21),d.yc(2),d.bc(3,"date"),d.bc(4,"date"),d.Nb(),d.Ob(5,"table",22),d.Ob(6,"thead"),d.Ob(7,"tr"),d.Ob(8,"th"),d.yc(9,"Sl."),d.Nb(),d.Ob(10,"th"),d.yc(11,"Date"),d.Nb(),d.Ob(12,"th"),d.yc(13,"Ship Number"),d.Nb(),d.Ob(14,"th"),d.yc(15,"Ship Name"),d.Nb(),d.Ob(16,"th"),d.yc(17,"Total Number Of Seat"),d.Nb(),d.Ob(18,"th"),d.yc(19,"Total Fare"),d.Nb(),d.Nb(),d.Nb(),d.Ob(20,"tbody"),d.wc(21,Y,14,9,"tr",23),d.Nb(),d.Ob(22,"tfoot"),d.Ob(23,"tr"),d.Kb(24,"td"),d.Kb(25,"td"),d.Kb(26,"td"),d.Kb(27,"td"),d.Ob(28,"th",24),d.yc(29,"TOTAL"),d.Nb(),d.Ob(30,"td",24),d.yc(31),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()),2&e){var n=d.ac(2);d.xb(2),d.Cc(" ",n.reportType," report for date of : ",d.dc(3,5,n.daterange.checkinDate," d MMM y")," to ",d.dc(4,8,n.daterange.checkoutDate," d MMM y")," "),d.xb(19),d.hc("ngForOf",n.serviceAdminSellsReportRangeList),d.xb(10),d.zc(n.total)}}function U(e,t){1&e&&(d.Ob(0,"h4",21),d.Kb(1,"i",25),d.yc(2," No record yet "),d.Nb())}function j(e,t){if(1&e&&(d.Mb(0),d.wc(1,E,32,11,"div",18),d.wc(2,U,3,0,"ng-template",null,20,d.xc),d.Lb()),2&e){var n=d.pc(3),i=d.ac();d.xb(1),d.hc("ngIf",i.serviceAdminSellsReportRangeList.length>0)("ngIfElse",n)}}function H(e,t){1&e&&d.Kb(0,"loading")}var J,q=((J=function(){function t(n){e(this,t),this.reportService=n,this.daterange={},this.reportType="Sell",this.serviceAdminSellsReportRangeList=[],this.loading=!1}return n(t,[{key:"ngOnInit",value:function(){this.setDateRanges(),this.onReportTypeChange(this.reportType)}},{key:"setDateRanges",value:function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date;var e=new Date;e.setDate(this.daterange.checkinDate.getDate()-90);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+12),this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:e,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}}},{key:"selectedDate",value:function(e){this.daterange.checkinDate=e.start._d,this.daterange.checkoutDate=e.end._d,this.daterange.label=e.label,this.onReportTypeChange(this.reportType)}},{key:"onReportTypeChange",value:function(e){switch(this.reportType=e,this.reportType){case"Sell":this.getAdminSellsgReportRange(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getAdminReservationReportRange(this.daterange.checkinDate,this.daterange.checkoutDate)}}},{key:"getAdminReservationReportRange",value:function(e,t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=this.getDateString(e),o=this.getDateString(t),n.prev=1,this.loading=!0,n.next=5,this.reportService.getAdminReservationRangeReport(i,o).toPromise();case 5:this.serviceAdminSellsReportRangeList=n.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0);case 13:case"end":return n.stop()}},n,this,[[1,10]])}))}},{key:"getAdminSellsgReportRange",value:function(e,t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=this.getDateString(e),o=this.getDateString(t),n.prev=1,this.loading=!0,n.next=5,this.reportService.getAdminSellsReportRange(i,o).toPromise();case 5:this.serviceAdminSellsReportRangeList=n.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0);case 13:case"end":return n.stop()}},n,this,[[1,10]])}))}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total=0,this.serviceAdminSellsReportRangeList.forEach(function(t){e.total+=t.totalFare})}},{key:"getDateString",value:function(e){var t=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+n}},{key:"onPrint",value:function(){window.print()}}]),t}()).\u0275fac=function(e){return new(e||J)(d.Jb(c.a))},J.\u0275cmp=d.Db({type:J,selectors:[["app-sells-report-range"]],decls:26,vars:5,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-auto"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-sm",3,"ngClass","click"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf","ngIfElse"],["showLoading",""],["noRecord",""],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e&&(d.Ob(0,"div",0),d.Ob(1,"span",1),d.yc(2," Sells Report Range "),d.Nb(),d.Nb(),d.Ob(3,"div",2),d.Ob(4,"div",3),d.Ob(5,"div",4),d.Ob(6,"div",5),d.Ob(7,"div",6),d.Ob(8,"div",7),d.Kb(9,"i",8),d.Nb(),d.Nb(),d.Ob(10,"input",9),d.Yb("selected",function(e){return t.selectedDate(e)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(11,"div",10),d.Ob(12,"div",11),d.Ob(13,"a",12),d.Yb("click",function(){return t.onReportTypeChange("Sell")}),d.yc(14,"Sells"),d.Nb(),d.Ob(15,"a",12),d.Yb("click",function(){return t.onReportTypeChange("Reserve")}),d.yc(16,"Journey Date"),d.Nb(),d.Nb(),d.Nb(),d.Ob(17,"div",13),d.Ob(18,"button",14),d.Yb("click",function(){return t.onPrint()}),d.Kb(19,"i",15),d.yc(20," Print "),d.Nb(),d.Nb(),d.Nb(),d.Ob(21,"div",16),d.Ob(22,"div",17),d.wc(23,j,4,2,"ng-container",18),d.wc(24,H,1,0,"ng-template",null,19,d.xc),d.Nb(),d.Nb(),d.Nb()),2&e){var n=d.pc(25);d.xb(10),d.hc("options",t.options),d.xb(3),d.hc("ngClass","Sell"==t.reportType?"btn-primary text-white":"btn-light"),d.xb(2),d.hc("ngClass","Reserve"==t.reportType?"btn-primary text-white":"btn-light"),d.xb(8),d.hc("ngIf",!t.loading)("ngIfElse",n)}},directives:[K.b,h.l,h.n,h.m,k.a],pipes:[h.e],styles:[""]}),J),$=o("HymT"),_=o("/7iW");function G(e,t){if(1&e&&(d.Ob(0,"option",28),d.yc(1),d.Nb()),2&e){var n=t.$implicit;d.hc("value",n.id),d.xb(1),d.Bc(" ",n.name,"[",n.phoneNumber,"] ")}}function V(e,t){if(1&e&&(d.Ob(0,"option",28),d.yc(1),d.Nb()),2&e){var n=t.$implicit;d.hc("value",n.id),d.xb(1),d.Bc(" ",n.shipNumber,"-",n.name," ")}}function X(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",29),d.Ob(1,"button",30),d.Yb("click",function(){return d.qc(n),d.ac().onSearch()}),d.yc(2,"Search"),d.Nb(),d.Nb()}}function W(e,t){if(1&e&&(d.Ob(0,"span"),d.yc(1),d.Nb()),2&e){var n=t.$implicit;d.xb(1),d.Ac("",n,", ")}}function Z(e,t){if(1&e&&(d.Ob(0,"tr"),d.Ob(1,"td"),d.yc(2),d.Nb(),d.Ob(3,"td"),d.yc(4),d.Nb(),d.Ob(5,"td"),d.yc(6),d.bc(7,"date"),d.Nb(),d.Ob(8,"td"),d.yc(9),d.bc(10,"date"),d.Nb(),d.Ob(11,"td"),d.yc(12),d.Nb(),d.Ob(13,"td"),d.wc(14,W,2,1,"span",37),d.Nb(),d.Ob(15,"td"),d.yc(16),d.Nb(),d.Ob(17,"td"),d.yc(18),d.Nb(),d.Ob(19,"td"),d.yc(20),d.Nb(),d.Ob(21,"td"),d.yc(22),d.Nb(),d.Ob(23,"td"),d.yc(24),d.Nb(),d.Nb()),2&e){var n=t.$implicit,i=t.index;d.xb(2),d.zc(i+1),d.xb(2),d.zc(n.bookingId),d.xb(2),d.zc(d.dc(7,12,n.bookingDate,"MMM d, y, h:mm:ss a")),d.xb(3),d.zc(d.cc(10,15,n.journeyDate)),d.xb(3),d.Bc("",n.customerName," - ",n.customerPhone,""),d.xb(2),d.hc("ngForOf",n.seatNumbers),d.xb(2),d.zc(n.price),d.xb(2),d.Ac("",n.hotelswaveCommission+n.hotelswaveAgentCommission+n.shipAgentCommission," "),d.xb(2),d.zc(n.shipNumber),d.xb(2),d.zc(n.soldBy),d.xb(2),d.zc(n.bookingStatus)}}function Q(e,t){if(1&e&&(d.Ob(0,"tr"),d.Ob(1,"td"),d.yc(2),d.Nb(),d.Ob(3,"td"),d.yc(4),d.Nb(),d.Ob(5,"td"),d.yc(6),d.Nb(),d.Ob(7,"td"),d.yc(8),d.Nb(),d.Ob(9,"td"),d.yc(10),d.Nb(),d.Ob(11,"td"),d.yc(12),d.Nb(),d.Nb()),2&e){var n=t.$implicit;d.xb(2),d.zc(n.key),d.xb(2),d.zc(n.value.totalSeatNumber),d.xb(2),d.zc(n.value.price),d.xb(2),d.zc(n.value.hotelswaveCommission),d.xb(2),d.zc(n.value.hotelswaveAgentCommission),d.xb(2),d.zc(n.value.shipAgentCommission)}}function ee(e,t){if(1&e&&(d.Ob(0,"div",33),d.Ob(1,"div",34),d.Ob(2,"h4",35),d.yc(3),d.bc(4,"date"),d.bc(5,"date"),d.Nb(),d.Nb(),d.Ob(6,"table",36),d.Ob(7,"thead"),d.Ob(8,"tr"),d.Ob(9,"th"),d.yc(10,"Sl."),d.Nb(),d.Ob(11,"th"),d.yc(12,"Ticket no."),d.Nb(),d.Ob(13,"th"),d.yc(14,"Sells Date"),d.Nb(),d.Ob(15,"th"),d.yc(16,"Journey Date"),d.Nb(),d.Ob(17,"th"),d.yc(18,"Passenger Info"),d.Nb(),d.Ob(19,"th"),d.yc(20,"Seats"),d.Nb(),d.Ob(21,"th"),d.yc(22,"Price"),d.Nb(),d.Ob(23,"th"),d.yc(24,"Commission"),d.Nb(),d.Ob(25,"th"),d.yc(26,"Route"),d.Nb(),d.Ob(27,"th"),d.yc(28,"Sold By"),d.Nb(),d.Ob(29,"th"),d.yc(30,"Status"),d.Nb(),d.Nb(),d.Nb(),d.Ob(31,"tbody"),d.wc(32,Z,25,17,"tr",37),d.Nb(),d.Ob(33,"tfoot"),d.Ob(34,"tr"),d.Kb(35,"td"),d.Kb(36,"td"),d.Kb(37,"td"),d.Kb(38,"td"),d.Kb(39,"td"),d.Ob(40,"td"),d.yc(41,"TOTAL"),d.Nb(),d.Ob(42,"td"),d.Ob(43,"strong"),d.yc(44),d.Nb(),d.Nb(),d.Ob(45,"td"),d.Ob(46,"strong"),d.yc(47),d.Nb(),d.Nb(),d.Kb(48,"td"),d.Kb(49,"td"),d.Kb(50,"td"),d.Nb(),d.Nb(),d.Nb(),d.Ob(51,"table",38),d.Ob(52,"tr"),d.Ob(53,"th"),d.yc(54,"Counter Name"),d.Nb(),d.Ob(55,"th"),d.yc(56,"No of seat sold / Reserved"),d.Nb(),d.Ob(57,"th"),d.yc(58,"Price"),d.Nb(),d.Ob(59,"th"),d.yc(60,"Hotelswave Commission"),d.Nb(),d.Ob(61,"th"),d.yc(62,"Hotelswave Agent Commission"),d.Nb(),d.Ob(63,"th"),d.yc(64,"Ship Agent Commission"),d.Nb(),d.Nb(),d.wc(65,Q,13,6,"tr",37),d.bc(66,"keyvalue"),d.Nb(),d.Nb()),2&e){var n=d.ac(2);d.xb(3),d.Dc("",n.reportType," report of ",n.counter.name," from ",d.cc(4,10,n.daterange.startDate)," to ",d.cc(5,12,n.daterange.endDate)," for ",n.ship.shipNumber,"-",n.ship.name,""),d.xb(29),d.hc("ngForOf",n.reportList),d.xb(12),d.Ac(" ",n.total.totalrent," "),d.xb(3),d.zc(n.total.totalCommission),d.xb(18),d.hc("ngForOf",d.cc(66,14,n.soldBy))}}function te(e,t){1&e&&(d.Ob(0,"h4",35),d.Kb(1,"i",39),d.yc(2," No record yet "),d.Nb())}function ne(e,t){if(1&e&&(d.Mb(0),d.wc(1,ee,67,16,"div",31),d.wc(2,te,3,0,"ng-template",null,32,d.xc),d.Lb()),2&e){var n=d.pc(3),i=d.ac();d.xb(1),d.hc("ngIf",i.reportList&&i.reportList.length>0)("ngIfElse",n)}}function ie(e,t){1&e&&d.Kb(0,"loading")}function oe(e,t){1&e&&d.Kb(0,"loading")}function re(e,t){if(1&e&&(d.Ob(0,"tr"),d.Ob(1,"td"),d.yc(2),d.Nb(),d.Ob(3,"td"),d.yc(4),d.Nb(),d.Ob(5,"td"),d.yc(6),d.Nb(),d.Nb()),2&e){var n=t.$implicit;d.xb(2),d.zc(n.date),d.xb(2),d.zc(n.booking),d.xb(2),d.zc(n.seat)}}function ae(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div"),d.Ob(1,"table",12),d.Ob(2,"thead"),d.Ob(3,"tr"),d.Ob(4,"th"),d.yc(5,"Date"),d.Nb(),d.Ob(6,"th"),d.yc(7,"Booking count"),d.Nb(),d.Ob(8,"th"),d.yc(9,"Ticket count"),d.Nb(),d.Nb(),d.Nb(),d.Ob(10,"tbody"),d.wc(11,re,7,3,"tr",13),d.Nb(),d.Ob(12,"tfoot"),d.Ob(13,"tr"),d.Ob(14,"th"),d.yc(15,"Total"),d.Nb(),d.Ob(16,"th"),d.yc(17),d.Nb(),d.Ob(18,"th"),d.yc(19),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(20,"div",14),d.Ob(21,"button",15),d.Yb("click",function(){return d.qc(n),d.ac(2).onPrint()}),d.yc(22,"Print"),d.Nb(),d.Nb(),d.Nb()}if(2&e){var i=d.ac(2);d.xb(11),d.hc("ngForOf",i.reportList.count),d.xb(6),d.zc(i.reportList.totalBooking),d.xb(2),d.zc(i.reportList.totalSeat)}}function se(e,t){if(1&e&&(d.Ob(0,"div",9),d.Ob(1,"h3",10),d.yc(2),d.Nb(),d.wc(3,oe,1,0,"loading",11),d.wc(4,ae,23,3,"div",11),d.Nb()),2&e){var n=d.ac();d.xb(2),d.Bc("Ticket count report for ",n.ship.shipNumber," - ",n.ship.name,""),d.xb(1),d.hc("ngIf",n.loading),d.xb(1),d.hc("ngIf",n.reportList)}}var ce,le,be,de=[{path:"sells",component:B},{path:"sells-range",component:q},{path:"ship",component:F},{path:"counter",component:(le=function(){function t(n,i,o,r){e(this,t),this.userService=n,this.reportService=i,this.util=o,this.shipService=r,this.daterange={},this.reportType="Sells",this.loading=!1,this.soldBy=new Map}return n(t,[{key:"ngOnInit",value:function(){this.getAllShip(),this.setDateRanges()}},{key:"setDateRanges",value:function(){this.daterange.startDate=new Date,this.daterange.endDate=new Date;var e=new Date;e.setDate(this.daterange.startDate.getDate()-490);var t=new Date;t.setDate(this.daterange.endDate.getDate()+90),this.daterange.startDate.setDate(this.daterange.endDate.getDate()-10),this.daterange.endDate.setDate(this.daterange.endDate.getDate()+10),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:e,maxDate:t,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}},{key:"selectedDate",value:function(e){this.reportList=null,this.daterange.startDate=e.start._d,this.daterange.endDate=e.end._d,this.daterange.label=e.label}},{key:"onPrint",value:function(){window.print()}},{key:"getAllShip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.shipService.getAllShip(e).toPromise();case 4:n=t.sent,this.shipList=n.content,this.shipList.sort(this.util.dynamicSortObject("priority")),this.loading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}))}},{key:"getUserListByRole",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.reportList=null,this.loading=!0,t.prev=1,t.next=4,this.userService.getAdminUserByRole(e).toPromise();case 4:this.userList=t.sent,this.userList.sort(this.util.dynamicSortObject("name")),this.loading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[1,9]])}))}},{key:"onCounterChange",value:function(e){this.reportList=null,this.counter=this.userList.find(function(t){return t.id==e})}},{key:"onShipChange",value:function(e){this.reportList=null,this.ship=this.shipList.find(function(t){return t.id==e})}},{key:"onSearch",value:function(){switch(this.reportType){case"Sells":this.getAdminSellsRangeReport(this.ship.id,this.counter.id,this.daterange.startDate,this.daterange.endDate);break;case"Reservation":this.getAdminReservationRangeReport(this.ship.id,this.counter.id,this.daterange.startDate,this.daterange.endDate)}}},{key:"getAdminSellsRangeReport",value:function(e,t,n,i){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=this.util.getDateString(n),a=this.util.getDateString(i),o.prev=1,this.loading=!0,o.next=5,this.reportService.getAdminSellsReportRangeForIndividual(e,t,r,a).toPromise();case 5:this.reportList=o.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),console.log(o.t0);case 13:case"end":return o.stop()}},o,this,[[1,10]])}))}},{key:"getAdminReservationRangeReport",value:function(e,t,n,i){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=this.util.getDateString(n),a=this.util.getDateString(i),o.prev=1,this.loading=!0,o.next=5,this.reportService.getAdminReserveReportRangeForIndividual(e,t,r,a).toPromise();case 5:this.reportList=o.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),console.log(o.t0);case 13:case"end":return o.stop()}},o,this,[[1,10]])}))}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalCommission:0},this.soldBy=new Map,this.reportList.forEach(function(t){if(e.total.totalrent+=t.price,e.total.totalCommission+=t.hotelswaveAgentCommission+t.hotelswaveCommission+t.shipAgentCommission,t.soldBy&&t.seatNumbers){var n=null==e.soldBy.get(t.soldBy)?t.hotelswaveCommission:e.soldBy.get(t.soldBy).hotelswaveCommission+t.hotelswaveCommission,i=null==e.soldBy.get(t.soldBy)?t.hotelswaveAgentCommission:e.soldBy.get(t.soldBy).hotelswaveAgentCommission+t.hotelswaveAgentCommission,o=null==e.soldBy.get(t.soldBy)?t.shipAgentCommission:e.soldBy.get(t.soldBy).shipAgentCommission+t.shipAgentCommission,r=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalSeatNumber+t.seatNumbers.length,a=0,s=0,c=0;"SEAT_SOLD"==t.bookingStatus?(s=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalSold+t.seatNumbers.length,a=null==e.soldBy.get(t.soldBy)?t.price:e.soldBy.get(t.soldBy).price+t.price):(c=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalReserved+t.seatNumbers.length,a=null==e.soldBy.get(t.soldBy)?0:e.soldBy.get(t.soldBy).price),e.soldBy.set(t.soldBy,{totalSold:s,totalReserved:c,price:a,hotelswaveCommission:n,hotelswaveAgentCommission:i,shipAgentCommission:o,totalSeatNumber:r})}})}},{key:"clear",value:function(){this.reportList=null}}]),t}(),le.\u0275fac=function(e){return new(e||le)(d.Jb(_.a),d.Jb(c.a),d.Jb(l.a),d.Jb($.a))},le.\u0275cmp=d.Db({type:le,selectors:[["app-counter-report"]],decls:58,vars:7,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none","bg-light","shadow-sm"],[1,"col-auto"],[1,"form-group"],["for","counterType"],["id","counterType",1,"form-control",3,"change"],["value",""],["value","admin"],["value","Agent"],["value","Service Admin"],["value","Service Agent"],["for","counter"],[3,"value",4,"ngFor","ngForOf"],["for","dateRange"],["type","text","id","dateRange","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],["for","reportType"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center","ml-auto","mr-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf","ngIfElse"],["showLoding",""],[3,"value"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],["class","row mb-5 mx-2",4,"ngIf","ngIfElse"],["noRecord",""],[1,"row","mb-5","mx-2"],[1,"col-12"],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"table","table-bordered","table-hover","table-responsive-sm","mt-4"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e&&(d.Ob(0,"div",0),d.Ob(1,"span",1),d.yc(2,"Counter Report"),d.Nb(),d.Nb(),d.Ob(3,"div",2),d.Ob(4,"div",3),d.Ob(5,"div",4),d.Ob(6,"div",5),d.Ob(7,"label",6),d.yc(8,"Counter Type"),d.Nb(),d.Ob(9,"select",7),d.Yb("change",function(e){return t.getUserListByRole(e.target.value)}),d.Ob(10,"option",8),d.yc(11," Select a counterType "),d.Nb(),d.Ob(12,"option",9),d.yc(13," Hotelswave "),d.Nb(),d.Ob(14,"option",10),d.yc(15," Hotelswave Agent "),d.Nb(),d.Ob(16,"option",11),d.yc(17," Ship Admin "),d.Nb(),d.Ob(18,"option",12),d.yc(19," Ship Agent "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(20,"div",4),d.Ob(21,"div",5),d.Ob(22,"label",13),d.yc(23,"Counter"),d.Nb(),d.Ob(24,"select",7),d.Yb("change",function(e){return t.onCounterChange(e.target.value)}),d.Ob(25,"option",8),d.yc(26," Select a Counter "),d.Nb(),d.wc(27,G,2,3,"option",14),d.Nb(),d.Nb(),d.Nb(),d.Ob(28,"div",4),d.Ob(29,"div",5),d.Ob(30,"label",15),d.yc(31,"Date Range"),d.Nb(),d.Ob(32,"input",16),d.Yb("selected",function(e){return t.selectedDate(e)}),d.Nb(),d.Nb(),d.Nb(),d.Ob(33,"div",4),d.Ob(34,"label",17),d.yc(35,"Report Type"),d.Nb(),d.Ob(36,"div",18),d.Ob(37,"select",19),d.Yb("ngModelChange",function(e){return t.reportType=e})("change",function(){return t.clear()}),d.Ob(38,"option",20),d.yc(39," By Sells "),d.Nb(),d.Ob(40,"option",21),d.yc(41," By Journey Date "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(42,"div",4),d.Ob(43,"div",5),d.Ob(44,"label",13),d.yc(45,"Ship"),d.Nb(),d.Ob(46,"select",7),d.Yb("change",function(e){return t.onShipChange(e.target.value)}),d.Ob(47,"option",8),d.yc(48," Select a Ship "),d.Nb(),d.wc(49,V,2,3,"option",14),d.Nb(),d.Nb(),d.Nb(),d.wc(50,X,3,0,"div",22),d.Ob(51,"div",23),d.Ob(52,"button",24),d.Yb("click",function(){return t.onPrint()}),d.Kb(53,"i",25),d.yc(54," Print"),d.Nb(),d.Nb(),d.Nb(),d.wc(55,ne,4,2,"ng-container",26),d.wc(56,ie,1,0,"ng-template",null,27,d.xc),d.Nb()),2&e){var n=d.pc(57);d.xb(27),d.hc("ngForOf",t.userList),d.xb(5),d.hc("options",t.options),d.xb(5),d.hc("ngModel",t.reportType),d.xb(12),d.hc("ngForOf",t.shipList),d.xb(1),d.hc("ngIf",!!t.counter&&!!t.ship),d.xb(5),d.hc("ngIf",!t.loading)("ngIfElse",n)}},directives:[u.o,u.u,h.m,K.b,u.s,u.k,u.n,h.n,k.a],pipes:[h.e,h.h],styles:["label[_ngcontent-%COMP%]{margin-bottom:.1rem}"]}),le)},{path:"ticket-count",component:(ce=function(){function t(n,i){e(this,t),this.reportService=n,this.util=i,this.daterange={},this.loading=!1}return n(t,[{key:"ngOnInit",value:function(){this.setDateRanges()}},{key:"setDateRanges",value:function(){this.daterange.startDate=new Date,this.daterange.endDate=new Date;var e=new Date;e.setDate(this.daterange.endDate.getDate()+90),this.daterange.startDate.setDate(this.daterange.endDate.getDate()-10),this.daterange.endDate.setDate(this.daterange.endDate.getDate()),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}},{key:"selectedDate",value:function(e){this.daterange.startDate=e.start._d,this.daterange.endDate=e.end._d,this.daterange.label=e.label,this.ship&&this.getTicketCountReport(this.ship.id,this.daterange.startDate,this.daterange.endDate)}},{key:"onSelectShip",value:function(e){this.ship=e,this.getTicketCountReport(e.id,this.daterange.startDate,this.daterange.endDate)}},{key:"getTicketCountReport",value:function(e,t,n){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var o,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=this.util.getDateString(t),r=this.util.getDateString(n),this.reportList=null,this.loading=!0,i.prev=2,i.next=5,this.reportService.getTicketCount(e,o,r).toPromise();case 5:this.reportList=i.sent,this.loading=!1,i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),console.log(i.t0);case 12:case"end":return i.stop()}},i,this,[[2,9]])}))}},{key:"onPrint",value:function(){window.print()}}]),t}(),ce.\u0275fac=function(e){return new(e||ce)(d.Jb(c.a),d.Jb(l.a))},ce.\u0275cmp=d.Db({type:ce,selectors:[["app-ticket-count"]],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-2","d-print-none"],[1,"form-group"],["for","dateRange"],["type","text","id","dateRange","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[3,"ship"],["class","col-md-10",4,"ngIf"],[1,"col-md-10"],[1,"text-center"],[4,"ngIf"],[1,"table","table-striped","table-hover","border"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-row-reverse","d-print-none"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(e,t){1&e&&(d.Ob(0,"div",0),d.Ob(1,"span",1),d.yc(2,"Count ticket"),d.Nb(),d.Nb(),d.Ob(3,"div",0),d.Ob(4,"div",2),d.Ob(5,"div",3),d.Ob(6,"div",4),d.Ob(7,"label",5),d.yc(8,"Date Range"),d.Nb(),d.Ob(9,"input",6),d.Yb("selected",function(e){return t.selectedDate(e)}),d.Nb(),d.Nb(),d.Ob(10,"admin-ship-list",7),d.Yb("ship",function(e){return t.onSelectShip(e)}),d.Nb(),d.Nb(),d.wc(11,se,5,4,"div",8),d.Nb(),d.Nb()),2&e&&(d.xb(9),d.hc("options",t.options),d.xb(2),d.hc("ngIf",t.ship))},directives:[K.b,C.a,h.n,k.a,h.m],styles:[""]}),ce)}],ue=((be=function t(){e(this,t)}).\u0275mod=d.Hb({type:be}),be.\u0275inj=d.Gb({factory:function(e){return new(e||be)},imports:[[a.a,r.e.forChild(de)]]}),be)},HF3I:function(t,i,o){"use strict";o.d(i,"a",function(){return a});var r=o("fXoL"),a=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"loader"],[1,"text-center"]],template:function(e,t){1&e&&(r.Ob(0,"div",0),r.yc(1,"Loading..."),r.Nb(),r.Ob(2,"div",1),r.yc(3,"Please wait ..."),r.Nb())},styles:[".loader[_ngcontent-%COMP%]{color:#137b85;font-size:30px;text-indent:-9999em;overflow:hidden;width:1em;height:1em;border-radius:50%;margin:20px auto;position:relative;transform:translateZ(0);-webkit-animation:load6 1.7s ease infinite,round 1.7s ease infinite;animation:load6 1.7s ease infinite,round 1.7s ease infinite}@-webkit-keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@-webkit-keyframes round{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes round{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),t}()},HymT:function(t,i,o){"use strict";o.d(i,"a",function(){return l});var r=o("uWAI"),a=o("tk/3"),s=o("fXoL"),c=o("tyNb"),l=function(){var t=function(){function t(n,i){e(this,t),this.dataSource=n,this.router=i,this.serviceUrl="api/v1/ships",this.serviceAdminUrl="api/v1/admin/ships",this.serviceAdminAgentUrl="api/v1/adminAgent/ships",this.serviceServiceAdminUrl="api/v1/serviceAdmin/ships",this.serviceServiceAgentUrl="api/v1/serviceAgent/ships"}return n(t,[{key:"getAllShip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new a.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceUrl,null,!1,t)}},{key:"getAdminShipPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new a.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceAdminUrl,null,!0,t)}},{key:"getAdminShip",value:function(e){return this.dataSource.sendRequest("GET",this.serviceAdminUrl+"/"+e,null,!0,null)}},{key:"saveAdminShip",value:function(e){return this.dataSource.sendRequest("POST",this.serviceAdminUrl,e,!0,null)}},{key:"updateAdminShip",value:function(e,t){return this.dataSource.sendRequest("PUT",this.serviceAdminUrl+"/"+e,t,!0,null)}},{key:"getAdminShipMap",value:function(e,t,n){var i=(new a.c).set("startDate",t).set("endDate",n);return this.dataSource.sendRequest("GET",this.serviceAdminUrl+"/shipMap/"+e,null,!0,i)}},{key:"updateAdminShipMap",value:function(e,t,n){var i=(new a.c).set("date",t).set("value",n?"true":"false");return this.dataSource.sendRequest("PUT",this.serviceAdminUrl+"/updateMap/"+e,null,!0,i)}},{key:"getAdminAgentShips",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new a.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceAdminAgentUrl,null,!0,t)}},{key:"getServiceAdminShips",value:function(){return this.dataSource.sendRequest("GET",this.serviceServiceAdminUrl+"/myShips",null,!0,null)}},{key:"getServiceAgentShips",value:function(){return this.dataSource.sendRequest("GET",this.serviceServiceAgentUrl+"/myShips",null,!0,null)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Vb(r.a),s.Vb(c.b))},t.\u0275prov=s.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},z3bE:function(t,i,o){"use strict";o.d(i,"a",function(){return a});var r=o("fXoL"),a=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"getDatesBetween",value:function(e,t){var n=new Date(e),i=new Date(t);i.setDate(i.getDate()-1);for(var o=[];n.getTime()<=i.getTime();){var r=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate();o.push(r),n.setDate(n.getDate()+1)}return o}},{key:"getDateString",value:function(e){var t=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+n}},{key:"getDateStringFromDateObj",value:function(e){return e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)}},{key:"getTimeStringFromTimeObj",value:function(e){return e.hour+":"+e.minute}},{key:"dynamicSortObject",value:function(e){var t=e.split("."),n=t.length;if(n<2){var i=1;return"-"===e[0]&&(i=-1,e=e.substr(1)),function(t,n){return(t[e]<n[e]?-1:t[e]>n[e]?1:0)*i}}if(n>=2)return function(e,i){for(var o=0;o<n;)e=e[t[o]],i=i[t[o]],o++;return e<i?-1:e>i?1:0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();