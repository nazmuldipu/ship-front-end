(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{qGDO:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return v}),n.d(t,"SUsersModule",function(){return p});var r=n("tyNb"),o=n("MKLO"),s=n("mrSG"),i=n("/7iW"),c=n("fXoL"),m=n("FCUJ"),b=(n("zdEN"),n("3Pt+")),u=n("ofXK");function a(e,t){1&e&&(c.Ob(0,"small",16),c.yc(1," Name required "),c.Nb())}function l(e,t){if(1&e&&(c.Ob(0,"small",16),c.Ob(1,"div",17),c.yc(2," Phone number required "),c.Nb(),c.Ob(3,"div",17),c.yc(4," Phone number format 01934953023 "),c.Nb(),c.Nb()),2&e){const e=c.ac();c.xb(1),c.hc("hidden",!e.form.controls.phoneNumber.errors.required),c.xb(2),c.hc("hidden",!e.form.controls.phoneNumber.errors.pattern)}}function d(e,t){1&e&&(c.Ob(0,"small",16),c.yc(1," Commission required "),c.Nb())}function h(e,t){if(1&e){const e=c.Pb();c.Ob(0,"button",18),c.Yb("click",function(){c.qc(e);const t=c.ac();return t.onRemoveAgent(t.user.id)}),c.yc(1," Remove this agent "),c.Nb()}}const f=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}};let g=(()=>{class e{constructor(e){this.builder=e,this.create=new c.n,this.removeAgent=new c.n,this.exists=!1,this.createForm()}ngOnChanges(e){e.user&&this.user&&this.user.id&&(this.exists=!0,this.form.patchValue(Object.assign({},{name:this.user.name,phoneNumber:this.user.phoneNumber,email:this.user.email,commission:this.user.commission})))}createForm(){this.form=this.builder.group({name:["",b.t.required],phoneNumber:["",[b.t.required,b.t.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:"",commission:["",b.t.required]})}submit(){if(this.form.valid){if(this.exists){const e=Object.assign(Object.assign({},this.user),this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.onClear()}}onRemoveAgent(e){this.removeAgent.emit(e),this.onClear()}onClear(){this.form.reset(),this.exists=!1}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(b.c))},e.\u0275cmp=c.Db({type:e,selectors:[["agent-form"]],inputs:{user:"user"},outputs:{create:"create",removeAgent:"removeAgent"},features:[c.vb],decls:27,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["for","commission"],["type","number","id","commission","placeholder","Commission","formControlName","commission",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","mx-1",3,"ngClass"],["type","button","class","btn btn-sm btn-success mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-success","mx-1",3,"click"]],template:function(e,t){1&e&&(c.Ob(0,"form",0),c.Yb("ngSubmit",function(){return t.submit()}),c.Ob(1,"div",1),c.Ob(2,"div",2),c.Ob(3,"label",3),c.yc(4,"Name *"),c.Nb(),c.Kb(5,"input",4),c.wc(6,a,2,0,"small",5),c.Nb(),c.Ob(7,"div",2),c.Ob(8,"label",6),c.yc(9,"Phone *"),c.Nb(),c.Kb(10,"input",7),c.wc(11,l,5,2,"small",5),c.Nb(),c.Ob(12,"div",2),c.Ob(13,"label",8),c.yc(14,"Email"),c.Nb(),c.Kb(15,"input",9),c.Nb(),c.Ob(16,"div",2),c.Ob(17,"label",10),c.yc(18,"Commission *"),c.Nb(),c.Kb(19,"input",11),c.wc(20,d,2,0,"small",5),c.Nb(),c.Nb(),c.Ob(21,"div",12),c.Ob(22,"button",13),c.yc(23),c.Nb(),c.wc(24,h,2,0,"button",14),c.Ob(25,"button",15),c.Yb("click",function(){return t.onClear()}),c.yc(26," Clear "),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.hc("formGroup",t.form),c.xb(6),c.hc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),c.xb(5),c.hc("ngIf",t.form.controls.phoneNumber.errors&&t.form.controls.phoneNumber.touched),c.xb(9),c.hc("ngIf",t.form.controls.commission.errors&&t.form.controls.commission.touched),c.xb(2),c.hc("ngClass",c.nc(7,f,t.form.invalid,t.exists,!t.exists)),c.xb(1),c.Ac(" ",t.exists?"Update":"Create"," User "),c.xb(1),c.hc("ngIf",t.exists))},directives:[b.v,b.l,b.e,b.b,b.k,b.d,u.o,b.h,b.p,u.m],styles:[""]}),e})();const v=[{path:"agent",component:(()=>{class e{constructor(e){this.userService=e}ngOnInit(){this.getServiceAdminAgents()}getServiceAdminAgents(e=0){return Object(s.a)(this,void 0,void 0,function*(){try{this.userPage=yield this.userService.getServiceAdminAgents(e).toPromise()}catch(t){console.log(t)}})}onCreate(e){return Object(s.a)(this,void 0,void 0,function*(){try{yield this.userService.createSerivceAdminAgent(e).toPromise(),this.getServiceAdminAgents()}catch(t){console.log(t)}})}onSelect(e){const t=this.userPage.content.find(t=>t.id===e);this.user=t}onRemoveAgent(e){return Object(s.a)(this,void 0,void 0,function*(){if(console.log("On leave ",e),confirm("Are you sure to remove agent with id = "+e))try{yield this.userService.removeServiceAdminAgent(e).toPromise(),this.getServiceAdminAgents()}catch(t){console.log(t)}})}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(i.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-add-agent"]],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[3,"userPage","userId","page"],[1,"p-3","shadow-sm"],[1,"text-center"],[3,"user","create","removeAgent"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"span",1),c.yc(2,"Agents"),c.Nb(),c.Nb(),c.Ob(3,"div",0),c.Ob(4,"div",2),c.Ob(5,"div",3),c.Ob(6,"service-admin-agent-list",4),c.Yb("userId",function(e){return t.onSelect(e)})("page",function(e){return t.getServiceAdminAgents(e)}),c.Nb(),c.Nb(),c.Ob(7,"div",3),c.Ob(8,"div",5),c.Ob(9,"h3",6),c.yc(10,"Add Agent"),c.Nb(),c.Ob(11,"agent-form",7),c.Yb("create",function(e){return t.onCreate(e)})("removeAgent",function(e){return t.onRemoveAgent(e)}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.xb(6),c.hc("userPage",t.userPage),c.xb(5),c.hc("user",t.user))},directives:[m.a,g],styles:[""]}),e})()}];let p=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[o.a,r.e.forChild(v)]]}),e})()}}]);