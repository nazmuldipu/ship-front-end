!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{HF3I:function(t,i,o){"use strict";o.d(i,"a",function(){return r});var a=o("fXoL"),r=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Db({type:t,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"loader"],[1,"text-center"]],template:function(e,t){1&e&&(a.Ob(0,"div",0),a.yc(1,"Loading..."),a.Nb(),a.Ob(2,"div",1),a.yc(3,"Please wait ..."),a.Nb())},styles:[".loader[_ngcontent-%COMP%]{color:#137b85;font-size:30px;text-indent:-9999em;overflow:hidden;width:1em;height:1em;border-radius:50%;margin:20px auto;position:relative;transform:translateZ(0);-webkit-animation:load6 1.7s ease infinite,round 1.7s ease infinite;animation:load6 1.7s ease infinite,round 1.7s ease infinite}@-webkit-keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@-webkit-keyframes round{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes round{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),t}()},HymT:function(t,i,o){"use strict";o.d(i,"a",function(){return s});var a=o("uWAI"),r=o("tk/3"),c=o("fXoL"),b=o("tyNb"),s=function(){var t=function(){function t(n,i){e(this,t),this.dataSource=n,this.router=i,this.serviceUrl="api/v1/ships",this.serviceAdminUrl="api/v1/admin/ships",this.serviceAdminAgentUrl="api/v1/adminAgent/ships",this.serviceServiceAdminUrl="api/v1/serviceAdmin/ships",this.serviceServiceAgentUrl="api/v1/serviceAgent/ships"}return n(t,[{key:"getAllShip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new r.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceUrl,null,!1,t)}},{key:"getAdminShipPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new r.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceAdminUrl,null,!0,t)}},{key:"getAdminShip",value:function(e){return this.dataSource.sendRequest("GET",this.serviceAdminUrl+"/"+e,null,!0,null)}},{key:"saveAdminShip",value:function(e){return this.dataSource.sendRequest("POST",this.serviceAdminUrl,e,!0,null)}},{key:"updateAdminShip",value:function(e,t){return this.dataSource.sendRequest("PUT",this.serviceAdminUrl+"/"+e,t,!0,null)}},{key:"getAdminShipMap",value:function(e,t,n){var i=(new r.c).set("startDate",t).set("endDate",n);return this.dataSource.sendRequest("GET",this.serviceAdminUrl+"/shipMap/"+e,null,!0,i)}},{key:"updateAdminShipMap",value:function(e,t,n){var i=(new r.c).set("date",t).set("value",n?"true":"false");return this.dataSource.sendRequest("PUT",this.serviceAdminUrl+"/updateMap/"+e,null,!0,i)}},{key:"getAdminAgentShips",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new r.c).set("page",e.toString());return this.dataSource.sendRequest("GET",this.serviceAdminAgentUrl,null,!0,t)}},{key:"getServiceAdminShips",value:function(){return this.dataSource.sendRequest("GET",this.serviceServiceAdminUrl+"/myShips",null,!0,null)}},{key:"getServiceAgentShips",value:function(){return this.dataSource.sendRequest("GET",this.serviceServiceAgentUrl+"/myShips",null,!0,null)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Vb(a.a),c.Vb(b.b))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},P1i2:function(t,i,o){"use strict";o.r(i),o.d(i,"ROUTES",function(){return xe}),o.d(i,"SReportModule",function(){return ke});var a=o("tyNb"),r=o("MKLO"),c=o("mrSG"),b=o("sNvP"),s=o("fXoL"),l=o("ejDa"),d=o("1kSV"),u=o("3Pt+"),h=o("ofXK"),p=o("HF3I");function g(e,t){1&e&&(s.Ob(0,"th"),s.yc(1,"Seat"),s.Nb())}function m(e,t){if(1&e&&(s.Ob(0,"span"),s.yc(1),s.Nb()),2&e){var n=t.$implicit;s.xb(1),s.Ac(" ",n," ")}}function v(e,t){if(1&e&&(s.Ob(0,"th"),s.wc(1,m,2,1,"span",30),s.Nb()),2&e){var n=s.ac().$implicit;s.xb(1),s.hc("ngForOf",n.seatNumbers)}}function y(e,t){if(1&e&&(s.Ob(0,"span"),s.yc(1),s.Nb()),2&e){var n=t.$implicit;s.xb(1),s.Ac("",n,", ")}}var f=function(e,t){return{"bg-success":e,"bg-warning":t}};function N(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.wc(3,v,2,1,"th",29),s.Ob(4,"td"),s.yc(5),s.Nb(),s.Ob(6,"td"),s.yc(7),s.bc(8,"date"),s.Nb(),s.Ob(9,"td"),s.yc(10),s.bc(11,"date"),s.Nb(),s.Ob(12,"td"),s.yc(13),s.Nb(),s.Ob(14,"td"),s.wc(15,y,2,1,"span",30),s.Nb(),s.Ob(16,"td"),s.yc(17),s.Nb(),s.Ob(18,"td"),s.yc(19),s.Nb(),s.Ob(20,"td"),s.yc(21),s.Nb(),s.Ob(22,"td"),s.yc(23),s.Nb(),s.Ob(24,"td",35),s.yc(25),s.Nb(),s.Nb()),2&e){var n=t.$implicit,i=t.index,o=s.ac(3);s.xb(2),s.zc(i+1),s.xb(1),s.hc("ngIf","Reservation"==o.reportType),s.xb(2),s.zc(n.bookingId),s.xb(2),s.zc(s.dc(8,16,n.bookingDate,"MMM d, y, h:mm:ss a")),s.xb(3),s.zc(s.cc(11,19,n.journeyDate)),s.xb(3),s.Bc("",n.customerName," - ",n.customerPhone,""),s.xb(2),s.hc("ngForOf",n.seatNumbers),s.xb(2),s.zc(n.price),s.xb(2),s.Bc("",n.shipNumber," - ",n.routes,""),s.xb(2),s.zc("Agent"==n.role||"Agent"==n.role?"Hotelswave.com":n.soldBy),s.xb(2),s.zc(n.bookingStatus),s.xb(1),s.hc("ngClass",s.mc(21,f,n.paid,!n.paid&&n.bookingId)),s.xb(1),s.Bc(" ",n.paid?"Paid":""," ",!n.paid&&n.bookingId?"Unpaid":""," ")}}function O(e,t){1&e&&s.Kb(0,"td")}function S(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.Ob(3,"td"),s.yc(4),s.Nb(),s.Nb()),2&e){var n=t.$implicit;s.xb(2),s.zc(n.key),s.xb(2),s.zc(n.value)}}function x(e,t){if(1&e&&(s.Ob(0,"div"),s.Ob(1,"h4",27),s.yc(2),s.Nb(),s.Ob(3,"table",28),s.Ob(4,"thead"),s.Ob(5,"tr"),s.Ob(6,"th"),s.yc(7,"Sl."),s.Nb(),s.wc(8,g,2,0,"th",29),s.Ob(9,"th"),s.yc(10,"Ticket no."),s.Nb(),s.Ob(11,"th"),s.yc(12,"Booking Date"),s.Nb(),s.Ob(13,"th"),s.yc(14,"Journey Date"),s.Nb(),s.Ob(15,"th"),s.yc(16,"Passenger Info"),s.Nb(),s.Ob(17,"th"),s.yc(18,"Seats"),s.Nb(),s.Ob(19,"th"),s.yc(20,"Price"),s.Nb(),s.Ob(21,"th"),s.yc(22,"Route"),s.Nb(),s.Ob(23,"th"),s.yc(24,"Sold By"),s.Nb(),s.Ob(25,"th"),s.yc(26,"Status"),s.Nb(),s.Ob(27,"th"),s.yc(28,"Paid"),s.Nb(),s.Nb(),s.Nb(),s.Ob(29,"tbody"),s.wc(30,N,26,24,"tr",30),s.Nb(),s.Ob(31,"tfoot"),s.Ob(32,"tr"),s.Kb(33,"td"),s.wc(34,O,1,0,"td",29),s.Kb(35,"td"),s.Kb(36,"td"),s.Kb(37,"td"),s.Kb(38,"td"),s.Ob(39,"td"),s.yc(40,"TOTAL"),s.Nb(),s.Ob(41,"td"),s.yc(42),s.Nb(),s.Kb(43,"td"),s.Kb(44,"td"),s.Kb(45,"td"),s.Kb(46,"td"),s.Nb(),s.Nb(),s.Nb(),s.Ob(47,"div",3),s.Ob(48,"div",31),s.Ob(49,"table",28),s.Ob(50,"tr"),s.Ob(51,"th",32),s.yc(52),s.Nb(),s.Nb(),s.Ob(53,"tr"),s.Ob(54,"td"),s.yc(55,"Total Sold"),s.Nb(),s.Ob(56,"th"),s.yc(57),s.Nb(),s.Nb(),s.Ob(58,"tr"),s.Ob(59,"td"),s.yc(60,"Total Reserved"),s.Nb(),s.Ob(61,"th"),s.yc(62),s.Nb(),s.Nb(),s.Ob(63,"tr"),s.Ob(64,"td"),s.yc(65,"Total Unsold"),s.Nb(),s.Ob(66,"th",33),s.yc(67),s.Nb(),s.Nb(),s.Ob(68,"tr",34),s.Ob(69,"th"),s.yc(70,"Total"),s.Nb(),s.Ob(71,"th"),s.yc(72),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(73,"div",31),s.Ob(74,"table",28),s.Ob(75,"tr"),s.Ob(76,"th"),s.yc(77,"Agent Name"),s.Nb(),s.Ob(78,"th"),s.yc(79,"No of seat sold / Reserved"),s.Nb(),s.Nb(),s.wc(80,S,5,2,"tr",30),s.bc(81,"keyvalue"),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&e){var n=s.ac(2);s.xb(2),s.Dc(" ",null==n.ship?null:n.ship.shipNumber,"-",n.ship.name," ",n.reportType," report for date of : ",n.dd.day,"-",n.dd.month,"-",n.dd.year," "),s.xb(6),s.hc("ngIf","Reservation"==n.reportType),s.xb(22),s.hc("ngForOf",n.serviceAdminSellsReportList),s.xb(4),s.hc("ngIf","Reservation"==n.reportType),s.xb(8),s.zc(n.total.totalrent),s.xb(10),s.Ac("",n.reportType," sum"),s.xb(5),s.zc(n.total.totalSold),s.xb(5),s.zc(n.total.totalReserved),s.xb(5),s.zc(n.total.totalUnsold),s.xb(5),s.zc(n.total.totalSold+n.total.totalReserved+n.total.totalUnsold),s.xb(8),s.hc("ngForOf",s.cc(81,16,n.soldBy))}}function k(e,t){1&e&&(s.Ob(0,"h4",27),s.Kb(1,"i",36),s.yc(2," No record yet "),s.Nb())}function w(e,t){if(1&e&&(s.Mb(0),s.wc(1,x,82,18,"div",24),s.wc(2,k,3,0,"ng-template",null,26,s.xc),s.Lb()),2&e){var n=s.pc(3),i=s.ac();s.xb(1),s.hc("ngIf",i.serviceAdminSellsReportList.length>0)("ngIfElse",n)}}function R(e,t){1&e&&s.Kb(0,"loading")}var D,A=((D=function(){function t(n){e(this,t),this.reportService=n,this.loading=!1,this.reportType="Reservation",this.serviceAdminSellsReportList=[],this.soldBy=new Map}return n(t,[{key:"ngOnInit",value:function(){var e=new Date;this.dd={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},{key:"onShipSelect",value:function(e){this.ship=e,this.onLoad()}},{key:"onTypeChange",value:function(){this.onLoad()}},{key:"onDateChange",value:function(){this.onLoad()}},{key:"onPrint",value:function(){window.print()}},{key:"onLoad",value:function(){if(this.ship&&null!=this.ship.id)switch(this.reportType){case"Reservation":this.getServiceAdminReservationReportByShipId(this.ship.id,this.dd);break;case"Sells":this.getServiceAdminSellsReportByShipId(this.ship.id,this.dd)}}},{key:"getServiceAdminReservationReportByShipId",value:function(e,t){var n=t.year,i=t.month,o=t.day;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(n,"-").concat(i=i<10?"0"+i:i,"-").concat(o=o<10?"0"+o:o),t.prev=1,this.loading=!0,t.next=5,this.reportService.getServiceAdminShipReservation(e,a).toPromise();case 5:this.serviceAdminSellsReportList=t.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[1,10]])}))}},{key:"getServiceAdminSellsReportByShipId",value:function(e,t){var n=t.year,i=t.month,o=t.day;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(n,"-").concat(i=i<10?"0"+i:i,"-").concat(o=o<10?"0"+o:o),t.prev=1,this.loading=!0,t.next=5,this.reportService.getServiceAdminShipSells(e,a).toPromise();case 5:this.serviceAdminSellsReportList=t.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[1,10]])}))}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalSold:0,totalUnsold:0,totalReserved:0},this.soldBy=new Map,this.serviceAdminSellsReportList.forEach(function(t){if(e.total.totalrent+=t.price,t.seatNumbers){switch(t.bookingStatus){case"SEAT_SOLD":e.total.totalSold+=t.seatNumbers.length;break;case null:e.total.totalUnsold+=t.seatNumbers.length;break;case"SEAT_RESERVED":e.total.totalReserved+=t.seatNumbers.length}if(t.soldBy)switch(t.role){case"Service Agent":case"Service Admin":e.soldBy.set(t.soldBy,e.soldBy.get(t.soldBy)?e.soldBy.get(t.soldBy)+t.seatNumbers.length:t.seatNumbers.length);break;case"Agent":case"Admin":e.soldBy.set("Hotelswave.com",e.soldBy.get("Hotelswave.com")?e.soldBy.get("Hotelswave.com")+t.seatNumbers.length:t.seatNumbers.length)}}})}}]),t}()).\u0275fac=function(e){return new(e||D)(s.Jb(b.a))},D.\u0275cmp=s.Db({type:D,selectors:[["app-sells-report"]],decls:37,vars:4,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-print-none"],[3,"ship"],[1,"col-md-10"],[1,"row","d-print-none"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf","ngIfElse"],["showLoading",""],["noRecord",""],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-md-6"],["colspan","2"],[1,"text-danger"],[1,"bg-light"],[3,"ngClass"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e){var n=s.Pb();s.Ob(0,"div",0),s.Ob(1,"span",1),s.yc(2,"Report"),s.Nb(),s.Nb(),s.Ob(3,"div",2),s.Ob(4,"div",3),s.Ob(5,"div",4),s.Ob(6,"service-admin-ship-list",5),s.Yb("ship",function(e){return t.onShipSelect(e)}),s.Nb(),s.Nb(),s.Ob(7,"div",6),s.Ob(8,"div",7),s.Ob(9,"div",8),s.Ob(10,"div",9),s.Ob(11,"div",10),s.Ob(12,"div",11),s.Ob(13,"div",12),s.yc(14," Date : "),s.Nb(),s.Nb(),s.Ob(15,"input",13,14),s.Yb("ngModelChange",function(e){return t.dd=e})("dateSelect",function(){return t.onDateChange()})("click",function(){return s.qc(n),s.pc(16).toggle()}),s.Nb(),s.Ob(17,"div",15),s.Yb("click",function(){return s.qc(n),s.pc(16).toggle()}),s.Ob(18,"div",12),s.Kb(19,"i",16),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(20,"div",8),s.Ob(21,"div",17),s.Ob(22,"div",11),s.Ob(23,"div",12),s.yc(24,"Type"),s.Nb(),s.Nb(),s.Ob(25,"select",18),s.Yb("ngModelChange",function(e){return t.reportType=e})("change",function(){return t.onTypeChange()}),s.Ob(26,"option",19),s.yc(27," Sells "),s.Nb(),s.Ob(28,"option",20),s.yc(29," Reservation "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(30,"div",21),s.Ob(31,"button",22),s.Yb("click",function(){return t.onPrint()}),s.Kb(32,"i",23),s.yc(33," Print "),s.Nb(),s.Nb(),s.Nb(),s.wc(34,w,4,2,"ng-container",24),s.wc(35,R,1,0,"ng-template",null,25,s.xc),s.Nb(),s.Nb(),s.Nb()}if(2&e){var i=s.pc(36);s.xb(15),s.hc("ngModel",t.dd),s.xb(10),s.hc("ngModel",t.reportType),s.xb(9),s.hc("ngIf",!t.loading)("ngIfElse",i)}},directives:[l.a,d.e,u.b,u.k,u.n,u.s,u.o,u.u,h.n,h.m,h.l,p.a],pipes:[h.h,h.e],styles:[""]}),D),B=o("B01t");function T(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.Ob(3,"td"),s.yc(4),s.bc(5,"date"),s.Nb(),s.Ob(6,"td"),s.yc(7),s.Nb(),s.Ob(8,"td"),s.yc(9),s.Nb(),s.Ob(10,"td"),s.yc(11),s.Nb(),s.Ob(12,"td",27),s.yc(13),s.Nb(),s.Nb()),2&e){var n=t.$implicit,i=t.index;s.xb(2),s.zc(i+1),s.xb(2),s.zc(s.dc(5,6,n.date,"MMM d, y")),s.xb(3),s.zc(n.shipNumber),s.xb(2),s.zc(n.shipName),s.xb(2),s.zc(n.totalNumberOfSeat),s.xb(2),s.zc(n.totalFare)}}function C(e,t){if(1&e&&(s.Ob(0,"div"),s.Ob(1,"h4",24),s.yc(2),s.bc(3,"date"),s.bc(4,"date"),s.Nb(),s.Ob(5,"table",25),s.Ob(6,"thead"),s.Ob(7,"tr"),s.Ob(8,"th"),s.yc(9,"Sl."),s.Nb(),s.Ob(10,"th"),s.yc(11,"Date"),s.Nb(),s.Ob(12,"th"),s.yc(13,"Ship Number"),s.Nb(),s.Ob(14,"th"),s.yc(15,"Ship Name"),s.Nb(),s.Ob(16,"th"),s.yc(17,"Total Number Of Seat"),s.Nb(),s.Ob(18,"th"),s.yc(19,"Total Fare"),s.Nb(),s.Nb(),s.Nb(),s.Ob(20,"tbody"),s.wc(21,T,14,9,"tr",26),s.Nb(),s.Ob(22,"tfoot"),s.Ob(23,"tr"),s.Kb(24,"td"),s.Kb(25,"td"),s.Kb(26,"td"),s.Kb(27,"td"),s.Ob(28,"th",27),s.yc(29,"TOTAL"),s.Nb(),s.Ob(30,"td",27),s.yc(31),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&e){var n=s.ac(2);s.xb(2),s.Cc(" ",n.reportType," report for date of : ",s.dc(3,5,n.daterange.checkinDate," d MMM y")," to ",s.dc(4,8,n.daterange.checkoutDate," d MMM y")," "),s.xb(19),s.hc("ngForOf",n.serviceAdminSellsReportRangeList),s.xb(10),s.zc(n.total)}}function L(e,t){1&e&&(s.Ob(0,"h4",24),s.Kb(1,"i",28),s.yc(2," No record yet "),s.Nb())}function I(e,t){if(1&e&&(s.Mb(0),s.wc(1,C,32,11,"div",21),s.wc(2,L,3,0,"ng-template",null,23,s.xc),s.Lb()),2&e){var n=s.pc(3),i=s.ac();s.xb(1),s.hc("ngIf",i.serviceAdminSellsReportRangeList.length>0)("ngIfElse",n)}}function M(e,t){1&e&&s.Kb(0,"loading")}var z,K=((z=function(){function t(n){e(this,t),this.reportService=n,this.loading=!1,this.daterange={},this.reportType="Sell",this.serviceAdminSellsReportRangeList=[]}return n(t,[{key:"ngOnInit",value:function(){this.setDateRanges()}},{key:"onPrint",value:function(){window.print()}},{key:"setDateRanges",value:function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date;var e=new Date;e.setDate(this.daterange.checkinDate.getDate()-90);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+12),this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:e,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}}},{key:"selectedDate",value:function(e){this.daterange.checkinDate=e.start._d,this.daterange.checkoutDate=e.end._d,this.daterange.label=e.label,this.ship&&this.onReportTypeChange(this.ship.id,this.reportType)}},{key:"onShipSelect",value:function(e){this.ship=e,this.onReportTypeChange(e.id,this.reportType)}},{key:"onReportTypeChange",value:function(e,t){switch(this.reportType=t,this.reportType){case"Sell":this.getServiceAdminShipSellsRange(e,this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getServiceAdminReservationReportRange(e,this.daterange.checkinDate,this.daterange.checkoutDate)}}},{key:"getServiceAdminReservationReportRange",value:function(e,t,n){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=this.getDateString(t),a=this.getDateString(n),this.loading=!0,i.prev=2,i.next=5,this.reportService.getServiceAdminShipReservationRange(e,o,a).toPromise();case 5:this.serviceAdminSellsReportRangeList=i.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),console.log(i.t0);case 13:case"end":return i.stop()}},i,this,[[2,10]])}))}},{key:"getServiceAdminShipSellsRange",value:function(e,t,n){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=this.getDateString(t),a=this.getDateString(n),this.loading=!0,i.prev=2,i.next=5,this.reportService.getServiceAdminShipSellsRange(e,o,a).toPromise();case 5:this.serviceAdminSellsReportRangeList=i.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),console.log(i.t0);case 13:case"end":return i.stop()}},i,this,[[2,10]])}))}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total=0,this.serviceAdminSellsReportRangeList.forEach(function(t){e.total+=t.totalFare})}},{key:"getDateString",value:function(e){var t=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+n}}]),t}()).\u0275fac=function(e){return new(e||z)(s.Jb(b.a))},z.\u0275cmp=s.Db({type:z,selectors:[["app-sells-report-range"]],decls:30,vars:5,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-print-none"],[3,"ship"],[1,"col-md-10"],[1,"row","d-print-none"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-auto"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-sm",3,"ngClass","click"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"col-12"],[4,"ngIf","ngIfElse"],["showLoading",""],["noRecord",""],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e&&(s.Ob(0,"div",0),s.Ob(1,"span",1),s.yc(2,"Report range"),s.Nb(),s.Nb(),s.Ob(3,"div",2),s.Ob(4,"div",3),s.Ob(5,"div",4),s.Ob(6,"service-admin-ship-list",5),s.Yb("ship",function(e){return t.onShipSelect(e)}),s.Nb(),s.Nb(),s.Ob(7,"div",6),s.Ob(8,"div",7),s.Ob(9,"div",8),s.Ob(10,"div",9),s.Ob(11,"div",10),s.Ob(12,"div",11),s.Kb(13,"i",12),s.Nb(),s.Nb(),s.Ob(14,"input",13),s.Yb("selected",function(e){return t.selectedDate(e)}),s.Nb(),s.Nb(),s.Nb(),s.Ob(15,"div",14),s.Ob(16,"div",15),s.Ob(17,"a",16),s.Yb("click",function(){return t.onReportTypeChange(t.ship.id,"Sell")}),s.yc(18,"Sells"),s.Nb(),s.Ob(19,"a",16),s.Yb("click",function(){return t.onReportTypeChange(t.ship.id,"Reserve")}),s.yc(20,"Journey Date"),s.Nb(),s.Nb(),s.Nb(),s.Ob(21,"div",17),s.Ob(22,"button",18),s.Yb("click",function(){return t.onPrint()}),s.Kb(23,"i",19),s.yc(24," Print "),s.Nb(),s.Nb(),s.Nb(),s.Ob(25,"div",3),s.Ob(26,"div",20),s.wc(27,I,4,2,"ng-container",21),s.wc(28,M,1,0,"ng-template",null,22,s.xc),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&e){var n=s.pc(29);s.xb(14),s.hc("options",t.options),s.xb(3),s.hc("ngClass","Sell"==t.reportType?"btn-primary text-white":"btn-light"),s.xb(2),s.hc("ngClass","Reserve"==t.reportType?"btn-primary text-white":"btn-light"),s.xb(8),s.hc("ngIf",!t.loading)("ngIfElse",n)}},directives:[l.a,B.b,h.l,h.n,h.m,p.a],pipes:[h.e],styles:[""]}),z);function E(e,t){if(1&e&&(s.Ob(0,"span"),s.yc(1),s.Nb()),2&e){var n=t.$implicit;s.xb(1),s.Ac("",n,", ")}}var P=function(e,t){return{"bg-success":e,"bg-warning":t}};function F(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.Ob(3,"td"),s.yc(4),s.Nb(),s.Ob(5,"td"),s.yc(6),s.bc(7,"date"),s.Nb(),s.Ob(8,"td"),s.yc(9),s.bc(10,"date"),s.Nb(),s.Ob(11,"td"),s.yc(12),s.Nb(),s.Ob(13,"td"),s.wc(14,E,2,1,"span",25),s.Nb(),s.Ob(15,"td"),s.yc(16),s.Nb(),s.Ob(17,"td"),s.yc(18),s.Nb(),s.Ob(19,"td"),s.yc(20),s.Nb(),s.Ob(21,"td"),s.yc(22),s.Nb(),s.Ob(23,"td"),s.yc(24),s.Nb(),s.Ob(25,"td",32),s.yc(26),s.Nb(),s.Nb()),2&e){var n=t.$implicit,i=t.index;s.xb(2),s.zc(i+1),s.xb(2),s.zc(n.bookingId),s.xb(2),s.zc(s.dc(7,15,n.bookingDate,"MMM d, y, h:mm:ss a")),s.xb(3),s.zc(s.cc(10,18,n.journeyDate)),s.xb(3),s.Bc("",n.customerName," - ",n.customerPhone,""),s.xb(2),s.hc("ngForOf",n.seatNumbers),s.xb(2),s.zc(n.seatNumbers.length),s.xb(2),s.zc(n.price),s.xb(2),s.zc(n.shipNumber),s.xb(2),s.zc("Agent"==n.role||"Agent"==n.role?"Hotelswave.com":n.soldBy),s.xb(2),s.zc(n.bookingStatus),s.xb(1),s.hc("ngClass",s.mc(20,P,n.paid,!n.paid&&n.bookingId)),s.xb(1),s.Bc(" ",n.paid?"Paid":""," ",!n.paid&&n.bookingId?"Unpaid":""," ")}}function U(e,t){1&e&&s.Kb(0,"td")}function Y(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.Ob(3,"td"),s.yc(4),s.Nb(),s.Nb()),2&e){var n=t.$implicit;s.xb(2),s.zc(n.key),s.xb(2),s.zc(n.value)}}function j(e,t){if(1&e&&(s.Ob(0,"div"),s.Ob(1,"h4",23),s.yc(2),s.Nb(),s.Ob(3,"table",24),s.Ob(4,"thead"),s.Ob(5,"tr"),s.Ob(6,"th"),s.yc(7,"Sl."),s.Nb(),s.Ob(8,"th"),s.yc(9,"Ticket no."),s.Nb(),s.Ob(10,"th"),s.yc(11,"Issue Date"),s.Nb(),s.Ob(12,"th"),s.yc(13,"Journey Date"),s.Nb(),s.Ob(14,"th"),s.yc(15,"Passenger Info"),s.Nb(),s.Ob(16,"th"),s.yc(17,"Seats"),s.Nb(),s.Ob(18,"th"),s.yc(19,"Seat"),s.Nb(),s.Ob(20,"th"),s.yc(21,"Price"),s.Nb(),s.Ob(22,"th"),s.yc(23,"Route"),s.Nb(),s.Ob(24,"th"),s.yc(25,"Sold By"),s.Nb(),s.Ob(26,"th"),s.yc(27,"Status"),s.Nb(),s.Ob(28,"th"),s.yc(29,"Paid"),s.Nb(),s.Nb(),s.Nb(),s.Ob(30,"tbody"),s.wc(31,F,27,23,"tr",25),s.Nb(),s.Ob(32,"tfoot"),s.Ob(33,"tr"),s.Kb(34,"td"),s.wc(35,U,1,0,"td",26),s.Kb(36,"td"),s.Kb(37,"td"),s.Kb(38,"td"),s.Kb(39,"td"),s.Kb(40,"td"),s.Ob(41,"td"),s.yc(42,"TOTAL"),s.Nb(),s.Ob(43,"td"),s.yc(44),s.Nb(),s.Kb(45,"td"),s.Kb(46,"td"),s.Kb(47,"td"),s.Kb(48,"td"),s.Nb(),s.Nb(),s.Nb(),s.Ob(49,"div",3),s.Ob(50,"div",27),s.Ob(51,"table",28),s.Ob(52,"tr"),s.Ob(53,"th",29),s.yc(54,"Reservation Sum"),s.Nb(),s.Nb(),s.Ob(55,"tr"),s.Ob(56,"td"),s.yc(57,"Total Sold"),s.Nb(),s.Ob(58,"th"),s.yc(59),s.Nb(),s.Nb(),s.Ob(60,"tr"),s.Ob(61,"td"),s.yc(62,"Total Reserved"),s.Nb(),s.Ob(63,"th"),s.yc(64),s.Nb(),s.Nb(),s.Ob(65,"tr"),s.Ob(66,"td"),s.yc(67,"Total Unsold"),s.Nb(),s.Ob(68,"th",30),s.yc(69),s.Nb(),s.Nb(),s.Ob(70,"tr",31),s.Ob(71,"th"),s.yc(72,"Total"),s.Nb(),s.Ob(73,"th"),s.yc(74),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(75,"div",27),s.Ob(76,"table",28),s.Ob(77,"tr"),s.Ob(78,"th"),s.yc(79,"Agent Name"),s.Nb(),s.Ob(80,"th"),s.yc(81,"No of seat sold / Reserved"),s.Nb(),s.Nb(),s.wc(82,Y,5,2,"tr",25),s.bc(83,"keyvalue"),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&e){var n=s.ac(2);s.xb(2),s.Dc(" ",null==n.ship?null:n.ship.shipNumber,"-",n.ship.name," ",n.reportType," report for date of : ",n.dd.day,"-",n.dd.month,"-",n.dd.year," "),s.xb(29),s.hc("ngForOf",n.sumReportList),s.xb(4),s.hc("ngIf","Reservation"==n.reportType),s.xb(9),s.zc(n.total.totalrent),s.xb(15),s.zc(n.total.totalSold),s.xb(5),s.zc(n.total.totalReserved),s.xb(5),s.zc(n.total.totalUnsold),s.xb(5),s.zc(n.total.totalSold+n.total.totalReserved+n.total.totalUnsold),s.xb(8),s.hc("ngForOf",s.cc(83,14,n.soldBy))}}function H(e,t){1&e&&(s.Ob(0,"h4",23),s.Kb(1,"i",33),s.yc(2," No record yet "),s.Nb())}function $(e,t){if(1&e&&(s.Mb(0),s.wc(1,j,84,16,"div",20),s.wc(2,H,3,0,"ng-template",null,22,s.xc),s.Lb()),2&e){var n=s.pc(3),i=s.ac();s.xb(1),s.hc("ngIf",i.reportList.length>0)("ngIfElse",n)}}function _(e,t){1&e&&s.Kb(0,"loading")}var q,J=((q=function(){function t(n){e(this,t),this.reportService=n,this.loading=!1,this.reportList=[],this.sumReportList=[],this.soldBy=new Map}return n(t,[{key:"ngOnInit",value:function(){var e=new Date;this.dd={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},{key:"onShipSelect",value:function(e){this.ship=e,this.onDateChange()}},{key:"onDateChange",value:function(){this.getServiceAdminReservationReportByShipId(this.ship.id,this.dd)}},{key:"getServiceAdminReservationReportByShipId",value:function(e,t){var n=t.year,i=t.month,o=t.day;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,a="".concat(n,"-").concat(i=i<10?"0"+i:i,"-").concat(o=o<10?"0"+o:o),t.prev=2,t.next=5,this.reportService.getServiceAdminShipReservation(e,a).toPromise();case 5:this.reportList=t.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[2,10]])}))}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalSold:0,totalUnsold:0,totalReserved:0},this.soldBy=new Map,this.sumReportList=[],this.reportList.forEach(function(t){var n=e.sumReportList.find(function(e){return e.bookingId==t.bookingId});if(n&&n.bookingId?(t.seatNumbers.forEach(function(e){n.seatNumbers.push(e)}),e.sumReportList.splice(e.sumReportList.findIndex(function(e){return e.bookingId==t.bookingId}),1,n)):null!=t.bookingId&&e.sumReportList.push(t),e.total.totalrent+=t.price,t.seatNumbers){switch(t.bookingStatus){case"SEAT_SOLD":e.total.totalSold+=t.seatNumbers.length;break;case null:e.total.totalUnsold+=t.seatNumbers.length;break;case"SEAT_RESERVED":e.total.totalReserved+=t.seatNumbers.length}if(t.soldBy)switch(t.role){case"Service Agent":case"Service Admin":e.soldBy.set(t.soldBy,e.soldBy.get(t.soldBy)?e.soldBy.get(t.soldBy)+t.seatNumbers.length:t.seatNumbers.length);break;case"Agent":case"Admin":e.soldBy.set("Hotelswave.com",e.soldBy.get("Hotelswave.com")?e.soldBy.get("Hotelswave.com")+t.seatNumbers.length:t.seatNumbers.length)}}})}},{key:"onPrint",value:function(){window.print()}}]),t}()).\u0275fac=function(e){return new(e||q)(s.Jb(b.a))},q.\u0275cmp=s.Db({type:q,selectors:[["app-counter-report"]],decls:27,vars:3,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-print-none"],[3,"ship"],[1,"col-md-10"],[1,"row","d-print-none"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf","ngIfElse"],["showLoading",""],["noRecord",""],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm","font-weight-light",2,"font-size","8px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-6","col-6"],[1,"table","table-bordered","table-hover","table-responsive-sm"],["colspan","2"],[1,"text-danger"],[1,"bg-light"],[3,"ngClass"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e){var n=s.Pb();s.Ob(0,"div",0),s.Ob(1,"span",1),s.yc(2,"Counter Report"),s.Nb(),s.Nb(),s.Ob(3,"div",2),s.Ob(4,"div",3),s.Ob(5,"div",4),s.Ob(6,"service-admin-ship-list",5),s.Yb("ship",function(e){return t.onShipSelect(e)}),s.Nb(),s.Nb(),s.Ob(7,"div",6),s.Ob(8,"div",7),s.Ob(9,"div",8),s.Ob(10,"div",9),s.Ob(11,"div",10),s.Ob(12,"div",11),s.Ob(13,"div",12),s.yc(14," Date : "),s.Nb(),s.Nb(),s.Ob(15,"input",13,14),s.Yb("ngModelChange",function(e){return t.dd=e})("dateSelect",function(){return t.onDateChange()})("click",function(){return s.qc(n),s.pc(16).toggle()}),s.Nb(),s.Ob(17,"div",15),s.Yb("click",function(){return s.qc(n),s.pc(16).toggle()}),s.Ob(18,"div",12),s.Kb(19,"i",16),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(20,"div",17),s.Ob(21,"button",18),s.Yb("click",function(){return t.onPrint()}),s.Kb(22,"i",19),s.yc(23," Print "),s.Nb(),s.Nb(),s.Nb(),s.wc(24,$,4,2,"ng-container",20),s.wc(25,_,1,0,"ng-template",null,21,s.xc),s.Nb(),s.Nb(),s.Nb()}if(2&e){var i=s.pc(26);s.xb(15),s.hc("ngModel",t.dd),s.xb(9),s.hc("ngIf",!t.loading)("ngIfElse",i)}},directives:[l.a,d.e,u.b,u.k,u.n,h.n,h.m,h.l,p.a],pipes:[h.h,h.e],styles:[""]}),q);function G(e,t){1&e&&(s.Ob(0,"div"),s.Kb(1,"loading"),s.Nb())}function V(e,t){1&e&&(s.Ob(0,"th"),s.yc(1,"Seat"),s.Nb())}function X(e,t){if(1&e&&(s.Ob(0,"span"),s.yc(1),s.Nb()),2&e){var n=t.$implicit;s.xb(1),s.Ac(" ",n," ")}}function W(e,t){if(1&e&&(s.Ob(0,"th"),s.wc(1,X,2,1,"span",25),s.Nb()),2&e){var n=s.ac().$implicit;s.xb(1),s.hc("ngForOf",n.seatNumbers)}}function Z(e,t){if(1&e&&(s.Ob(0,"span"),s.yc(1),s.Nb()),2&e){var n=t.$implicit;s.xb(1),s.Ac("",n,", ")}}var Q=function(e,t){return{"bg-success":e,"bg-warning":t}};function ee(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.wc(3,W,2,1,"th",20),s.Ob(4,"td"),s.yc(5),s.Nb(),s.Ob(6,"td"),s.yc(7),s.bc(8,"date"),s.Nb(),s.Ob(9,"td"),s.yc(10),s.bc(11,"date"),s.Nb(),s.Ob(12,"td"),s.yc(13),s.Nb(),s.Ob(14,"td"),s.wc(15,Z,2,1,"span",25),s.Nb(),s.Ob(16,"td"),s.yc(17),s.Nb(),s.Ob(18,"td"),s.yc(19),s.Nb(),s.Ob(20,"td"),s.yc(21),s.Nb(),s.Ob(22,"td"),s.yc(23),s.Nb(),s.Ob(24,"td",30),s.yc(25),s.Nb(),s.Nb()),2&e){var n=t.$implicit,i=t.index,o=s.ac(2);s.xb(2),s.zc(i+1),s.xb(1),s.hc("ngIf","Reservation"==o.reportType),s.xb(2),s.zc(n.bookingId),s.xb(2),s.zc(s.dc(8,15,n.bookingDate,"MMM d, y, h:mm:ss a")),s.xb(3),s.zc(s.cc(11,18,n.journeyDate)),s.xb(3),s.Bc("",n.customerName," - ",n.customerPhone,""),s.xb(2),s.hc("ngForOf",n.seatNumbers),s.xb(2),s.zc(n.price),s.xb(2),s.zc("ROLE_AGENT"==n.role||"ROLE_ADMIN"==n.role?"Hotelswave.com":n.soldBy),s.xb(2),s.zc(n.bookingStatus),s.xb(2),s.zc(1==n.duplicate?"DUPLICATE":""),s.xb(1),s.hc("ngClass",s.mc(20,Q,n.paid,!n.paid&&n.bookingId)),s.xb(1),s.Bc(" ",n.paid?"Paid":""," ",!n.paid&&n.bookingId?"Unpaid":""," ")}}function te(e,t){1&e&&s.Kb(0,"td")}function ne(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.Ob(3,"td"),s.yc(4),s.Nb(),s.Nb()),2&e){var n=t.$implicit;s.xb(2),s.zc(n.key),s.xb(2),s.zc(n.value)}}function ie(e,t){if(1&e&&(s.Ob(0,"div"),s.Ob(1,"h3",23),s.yc(2),s.Nb(),s.Ob(3,"table",24),s.Ob(4,"thead"),s.Ob(5,"tr"),s.Ob(6,"th"),s.yc(7,"Sl."),s.Nb(),s.wc(8,V,2,0,"th",20),s.Ob(9,"th"),s.yc(10,"Ticket no."),s.Nb(),s.Ob(11,"th"),s.yc(12,"Booking Date"),s.Nb(),s.Ob(13,"th"),s.yc(14,"Journey Date"),s.Nb(),s.Ob(15,"th"),s.yc(16,"Passenger Info"),s.Nb(),s.Ob(17,"th"),s.yc(18,"Seats"),s.Nb(),s.Ob(19,"th"),s.yc(20,"Price"),s.Nb(),s.Ob(21,"th"),s.yc(22,"Sold By"),s.Nb(),s.Ob(23,"th"),s.yc(24,"Status"),s.Nb(),s.Ob(25,"th"),s.yc(26,"Duplicate"),s.Nb(),s.Ob(27,"th"),s.yc(28,"Paid"),s.Nb(),s.Nb(),s.Nb(),s.Ob(29,"tbody"),s.wc(30,ee,26,23,"tr",25),s.Nb(),s.Ob(31,"tfoot"),s.Ob(32,"tr"),s.Kb(33,"td"),s.wc(34,te,1,0,"td",20),s.Kb(35,"td"),s.Kb(36,"td"),s.Kb(37,"td"),s.Kb(38,"td"),s.Ob(39,"td"),s.yc(40,"TOTAL"),s.Nb(),s.Ob(41,"td"),s.yc(42),s.Nb(),s.Kb(43,"td"),s.Kb(44,"td"),s.Kb(45,"td"),s.Kb(46,"td"),s.Nb(),s.Nb(),s.Nb(),s.Ob(47,"div",3),s.Ob(48,"div",26),s.Ob(49,"table",24),s.Ob(50,"tr"),s.Ob(51,"th",27),s.yc(52),s.Nb(),s.Nb(),s.Ob(53,"tr"),s.Ob(54,"td"),s.yc(55,"Total Sold"),s.Nb(),s.Ob(56,"th"),s.yc(57),s.Nb(),s.Nb(),s.Ob(58,"tr"),s.Ob(59,"td"),s.yc(60,"Total Reserved"),s.Nb(),s.Ob(61,"th"),s.yc(62),s.Nb(),s.Nb(),s.Ob(63,"tr"),s.Ob(64,"td"),s.yc(65,"Total Unsold"),s.Nb(),s.Ob(66,"th",28),s.yc(67),s.Nb(),s.Nb(),s.Ob(68,"tr"),s.Ob(69,"td"),s.yc(70,"Total Duplicate"),s.Nb(),s.Ob(71,"th",28),s.yc(72),s.Nb(),s.Nb(),s.Ob(73,"tr",29),s.Ob(74,"th"),s.yc(75,"Total"),s.Nb(),s.Ob(76,"th"),s.yc(77),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(78,"div",26),s.Ob(79,"table",24),s.Ob(80,"tr"),s.Ob(81,"th"),s.yc(82,"Agent Name"),s.Nb(),s.Ob(83,"th"),s.yc(84,"No of seat sold / Reserved"),s.Nb(),s.Nb(),s.wc(85,ne,5,2,"tr",25),s.bc(86,"keyvalue"),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&e){var n=s.ac();s.xb(2),s.Dc(" ",null==n.ship?null:n.ship.shipNumber,"-",n.ship.name," ",n.reportType," report for date of : ",n.dd.day,"-",n.dd.month,"-",n.dd.year," "),s.xb(6),s.hc("ngIf","Reservation"==n.reportType),s.xb(22),s.hc("ngForOf",n.serviceAdminSellsReportList),s.xb(4),s.hc("ngIf","Reservation"==n.reportType),s.xb(8),s.zc(n.total.totalrent),s.xb(10),s.Ac("",n.reportType," sum"),s.xb(5),s.zc(n.total.totalSold),s.xb(5),s.zc(n.total.totalReserved),s.xb(5),s.zc(n.total.totalUnsold),s.xb(5),s.zc(n.total.totalDuplicate),s.xb(5),s.zc(n.total.totalSold+n.total.totalReserved+n.total.totalUnsold),s.xb(8),s.hc("ngForOf",s.cc(86,17,n.soldBy))}}function oe(e,t){1&e&&(s.Ob(0,"h4",23),s.Kb(1,"i",31),s.yc(2," No record yet"),s.Nb())}var ae,re=((ae=function(){function t(n){e(this,t),this.reportService=n,this.serviceAdminSellsReportList=[],this.soldBy=new Map,this.loading=!1}return n(t,[{key:"ngOnInit",value:function(){var e=new Date;this.dd={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},{key:"getServiceAdminBooking",value:function(e,t){var n=t.year,i=t.month,o=t.day;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,a="".concat(n,"-").concat(i=i<10?"0"+i:i,"-").concat(o=o<10?"0"+o:o),t.prev=2,t.next=5,this.reportService.getServiceAdminBooking(e,a).toPromise();case 5:this.serviceAdminSellsReportList=t.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[2,10]])}))}},{key:"onShipSelect",value:function(e){this.ship=e,this.getServiceAdminBooking(e.id,this.dd)}},{key:"onDateChange",value:function(){this.getServiceAdminBooking(this.ship.id,this.dd)}},{key:"onPrint",value:function(){window.print()}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalSold:0,totalUnsold:0,totalReserved:0,totalDuplicate:0},this.soldBy=new Map;var t=[];this.serviceAdminSellsReportList.forEach(function(n){if(e.total.totalrent+=n.price,n.seatNumbers.forEach(function(i){t.includes(i)?(n.duplicate=!0,e.total.totalDuplicate+=1):t.push(i)}),n.seatNumbers){switch(n.bookingStatus){case"SEAT_SOLD":e.total.totalSold+=n.seatNumbers.length;break;case null:e.total.totalUnsold+=n.seatNumbers.length;break;case"SEAT_RESERVED":e.total.totalReserved+=n.seatNumbers.length}if(n.soldBy)switch(n.role){case"ROLE_SERVICE_AGENT":case"ROLE_SERVICE_ADMIN":e.soldBy.set(n.soldBy,e.soldBy.get(n.soldBy)?e.soldBy.get(n.soldBy)+n.seatNumbers.length:n.seatNumbers.length);break;case"ROLE_AGENT":case"ROLE_ADMIN":e.soldBy.set("Hotelswave.com",e.soldBy.get("Hotelswave.com")?e.soldBy.get("Hotelswave.com")+n.seatNumbers.length:n.seatNumbers.length)}}}),this.serviceAdminSellsReportList.sort(function(e,t){return e.seatNumbers[0].localeCompare(t.seatNumbers[0])})}}]),t}()).\u0275fac=function(e){return new(e||ae)(s.Jb(b.a))},ae.\u0275cmp=s.Db({type:ae,selectors:[["app-booking-report-list"]],decls:29,vars:4,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-print-none"],[3,"ship"],[1,"col-md-10"],[1,"row","d-print-none"],[1,"col-auto"],[1,"form-group","mb-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"fa","fa-calendar"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"col-md-6"],["colspan","2"],[1,"text-danger"],[1,"bg-light"],[3,"ngClass"],[1,"fa","fa-frown-o"]],template:function(e,t){if(1&e){var n=s.Pb();s.Ob(0,"div",0),s.Ob(1,"span",1),s.yc(2,"Booking Report"),s.Nb(),s.Nb(),s.Ob(3,"div",2),s.Ob(4,"div",3),s.Ob(5,"div",4),s.Ob(6,"service-admin-ship-list",5),s.Yb("ship",function(e){return t.onShipSelect(e)}),s.Nb(),s.Nb(),s.Ob(7,"div",6),s.Ob(8,"div",7),s.Ob(9,"div",8),s.Ob(10,"div",9),s.Ob(11,"div",10),s.Ob(12,"div",11),s.Ob(13,"div",12),s.yc(14," Date : "),s.Nb(),s.Nb(),s.Ob(15,"input",13,14),s.Yb("ngModelChange",function(e){return t.dd=e})("dateSelect",function(){return t.onDateChange()})("click",function(){return s.qc(n),s.pc(16).toggle()}),s.Nb(),s.Ob(17,"div",15),s.Yb("click",function(){return s.qc(n),s.pc(16).toggle()}),s.Ob(18,"div",12),s.Kb(19,"i",16),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(20,"div",8),s.Ob(21,"div",17),s.Ob(22,"button",18),s.Yb("click",function(){return t.onPrint()}),s.Kb(23,"i",19),s.yc(24," Print "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.wc(25,G,2,0,"div",20),s.wc(26,ie,87,19,"div",21),s.wc(27,oe,3,0,"ng-template",null,22,s.xc),s.Nb(),s.Nb(),s.Nb()}if(2&e){var i=s.pc(28);s.xb(15),s.hc("ngModel",t.dd),s.xb(10),s.hc("ngIf",t.loading),s.xb(1),s.hc("ngIf",t.serviceAdminSellsReportList.length>0&&!t.loading)("ngIfElse",i)}},directives:[l.a,d.e,u.b,u.k,u.n,h.n,p.a,h.m,h.l],pipes:[h.h,h.e],styles:[""]}),ae),ce=o("/7iW"),be=o("z3bE"),se=o("HymT");function le(e,t){if(1&e&&(s.Ob(0,"option",28),s.yc(1),s.Nb()),2&e){var n=t.$implicit;s.hc("value",n.id),s.xb(1),s.Bc(" ",n.name,"[",n.phoneNumber,"] ")}}function de(e,t){if(1&e&&(s.Ob(0,"option",28),s.yc(1),s.Nb()),2&e){var n=t.$implicit;s.hc("value",n.id),s.xb(1),s.Bc(" ",n.shipNumber,"-",n.name," ")}}function ue(e,t){if(1&e){var n=s.Pb();s.Ob(0,"div",29),s.Ob(1,"button",30),s.Yb("click",function(){return s.qc(n),s.ac().onSearch()}),s.yc(2,"Search"),s.Nb(),s.Nb()}}function he(e,t){1&e&&s.Kb(0,"loading")}function pe(e,t){if(1&e&&(s.Ob(0,"span"),s.yc(1),s.Nb()),2&e){var n=t.$implicit;s.xb(1),s.Ac("",n,", ")}}function ge(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.Ob(3,"td"),s.yc(4),s.Nb(),s.Ob(5,"td"),s.yc(6),s.bc(7,"date"),s.Nb(),s.Ob(8,"td"),s.yc(9),s.bc(10,"date"),s.Nb(),s.Ob(11,"td"),s.yc(12),s.Nb(),s.Ob(13,"td"),s.wc(14,pe,2,1,"span",35),s.Nb(),s.Ob(15,"td"),s.yc(16),s.Nb(),s.Ob(17,"td"),s.yc(18),s.Nb(),s.Ob(19,"td"),s.yc(20),s.Nb(),s.Ob(21,"td"),s.yc(22),s.Nb(),s.Ob(23,"td"),s.yc(24),s.Nb(),s.Nb()),2&e){var n=t.$implicit,i=t.index;s.xb(2),s.zc(i+1),s.xb(2),s.zc(n.bookingId),s.xb(2),s.zc(s.dc(7,12,n.bookingDate,"MMM d, y, h:mm:ss a")),s.xb(3),s.zc(s.cc(10,15,n.journeyDate)),s.xb(3),s.Bc("",n.customerName," - ",n.customerPhone,""),s.xb(2),s.hc("ngForOf",n.seatNumbers),s.xb(2),s.zc(n.price),s.xb(2),s.Ac("",n.hotelswaveCommission+n.hotelswaveAgentCommission+n.shipAgentCommission," "),s.xb(2),s.zc(n.shipNumber),s.xb(2),s.zc(n.soldBy),s.xb(2),s.zc(n.bookingStatus)}}function me(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.Nb(),s.Ob(3,"td"),s.yc(4),s.Nb(),s.Ob(5,"td"),s.yc(6),s.Nb(),s.Ob(7,"td"),s.yc(8),s.Nb(),s.Ob(9,"td"),s.yc(10),s.Nb(),s.Nb()),2&e){var n=t.$implicit;s.xb(2),s.zc(n.key),s.xb(2),s.zc(n.value.totalSeatNumber),s.xb(2),s.zc(n.value.hotelswaveCommission),s.xb(2),s.zc(n.value.hotelswaveAgentCommission),s.xb(2),s.zc(n.value.shipAgentCommission)}}function ve(e,t){if(1&e&&(s.Ob(0,"div",31),s.Ob(1,"div",32),s.Ob(2,"h4",33),s.yc(3),s.bc(4,"date"),s.bc(5,"date"),s.Nb(),s.Nb(),s.Ob(6,"table",34),s.Ob(7,"thead"),s.Ob(8,"tr"),s.Ob(9,"th"),s.yc(10,"Sl."),s.Nb(),s.Ob(11,"th"),s.yc(12,"Ticket no."),s.Nb(),s.Ob(13,"th"),s.yc(14,"Sells Date"),s.Nb(),s.Ob(15,"th"),s.yc(16,"Journey Date"),s.Nb(),s.Ob(17,"th"),s.yc(18,"Passenger Info"),s.Nb(),s.Ob(19,"th"),s.yc(20,"Seats"),s.Nb(),s.Ob(21,"th"),s.yc(22,"Price"),s.Nb(),s.Ob(23,"th"),s.yc(24,"Commission"),s.Nb(),s.Ob(25,"th"),s.yc(26,"Route"),s.Nb(),s.Ob(27,"th"),s.yc(28,"Sold By"),s.Nb(),s.Ob(29,"th"),s.yc(30,"Status"),s.Nb(),s.Nb(),s.Nb(),s.Ob(31,"tbody"),s.wc(32,ge,25,17,"tr",35),s.Nb(),s.Ob(33,"tfoot"),s.Ob(34,"tr"),s.Kb(35,"td"),s.Kb(36,"td"),s.Kb(37,"td"),s.Kb(38,"td"),s.Kb(39,"td"),s.Ob(40,"td"),s.yc(41,"TOTAL"),s.Nb(),s.Ob(42,"td"),s.Ob(43,"strong"),s.yc(44),s.Nb(),s.Nb(),s.Ob(45,"td"),s.Ob(46,"strong"),s.yc(47),s.Nb(),s.Nb(),s.Kb(48,"td"),s.Kb(49,"td"),s.Kb(50,"td"),s.Nb(),s.Nb(),s.Nb(),s.Ob(51,"table",36),s.Ob(52,"tr"),s.Ob(53,"th"),s.yc(54,"Counter Name"),s.Nb(),s.Ob(55,"th"),s.yc(56,"No of seat sold / Reserved"),s.Nb(),s.Ob(57,"th"),s.yc(58,"Hotelswave Commission"),s.Nb(),s.Ob(59,"th"),s.yc(60,"Hotelswave Agent Commission"),s.Nb(),s.Ob(61,"th"),s.yc(62,"Ship Agent Commission"),s.Nb(),s.Nb(),s.wc(63,me,11,5,"tr",35),s.bc(64,"keyvalue"),s.Nb(),s.Nb()),2&e){var n=s.ac();s.xb(3),s.Dc("",n.reportType," report of ",n.counter.name," from ",s.cc(4,10,n.daterange.startDate)," to ",s.cc(5,12,n.daterange.endDate)," for ",n.ship.shipNumber,"-",n.ship.name,""),s.xb(29),s.hc("ngForOf",n.reportList),s.xb(12),s.Ac(" ",n.total.totalrent," "),s.xb(3),s.zc(n.total.totalCommission),s.xb(16),s.hc("ngForOf",s.cc(64,14,n.soldBy))}}function ye(e,t){if(1&e&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.yc(2),s.bc(3,"date"),s.Nb(),s.Ob(4,"td"),s.yc(5),s.Nb(),s.Ob(6,"td"),s.yc(7),s.Nb(),s.Ob(8,"td"),s.yc(9),s.Nb(),s.Nb()),2&e){var n=t.$implicit;s.xb(2),s.zc(s.dc(3,4,n.date,"MMM d, y, h:mm:ss a")),s.xb(3),s.zc(n.explanation),s.xb(2),s.zc(n.debit),s.xb(2),s.zc(n.credit)}}function fe(e,t){if(1&e&&(s.Ob(0,"table",15),s.Ob(1,"thead"),s.Ob(2,"tr"),s.Ob(3,"th"),s.yc(4,"Date"),s.Nb(),s.Ob(5,"th"),s.yc(6,"Explanation"),s.Nb(),s.Ob(7,"th"),s.yc(8,"Debit"),s.Nb(),s.Ob(9,"th"),s.yc(10,"Credit"),s.Nb(),s.Nb(),s.Nb(),s.Ob(11,"tbody"),s.wc(12,ye,10,7,"tr",16),s.Nb(),s.Ob(13,"tfoot"),s.Ob(14,"tr"),s.Kb(15,"td"),s.Ob(16,"td",17),s.yc(17,"Total : \xa0"),s.Nb(),s.Ob(18,"th"),s.yc(19),s.Nb(),s.Kb(20,"td"),s.Nb(),s.Nb(),s.Nb()),2&e){var n=s.ac();s.xb(12),s.hc("ngForOf",n.shipAdminCashbook),s.xb(7),s.zc(n.total)}}var Ne,Oe,Se,xe=[{path:"sells",component:A},{path:"counter",component:J},{path:"range",component:K},{path:"booking",component:re},{path:"individual",component:(Oe=function(){function t(n,i,o,a){e(this,t),this.userService=n,this.reportService=i,this.util=o,this.shipService=a,this.daterange={},this.reportType="Sells",this.loading=!1,this.soldBy=new Map}return n(t,[{key:"ngOnInit",value:function(){this.getAllShip(),this.setDateRanges()}},{key:"setDateRanges",value:function(){this.daterange.startDate=new Date,this.daterange.endDate=new Date;var e=new Date;e.setDate(this.daterange.startDate.getDate()-190);var t=new Date;t.setDate(this.daterange.endDate.getDate()+190),this.daterange.startDate.setDate(this.daterange.endDate.getDate()-10),this.daterange.endDate.setDate(this.daterange.endDate.getDate()+10),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:e,maxDate:t,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}},{key:"selectedDate",value:function(e){this.reportList=null,this.daterange.startDate=e.start._d,this.daterange.endDate=e.end._d,this.daterange.label=e.label}},{key:"onPrint",value:function(){window.print()}},{key:"getAllShip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.shipService.getAllShip(e).toPromise();case 4:n=t.sent,this.shipList=n.content,this.shipList.sort(this.util.dynamicSortObject("priority")),this.loading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,8]])}))}},{key:"getServiceAdminUserByRole",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.reportList=null,this.loading=!0,t.prev=1,t.next=4,this.userService.getServiceAdminUserByRole(e).toPromise();case 4:this.userList=t.sent,this.userList.sort(this.util.dynamicSortObject("name")),this.loading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[1,9]])}))}},{key:"onCounterChange",value:function(e){this.reportList=null,this.counter=this.userList.find(function(t){return t.id==e})}},{key:"onShipChange",value:function(e){this.reportList=null,this.ship=this.shipList.find(function(t){return t.id==e})}},{key:"onSearch",value:function(){switch(this.reportType){case"Sells":this.getServiceAdminSellsRangeReport(this.ship.id,this.counter.id,this.daterange.startDate,this.daterange.endDate);break;case"Reservation":this.getServiceAdminReservationRangeReport(this.ship.id,this.counter.id,this.daterange.startDate,this.daterange.endDate)}}},{key:"getServiceAdminSellsRangeReport",value:function(e,t,n,i){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var a,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.loading=!0,a=this.util.getDateString(n),r=this.util.getDateString(i),o.prev=2,o.next=5,this.reportService.getServiceAdminSellsReportRangeForIndividual(e,t,a,r).toPromise();case 5:this.reportList=o.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),console.log(o.t0);case 13:case"end":return o.stop()}},o,this,[[2,10]])}))}},{key:"getServiceAdminReservationRangeReport",value:function(e,t,n,i){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var a,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.loading=!0,a=this.util.getDateString(n),r=this.util.getDateString(i),o.prev=2,o.next=5,this.reportService.getServiceAdminReserveReportRangeForIndividual(e,t,a,r).toPromise();case 5:this.reportList=o.sent,this.calculateServiceAdminBookingReportList(),this.loading=!1,o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),console.log(o.t0);case 13:case"end":return o.stop()}},o,this,[[2,10]])}))}},{key:"calculateServiceAdminBookingReportList",value:function(){var e=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalCommission:0},this.soldBy=new Map,this.reportList.forEach(function(t){if(e.total.totalrent+=t.price,e.total.totalCommission+=t.hotelswaveAgentCommission+t.hotelswaveCommission+t.shipAgentCommission,t.soldBy&&t.seatNumbers){var n=null==e.soldBy.get(t.soldBy)?t.hotelswaveCommission:e.soldBy.get(t.soldBy).hotelswaveCommission+t.hotelswaveCommission,i=null==e.soldBy.get(t.soldBy)?t.hotelswaveAgentCommission:e.soldBy.get(t.soldBy).hotelswaveAgentCommission+t.hotelswaveAgentCommission,o=null==e.soldBy.get(t.soldBy)?t.shipAgentCommission:e.soldBy.get(t.soldBy).shipAgentCommission+t.shipAgentCommission,a=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalSeatNumber+t.seatNumbers.length,r=0,c=0,b=0;"SEAT_SOLD"==t.bookingStatus?(c=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalSold+t.seatNumbers.length,r=null==e.soldBy.get(t.soldBy)?t.price:e.soldBy.get(t.soldBy).price+t.price):(b=null==e.soldBy.get(t.soldBy)?t.seatNumbers.length:e.soldBy.get(t.soldBy).totalReserved+t.seatNumbers.length,r=null==e.soldBy.get(t.soldBy)?0:e.soldBy.get(t.soldBy).price),e.soldBy.set(t.soldBy,{totalSold:c,totalReserved:b,price:r,hotelswaveCommission:n,hotelswaveAgentCommission:i,shipAgentCommission:o,totalSeatNumber:a})}})}},{key:"clear",value:function(){this.reportList=null}}]),t}(),Oe.\u0275fac=function(e){return new(e||Oe)(s.Jb(ce.a),s.Jb(b.a),s.Jb(be.a),s.Jb(se.a))},Oe.\u0275cmp=s.Db({type:Oe,selectors:[["app-individual-report"]],decls:57,vars:7,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none","bg-light","shadow-sm"],[1,"col-auto"],[1,"form-group"],["for","counterType"],["id","counterType",1,"form-control",3,"change"],["value",""],["value","admin"],["value","Agent"],["value","Service Admin"],["value","Service Agent"],["for","counter"],[3,"value",4,"ngFor","ngForOf"],["for","dateRange"],["type","text","id","dateRange","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],["for","reportType"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center","ml-auto","mr-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf"],["class","row mb-5 mx-2",4,"ngIf"],[3,"value"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"row","mb-5","mx-2"],[1,"col-12"],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"table","table-bordered","table-hover","table-responsive-sm","mt-4"]],template:function(e,t){1&e&&(s.Ob(0,"div",0),s.Ob(1,"span",1),s.yc(2,"Individual Report"),s.Nb(),s.Nb(),s.Ob(3,"div",2),s.Ob(4,"div",3),s.Ob(5,"div",4),s.Ob(6,"div",5),s.Ob(7,"label",6),s.yc(8,"Counter Type"),s.Nb(),s.Ob(9,"select",7),s.Yb("change",function(e){return t.getServiceAdminUserByRole(e.target.value)}),s.Ob(10,"option",8),s.yc(11," Select a counterType "),s.Nb(),s.Ob(12,"option",9),s.yc(13," Hotelswave "),s.Nb(),s.Ob(14,"option",10),s.yc(15," Hotelswave Agent "),s.Nb(),s.Ob(16,"option",11),s.yc(17," Ship Admin "),s.Nb(),s.Ob(18,"option",12),s.yc(19," Ship Agent "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(20,"div",4),s.Ob(21,"div",5),s.Ob(22,"label",13),s.yc(23,"Counter"),s.Nb(),s.Ob(24,"select",7),s.Yb("change",function(e){return t.onCounterChange(e.target.value)}),s.Ob(25,"option",8),s.yc(26," Select a Counter "),s.Nb(),s.wc(27,le,2,3,"option",14),s.Nb(),s.Nb(),s.Nb(),s.Ob(28,"div",4),s.Ob(29,"div",5),s.Ob(30,"label",15),s.yc(31,"Date Range"),s.Nb(),s.Ob(32,"input",16),s.Yb("selected",function(e){return t.selectedDate(e)}),s.Nb(),s.Nb(),s.Nb(),s.Ob(33,"div",4),s.Ob(34,"label",17),s.yc(35,"Report Type"),s.Nb(),s.Ob(36,"div",18),s.Ob(37,"select",19),s.Yb("ngModelChange",function(e){return t.reportType=e})("change",function(){return t.clear()}),s.Ob(38,"option",20),s.yc(39," By Sells "),s.Nb(),s.Ob(40,"option",21),s.yc(41," By Journey Date "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(42,"div",4),s.Ob(43,"div",5),s.Ob(44,"label",13),s.yc(45,"Ship"),s.Nb(),s.Ob(46,"select",7),s.Yb("change",function(e){return t.onShipChange(e.target.value)}),s.Ob(47,"option",8),s.yc(48," Select a Ship "),s.Nb(),s.wc(49,de,2,3,"option",14),s.Nb(),s.Nb(),s.Nb(),s.wc(50,ue,3,0,"div",22),s.Ob(51,"div",23),s.Ob(52,"button",24),s.Yb("click",function(){return t.onPrint()}),s.Kb(53,"i",25),s.yc(54," Print"),s.Nb(),s.Nb(),s.Nb(),s.wc(55,he,1,0,"loading",26),s.wc(56,ve,65,16,"div",27),s.Nb()),2&e&&(s.xb(27),s.hc("ngForOf",t.userList),s.xb(5),s.hc("options",t.options),s.xb(5),s.hc("ngModel",t.reportType),s.xb(12),s.hc("ngForOf",t.shipList),s.xb(1),s.hc("ngIf",!!t.counter&&!!t.ship),s.xb(5),s.hc("ngIf",t.loading),s.xb(1),s.hc("ngIf",t.reportList&&t.reportList.length>0))},directives:[u.o,u.u,h.m,B.b,u.s,u.k,u.n,h.n,p.a],pipes:[h.e,h.h],styles:[""]}),Oe)},{path:"agent-cash",component:(Ne=function(){function t(n){e(this,t),this.reportService=n,this.shipAdminCashbook=[],this.total=0}return n(t,[{key:"ngOnInit",value:function(){var e=new Date;this.dd={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.maxDate=Object.assign({},this.dd),this.getAdminAgentCash(this.dd)}},{key:"getAdminAgentCash",value:function(e){var t=e.year,n=e.month,i=e.day;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var o,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t,"-").concat(n=n<10?"0"+n:n,"-").concat(i=i<10?"0"+i:i),e.prev=1,e.next=4,this.reportService.getServiceAdminAgentCashReport(o).toPromise();case 4:a=e.sent,this.shipAdminCashbook=a,r=0,this.shipAdminCashbook.forEach(function(e){r+=e.debit}),this.total=r,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}))}},{key:"onDateChange",value:function(){console.log("onDateChange",this.dd)}}]),t}(),Ne.\u0275fac=function(e){return new(e||Ne)(s.Jb(b.a))},Ne.\u0275cmp=s.Db({type:Ne,selectors:[["app-agent-cash"]],decls:19,vars:6,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row"],[1,"col-auto"],[1,"form-group"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","maxDate","ngModelChange","dateSelect"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"col","text-center"],[1,"offset-md-2","col-md-8"],["class","table border table-responsive-sm table-hover",4,"ngIf"],[1,"table","border","table-responsive-sm","table-hover"],[4,"ngFor","ngForOf"],[1,"text-right"]],template:function(e,t){if(1&e){var n=s.Pb();s.Ob(0,"div",0),s.Ob(1,"span",1),s.yc(2,"Agent Cash Report"),s.Nb(),s.Nb(),s.Ob(3,"div",2),s.Ob(4,"div",3),s.Ob(5,"div",4),s.Ob(6,"div",5),s.Ob(7,"div",6),s.Ob(8,"input",7,8),s.Yb("ngModelChange",function(e){return t.dd=e})("dateSelect",function(){return t.getAdminAgentCash(t.dd)}),s.Nb(),s.Ob(10,"div",9),s.Ob(11,"button",10),s.Yb("click",function(){return s.qc(n),s.pc(9).toggle()}),s.Kb(12,"i",11),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(13,"div",12),s.Ob(14,"h3"),s.yc(15),s.Nb(),s.Nb(),s.Nb(),s.Ob(16,"div",3),s.Ob(17,"div",13),s.wc(18,fe,21,2,"table",14),s.Nb(),s.Nb(),s.Nb()}2&e&&(s.xb(8),s.hc("ngModel",t.dd)("maxDate",t.maxDate),s.xb(7),s.Cc("Agent cash report for ",null==t.dd?null:t.dd.day,"-",null==t.dd?null:t.dd.month,"-",null==t.dd?null:t.dd.year,""),s.xb(3),s.hc("ngIf",t.shipAdminCashbook))},directives:[d.e,u.b,u.k,u.n,h.n,h.m],pipes:[h.e],styles:[""]}),Ne)}],ke=((Se=function t(){e(this,t)}).\u0275mod=s.Hb({type:Se}),Se.\u0275inj=s.Gb({factory:function(e){return new(e||Se)},imports:[[r.a,a.e.forChild(xe)]]}),Se)},z3bE:function(t,i,o){"use strict";o.d(i,"a",function(){return r});var a=o("fXoL"),r=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"getDatesBetween",value:function(e,t){var n=new Date(e),i=new Date(t);i.setDate(i.getDate()-1);for(var o=[];n.getTime()<=i.getTime();){var a=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate();o.push(a),n.setDate(n.getDate()+1)}return o}},{key:"getDateString",value:function(e){var t=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+n}},{key:"getDateStringFromDateObj",value:function(e){return e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)}},{key:"getTimeStringFromTimeObj",value:function(e){return e.hour+":"+e.minute}},{key:"dynamicSortObject",value:function(e){var t=e.split("."),n=t.length;if(n<2){var i=1;return"-"===e[0]&&(i=-1,e=e.substr(1)),function(t,n){return(t[e]<n[e]?-1:t[e]>n[e]?1:0)*i}}if(n>=2)return function(e,i){for(var o=0;o<n;)e=e[t[o]],i=i[t[o]],o++;return e<i?-1:e>i?1:0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();