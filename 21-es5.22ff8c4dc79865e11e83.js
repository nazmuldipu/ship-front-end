!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{qGDO:function(t,r,o){"use strict";o.r(r),o.d(r,"ROUTES",function(){return x}),o.d(r,"SUsersModule",function(){return w});var i=o("tyNb"),s=o("MKLO"),c=o("mrSG"),a=o("/7iW"),u=o("fXoL"),m=o("FCUJ"),b=(o("zdEN"),o("3Pt+")),l=o("ofXK");function f(e,t){1&e&&(u.Ob(0,"small",16),u.yc(1," Name required "),u.Nb())}function h(e,t){if(1&e&&(u.Ob(0,"small",16),u.Ob(1,"div",17),u.yc(2," Phone number required "),u.Nb(),u.Ob(3,"div",17),u.yc(4," Phone number format 01934953023 "),u.Nb(),u.Nb()),2&e){var n=u.ac();u.xb(1),u.hc("hidden",!n.form.controls.phoneNumber.errors.required),u.xb(2),u.hc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}function d(e,t){1&e&&(u.Ob(0,"small",16),u.yc(1," Commission required "),u.Nb())}function v(e,t){if(1&e){var n=u.Pb();u.Ob(0,"button",18),u.Yb("click",function(){u.qc(n);var e=u.ac();return e.onRemoveAgent(e.user.id)}),u.yc(1," Remove this agent "),u.Nb()}}var g,p,N,y=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},O=((g=function(){function t(n){e(this,t),this.builder=n,this.create=new u.n,this.removeAgent=new u.n,this.exists=!1,this.createForm()}return n(t,[{key:"ngOnChanges",value:function(e){e.user&&this.user&&this.user.id&&(this.exists=!0,this.form.patchValue(Object.assign({},{name:this.user.name,phoneNumber:this.user.phoneNumber,email:this.user.email,commission:this.user.commission})))}},{key:"createForm",value:function(){this.form=this.builder.group({name:["",b.t.required],phoneNumber:["",[b.t.required,b.t.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:"",commission:["",b.t.required]})}},{key:"submit",value:function(){if(this.form.valid){if(this.exists){var e=Object.assign(Object.assign({},this.user),this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.onClear()}}},{key:"onRemoveAgent",value:function(e){this.removeAgent.emit(e),this.onClear()}},{key:"onClear",value:function(){this.form.reset(),this.exists=!1}}]),t}()).\u0275fac=function(e){return new(e||g)(u.Jb(b.c))},g.\u0275cmp=u.Db({type:g,selectors:[["agent-form"]],inputs:{user:"user"},outputs:{create:"create",removeAgent:"removeAgent"},features:[u.vb],decls:27,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["for","commission"],["type","number","id","commission","placeholder","Commission","formControlName","commission",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","mx-1",3,"ngClass"],["type","button","class","btn btn-sm btn-success mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-success","mx-1",3,"click"]],template:function(e,t){1&e&&(u.Ob(0,"form",0),u.Yb("ngSubmit",function(){return t.submit()}),u.Ob(1,"div",1),u.Ob(2,"div",2),u.Ob(3,"label",3),u.yc(4,"Name *"),u.Nb(),u.Kb(5,"input",4),u.wc(6,f,2,0,"small",5),u.Nb(),u.Ob(7,"div",2),u.Ob(8,"label",6),u.yc(9,"Phone *"),u.Nb(),u.Kb(10,"input",7),u.wc(11,h,5,2,"small",5),u.Nb(),u.Ob(12,"div",2),u.Ob(13,"label",8),u.yc(14,"Email"),u.Nb(),u.Kb(15,"input",9),u.Nb(),u.Ob(16,"div",2),u.Ob(17,"label",10),u.yc(18,"Commission *"),u.Nb(),u.Kb(19,"input",11),u.wc(20,d,2,0,"small",5),u.Nb(),u.Nb(),u.Ob(21,"div",12),u.Ob(22,"button",13),u.yc(23),u.Nb(),u.wc(24,v,2,0,"button",14),u.Ob(25,"button",15),u.Yb("click",function(){return t.onClear()}),u.yc(26," Clear "),u.Nb(),u.Nb(),u.Nb()),2&e&&(u.hc("formGroup",t.form),u.xb(6),u.hc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),u.xb(5),u.hc("ngIf",t.form.controls.phoneNumber.errors&&t.form.controls.phoneNumber.touched),u.xb(9),u.hc("ngIf",t.form.controls.commission.errors&&t.form.controls.commission.touched),u.xb(2),u.hc("ngClass",u.nc(7,y,t.form.invalid,t.exists,!t.exists)),u.xb(1),u.Ac(" ",t.exists?"Update":"Create"," User "),u.xb(1),u.hc("ngIf",t.exists))},directives:[b.v,b.l,b.e,b.b,b.k,b.d,l.o,b.h,b.p,l.m],styles:[""]}),g),x=[{path:"agent",component:(p=function(){function t(n){e(this,t),this.userService=n}return n(t,[{key:"ngOnInit",value:function(){this.getServiceAdminAgents()}},{key:"getServiceAdminAgents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.userService.getServiceAdminAgents(e).toPromise();case 3:this.userPage=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}))}},{key:"onCreate",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.userService.createSerivceAdminAgent(e).toPromise();case 3:this.getServiceAdminAgents(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}))}},{key:"onSelect",value:function(e){var t=this.userPage.content.find(function(t){return t.id===e});this.user=t}},{key:"onRemoveAgent",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("On leave ",e),!confirm("Are you sure to remove agent with id = "+e)){t.next=10;break}return t.prev=1,t.next=4,this.userService.removeServiceAdminAgent(e).toPromise();case 4:this.getServiceAdminAgents(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[1,7]])}))}}]),t}(),p.\u0275fac=function(e){return new(e||p)(u.Jb(a.a))},p.\u0275cmp=u.Db({type:p,selectors:[["app-add-agent"]],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[3,"userPage","userId","page"],[1,"p-3","shadow-sm"],[1,"text-center"],[3,"user","create","removeAgent"]],template:function(e,t){1&e&&(u.Ob(0,"div",0),u.Ob(1,"span",1),u.yc(2,"Agents"),u.Nb(),u.Nb(),u.Ob(3,"div",0),u.Ob(4,"div",2),u.Ob(5,"div",3),u.Ob(6,"service-admin-agent-list",4),u.Yb("userId",function(e){return t.onSelect(e)})("page",function(e){return t.getServiceAdminAgents(e)}),u.Nb(),u.Nb(),u.Ob(7,"div",3),u.Ob(8,"div",5),u.Ob(9,"h3",6),u.yc(10,"Add Agent"),u.Nb(),u.Ob(11,"agent-form",7),u.Yb("create",function(e){return t.onCreate(e)})("removeAgent",function(e){return t.onRemoveAgent(e)}),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb()),2&e&&(u.xb(6),u.hc("userPage",t.userPage),u.xb(5),u.hc("user",t.user))},directives:[m.a,O],styles:[""]}),p)}],w=((N=function t(){e(this,t)}).\u0275mod=u.Hb({type:N}),N.\u0275inj=u.Gb({factory:function(e){return new(e||N)},imports:[[s.a,i.e.forChild(x)]]}),N)}}])}();